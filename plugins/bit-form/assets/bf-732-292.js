var C=Object.defineProperty;var p=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var f=(o,s,t)=>s in o?C(o,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[s]=t,g=(o,s)=>{for(var t in s||(s={}))F.call(s,t)&&f(o,t,s[t]);if(p)for(var t of p(s))M.call(s,t)&&f(o,t,s[t]);return o};import{p as G,o as N,u as P,a as T,r as l,j as a,S as B,B as L,q as E,_ as U,$ as z}from"./main-281.js";/* empty css          */import{B as D}from"./bf-751-65.js";import{S as O}from"./bf-874-123.js";import{b as R}from"./bf-814-70.js";import{I as $}from"./bf-683-305.js";import V from"./bf-597-248.js";import{h as Z,c as H,b as J}from"./bf-426-365.js";import{G as K}from"./bf-88-366.js";import"./bf-646-73.js";import"./bf-310-72.js";import"./bf-185-296.js";import"./bf-80-373.js";import"./bf-988-374.js";import"./bf-607-113.js";import"./bf-977-119.js";import"./bf-976-308.js";import"./bf-44-116.js";function ge({formFields:o,setIntegration:s,integrations:t,allIntegURL:h}){var u;const y=G(),{formID:b}=N(),k=P(z),{css:_}=T(),[n,m]=l.useState(!1),[i,c]=l.useState(1),[x,r]=l.useState({show:!1}),q=[{key:"email",label:"Email",required:!0},{key:"first_name",label:"First Name",required:!1},{key:"last_name",label:"Last Name",required:!1},{key:"user_id",label:"User Id",required:!1},{key:"owner_id",label:"Owner Id",required:!1},{key:"optin_status",label:"Optin Status",required:!1}],I=[{key:"primary_phone",label:"Primary Phone",required:!1},{key:"street_address_1",label:"Street Address 1",required:!1},{key:"street_address_2",label:"Street Address 2",required:!1},{key:"postal_zip",label:"Postal Zip",required:!1},{key:"city",label:"City",required:!1},{key:"country",label:"Country",required:!1}],S=[{key:"1",label:"Create Contact"},{key:"2",label:"Add tag to user"}],[e,d]=l.useState({name:"Groundhogg",type:"Groundhogg",token:"",public_key:"",id:"",mainAction:"",addTagToUser:"",emailAddress:"",domainName:k.siteURL,showMeta:!1,field_map:[{formField:"",GroundhoggMapField:""}],field_map_meta:[{formField:"",GroundhoggMetaMapField:""}],contactsFields:q,contactMetaFields:I,allActions:S,address_field:[],actions:{}}),j=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),e.mainAction==="1"&&!H(e)){r({show:!0,msg:"Please map fields to continue."});return}if(e.showMeta&&!J(e)){r({show:!0,msg:"Please map fields to continue."});return}e.listId!==""&&c(3)},v=!(e.mainAction==="2"&&e.addTagToUser!==""),w=()=>{R(t,s,h,e,y)};return a.jsxs("div",{children:[a.jsx(B,{snack:x,setSnackbar:r}),a.jsx("div",{className:"txt-center w-9 mt-2 cal-width",children:a.jsx(O,{step:3,active:i})}),a.jsx(V,{formID:b,groundhoggConf:e,setGroundhoggConf:d,step:i,setstep:c,isLoading:n,setIsLoading:m,setSnackbar:r}),a.jsxs("div",{className:"btcd-stp-page",style:g({},i===2&&{width:900,height:"auto",overflow:"visible"}),children:[a.jsx(K,{formFields:o,handleInput:A=>Z(A,e,d),groundhoggConf:e,setGroundhoggConf:d,isLoading:n,setIsLoading:m,setSnackbar:r}),a.jsxs(L,{variant:"success",onClick:()=>j(),disabled:(e.mainAction==="2"?v:!(((u=e.field_map)==null?void 0:u.length)>=1))||n,className:_(E.mt3,{ml:3}),children:[U("Next"),"Â ",a.jsx(D,{className:"ml-1 rev-icn"})]})]}),a.jsx($,{step:i,saveConfig:()=>w()})]})}export{ge as default};
