var Ye=Object.defineProperty,Qe=Object.defineProperties;var Ve=Object.getOwnPropertyDescriptors;var Ee=Object.getOwnPropertySymbols;var Le=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable;var Me=(o,t,s)=>t in o?Ye(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s,M=(o,t)=>{for(var s in t||(t={}))Le.call(t,s)&&Me(o,s,t[s]);if(Ee)for(var s of Ee(t))Ie.call(t,s)&&Me(o,s,t[s]);return o},z=(o,t)=>Qe(o,Ve(t));import{a as Q,r as de,j as e,e as ce,u as X,P as K,q as H,T as Ce,_ as m,ae as V,ac as Ge,ad as et,c2 as tt,a8 as L,$ as qe,l as R,aD as q,a2 as ve,dc as Je,bs as Ne,aG as st,aF as lt,a3 as ot,I as ke,w as Ae,af as at,ah as De,cZ as it,O as nt,i as He,h as ct,aE as rt,c as dt,d as pt}from"./main-281.js";import{S as mt,a as ut,D as ht,b as ft}from"./bf-406-106.js";import{S as bt}from"./bf-348-177.js";import{B as xt,D as ge,d as je}from"./bf-751-65.js";import{A as kt}from"./bf-826-297.js";import{B as Y}from"./bf-687-112.js";import{h as Be,a as jt,T as pe}from"./bf-646-73.js";import{P as vt}from"./bf-310-72.js";import{C as wt}from"./bf-900-104.js";import{C as te}from"./bf-845-71.js";import{D as me}from"./bf-603-115.js";import{B as yt}from"./bf-370-118.js";import{S as fe}from"./bf-977-119.js";import{M as we}from"./bf-44-116.js";import{M as he}from"./bf-119-117.js";import{u as Fe}from"./bf-607-113.js";/* empty css          */import"./bf-112-111.js";import"./bf-724-110.js";function Re({title:o,titleOutline:t,accordionActions:s,children:p}){const{css:i}=Q(),[l,f]=de.useState(!0),A=()=>{f(b=>!b)};return e.jsxs("div",{className:i(ee.section),children:[e.jsxs("div",{className:`${i(ee.titleWrp)}`,children:[e.jsxs("button",{type:"button",className:`${i(ee.title,t?ee.titleOutline:{})} btcd-logic-blk`,onClick:A,children:[o,e.jsx("span",{className:i(ee.titleIcn),children:e.jsx(wt,{size:15,rotate:!l})})]}),e.jsx("div",{className:`${i(ee.accrActions)} accr-actions`,children:s})]}),l&&e.jsx("div",{className:i(ee.content),children:p}),!l&&e.jsx("div",{className:i(ee.content),children:e.jsxs("button",{className:i(ee.collapsedAccrdn),type:"button",onClick:A,children:[e.jsx("span",{className:i(ee.collapsedCrl)}),e.jsx("span",{className:i(ee.collapsedCrl)}),e.jsx("span",{className:i(ee.collapsedCrl)})]})})]})}const ee={section:{pb:12},accrActions:{dy:"none"},titleWrp:{flx:1,":hover .accr-actions":{flx:1}},title:{bc:"var(--b-50)",h:35,fs:14,p:"0 15px",brs:30,cr:"#fff",fw:600,lh:"29px",cur:"pointer",us:"none",b:0,oe:0,flx:"center"},titleOutline:{b:"2px solid var(--b-50)",bc:"#fff",cr:"var(--b-50)",p:"0 13px"},titleIcn:{ml:8,flx:"center"},content:{my:5,ml:45},collapsedAccrdn:{b:0,oe:0,bc:"#D9D9D9",w:65,brs:10,h:20,flx:"center",rg:5,cg:5,curp:1,mt:15,":focus":{oe:"none"}},collapsedCrl:{dy:"inline-block",w:5,h:5,bc:"#AAAAAA",brs:"50%"}};function Te({lgcGrpInd:o,condGrpInd:t,actionKey:s,enableAction:p,checkKeyInArr:i,getValueFromArr:l,title:f}){const{css:A}=Q(),[b,a]=ce(V),y=X(Ge),u=X(et),k=X(tt),c=K(L),r=X(qe),h=()=>{const g=[];return k.map(n=>{(n.type==="file-up"||n.type==="advanced-file-up")&&g.push({label:n.name,value:n.key})}),g},x=()=>k.filter(g=>g.type==="email").length>0,$=()=>{const g=[];if(x()){const n=[];k.map(j=>{j.type==="email"&&n.push({label:j.name,value:`\${${j.key}}`})}),g.push({title:"Form Fields",type:"group",childs:n})}return r.userMail&&Array.isArray(r.userMail)&&g.push({title:"WP Emails",type:"group",childs:r.userMail}),g},S=(g,n)=>{console.log({typ:g,value:n});const j=R(b,w=>{const{success:O}=w[o].conditions[t].actions,B=O.find(_=>_.type===s);B&&(B.details[g]=n)});console.log({tmpWorkflows:j}),a(j),c(w=>z(M({},w),{unsaved:!0}))};return e.jsxs("div",{className:A(H.mt2),children:[e.jsx(Ce,{onChange:g=>p(g.target.checked,s),title:f,checked:i(s),className:A(H.flxc)}),i(s)&&e.jsxs("div",{className:A({mt:5,ml:28}),children:[e.jsx("label",{className:"f-m f-5",children:m("Email Template:")}),e.jsx("div",{className:"mt-1"}),e.jsxs("select",{className:"btcd-paper-inp w-7",onChange:g=>S("id",g.target.value),value:l(s,"id"),children:[e.jsx("option",{value:"",children:m("Select Email Template")}),y==null?void 0:y.map((g,n)=>e.jsx("option",{value:g.id?JSON.stringify({id:String(g.id)}):JSON.stringify({index:String(n)}),children:g.title},`sem-${n+2.3}`))]}),e.jsx(me,{action:g=>S("to",g?g.split(","):[]),value:l(s,"to"),placeholder:m("Add Email Receiver"),title:e.jsx("span",{className:"f-m f-5",children:m("To")}),isMultiple:!0,titleClassName:"w-7 mt-2",className:"w-10 mt-1",addable:!0,options:$(l(s,"to"))}),e.jsx(me,{action:g=>S("from",g),placeholder:m("Add mail from address"),value:l(s,"from"),title:e.jsx("span",{className:"f-m f-5",children:m("From")}),titleClassName:"w-7 mt-2",className:"w-10 mt-1",addable:!0,options:$(l(s,"from"))}),e.jsx(me,{action:g=>S("cc",g?g.split(","):[]),value:l(s,"cc"),placeholder:m("Add Email CC"),title:e.jsx("span",{className:"f-m f-5",children:m("CC")}),isMultiple:!0,titleClassName:"w-7 mt-2",className:"w-10 mt-1",addable:!0,options:$(l(s,"cc"))}),e.jsx(me,{action:g=>S("bcc",g?g.split(","):[]),placeholder:m("Add Email BCC"),value:l(s,"bcc"),title:e.jsx("span",{className:"f-m f-5",children:m("BCC")}),isMultiple:!0,titleClassName:"w-7 mt-2",className:"w-10 mt-1",addable:!0,options:$(l(s,"bcc"))}),e.jsx(me,{action:g=>S("replyto",g?g.split(","):[]),placeholder:m("Reply To"),value:l(s,"replyto"),title:e.jsx("span",{className:"f-m f-5",children:m("Reply To")}),isMultiple:!0,titleClassName:"w-7 mt-2",className:"w-10 mt-1",addable:!0,options:$(l(s,"replyto"))}),e.jsx(me,{action:g=>S("attachment",g?g.split(","):[]),placeholder:m("Attachment"),value:l(s,"attachment"),title:e.jsx("span",{className:"f-m f-5",children:m("Attachment")}),isMultiple:!0,titleClassName:"w-7 mt-2",className:"w-10 mt-1",options:h()}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:"pdf-template",className:"f-m f-5",children:m("PDF Attachment Template:")}),e.jsx("div",{className:"mt-1"}),e.jsxs("select",{className:"btcd-paper-inp w-7",onChange:g=>S("pdfId",g.target.value),value:l(s,"pdfId"),children:[e.jsx("option",{value:"",children:m("Select PDF Template")}),u==null?void 0:u.map((g,n)=>e.jsx("option",{value:g.id?JSON.stringify({id:String(g.id)}):JSON.stringify({index:String(n)}),children:g.title},`sem-${n+2.3}`))]})]})]})]})}function Nt({clickAction:o,options:t,formFields:s}){const p=[{id:25,type:"back",content:e.jsx(xt,{size:"18"})},{id:6,type:"operator",content:"("},{id:7,type:"operator",content:")"},{id:8,type:"empty",content:""},{id:9,type:"number",content:"7"},{id:10,type:"number",content:"8"},{id:11,type:"number",content:"9"},{id:12,type:"operator",content:"/"},{id:13,type:"number",content:"4"},{id:14,type:"number",content:"5"},{id:15,type:"number",content:"6"},{id:16,type:"operator",content:"*"},{id:17,type:"number",content:"1"},{id:18,type:"number",content:"2"},{id:19,type:"number",content:"3"},{id:20,type:"operator",content:"+"},{id:24,type:"clear",content:"AC"},{id:21,type:"number",content:"0"},{id:22,type:"number",content:"."},{id:23,type:"operator",content:"-"}],{css:i}=Q();return e.jsxs("div",{className:i(ne.board),children:[e.jsxs("div",{className:i(ne.leftSlider),children:[t&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:i({m:0,td:"underline",mt:5}),children:"Options"}),t.map((l,f)=>l.type==="group"?e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:i({m:0}),children:l.title}),l.childs.map(A=>e.jsx("div",{role:"button",className:i(ne.field,H.ml1),onClick:()=>o(`${f+1}`,"option",{label:A.label,content:A.value},A.value.length),tabIndex:0,onKeyDown:void 0,children:A.label},`${A.value}${f+1}`))]}):e.jsx("div",{role:"button",className:i(ne.field),onClick:()=>o(`${f+1}`,"option",{label:l.label,content:l.value},l.value.length),tabIndex:0,onKeyDown:void 0,children:l.label},`${l.value}${f+1}`)),e.jsx("div",{role:"button",className:i(ne.field),onClick:()=>o(199,"field",{label:"Separator",content:"_bf_separator"}),tabIndex:0,onKeyDown:void 0,children:"Separator"})]}),e.jsx("h4",{className:i({m:0}),children:"Form Fields"}),s==null?void 0:s.map((l,f)=>e.jsx("div",{role:"button",className:i(ne.field),onClick:()=>o(`${f+1}`,"field",{label:l.name,content:l.key}),tabIndex:0,onKeyDown:void 0,children:l.name},`field-${f}`)),e.jsx("h4",{className:i({m:0,td:"underline",mt:5}),children:"Smart Tags"}),fe.map((l,f)=>e.jsx("div",{role:"button",className:i(ne.field),onClick:()=>o(`${f+1}`,"field",{label:l.label,content:l.name,isFunction:l.custom}),tabIndex:0,onKeyDown:void 0,children:l.label},l.id))]}),e.jsxs("div",{className:i(ne.keyContainer),children:[p.map(l=>e.jsx("div",{role:"button",className:`custom-button ${i(ne.customButton)} ${l.type}`,onClick:()=>o(l.id,l.type,{content:l.content}),tabIndex:0,onKeyUp:void 0,children:l.content},l.id)),e.jsx("span",{role:"button",className:i(ne.crossButton),onClick:()=>Be(),tabIndex:0,onKeyDown:void 0,children:e.jsx(q,{size:"12"})})]})]})}const ne={board:{w:310,h:225,p:2,brs:5,dy:"flex",ta:"left"},leftSlider:{w:"40%",h:"100%",bc:"#F8F8F8",brs:8,cr:"#6A6A6A",dy:"flex",fd:"column",p:5,mr:5,ow:"overlay"},keyContainer:{w:"60%",h:"100%",bc:"white",dy:"flex",flxp:"wrap",pn:"relative"},h4:{fw:"500"},field:{fw:"400",fs:"12px !important",brs:"8px",padding:"5px",cur:"pointer",":hover":{bc:"#E5E5E5"}},customButton:{w:"45px",h:"45px",brs:"10px",br:"none",bc:"white",cr:"black",dy:"flex",ai:"center",jc:"center",cur:"pointer",fw:"600",fs:"18px",lh:"17px",":hover":{bc:"#F8F8F8"},"&.empty:hover":{bc:"white",cur:"default"}},crossButton:{pn:"absolute",w:"20px",h:"20px",brs:"50%",bc:"#F4F4F4",dy:"flex",jc:"center",ai:"center",cur:"pointer",rt:"-5px",tp:"-5px"}};function Ke({label:o,onChange:t,value:s,disabled:p,type:i,textarea:l,className:f,options:A,formFields:b}){const{css:a}=Q(),y=X(ve),u=Je(y),[k,c]=de.useState(()=>We(s,u)),[r,h]=de.useState(k.length),[x,$]=de.useState(!1),S=de.useRef(null),g=k.length>0,n=N=>{let F="",v=0,W=0;for(!x&&c(d=>d.filter(D=>(D==null?void 0:D.type)!=="caret")),k.map(d=>{d.type==="field"?d.dataObj.isFunction?(v+=1,F+=`\${${d.dataObj.content}`):F+=`\${${d.dataObj.content}}`:(F+=d.dataObj.content,v&&d.dataObj.content==="("&&(W+=1),v&&d.dataObj.content===")"&&(W-=1,W||(F+="}",v-=1)))});v--;)F+="}";t(F)},j=()=>{!x&&c(N=>R(N,F=>{F.splice(r,0,{id:0,type:"caret",dataObj:{content:""}})}))},w=N=>{const{key:F}=N,v=N.target.selectionEnd;h(v),g&&O({key:F})},O=N=>{const{key:F}=N;if(N.preventDefault&&N.preventDefault(),(F==="ArrowUp"||F==="Home")&&r>0)c(v=>{const W=v.filter(d=>d.type!=="caret");return W.unshift({id:0,type:"caret",dataObj:{content:""}}),W}),h(0);else if((F==="ArrowDown"||F==="End")&&r<k.length-1){const v=k.length-1;c(W=>{const d=W.filter(D=>D.type!=="caret");return d.push({id:0,type:"caret",dataObj:{content:""}}),d}),h(v)}else if(F==="ArrowLeft"&&r>0){const v=r-1;h(v),c(W=>R(W,d=>{[d[v],d[v+1]]=[d[v+1],d[v]]}))}else if(F==="ArrowRight"&&r<k.length-1){const v=r+1;h(v),c(W=>R(W,d=>{[d[v-1],d[v]]=[d[v],d[v-1]]}))}else F==="Backspace"?r>0&&(c(v=>v.slice(0,r-1).concat(v.slice(r))),h(v=>v-1)):F==="Delete"?r<k.length&&c(v=>v.slice(0,r+1).concat(v.slice(r+2))):/^\s{1}/.test(F)?(c(v=>R(v,W=>{W.splice(r,0,{type:"space",dataObj:{content:F}})})),h(v=>v+1)):!isNaN(F)||F==="."?(c(v=>R(v,W=>{W.splice(r,0,{type:"number",dataObj:{content:F}})})),h(v=>v+1)):"+-*/(),<>".indexOf(F)!==-1?(c(v=>R(v,W=>{W.splice(r,0,{type:"operator",dataObj:{content:F}})})),h(v=>v+1)):/^[!@#$%^&*()\\=,.?"':{}[\]|_<>]$/.test(F)?(c(v=>R(v,W=>{W.splice(r,0,{type:"symbol",dataObj:{content:F}})})),h(v=>v+1)):/^([A-Z]|[a-z]){1}\b/.test(F)&&(c(v=>R(v,W=>{W.splice(r,0,{type:"letters",dataObj:{content:F}})})),h(v=>v+1))};function B(N,F="before"){F==="straight"?r!==N&&(c(v=>{const W=v.filter(d=>d.type!=="caret");return W.splice(N,0,{id:0,type:"caret",dataObj:{content:""}}),W}),h(N)):F==="before"&&r!==N-1?(r<N&&(N-=1),c(v=>{const W=v.filter(d=>d.type!=="caret");return W.splice(N,0,{id:0,type:"caret",dataObj:{content:""}}),W}),h(N)):F==="after"&&r!==N+1&&(N+=1,r<N&&(N-=1),c(v=>{const W=v.filter(d=>d.type!=="caret");return W.splice(N,0,{id:0,type:"caret",dataObj:{content:""}}),W}),h(N))}const _=N=>{const F=N.target.selectionStart;h(F)},E=N=>{const F=N.pageX,v=N.pageY;if(N.target.classList.contains("calculator-field")){const W=N.target,d=W.children;if(W.children.length>1){let D=0;for(D=0;D<d.length;D+=1){const U=d[D].getBoundingClientRect();if(!(v>U.y+U.height)){if(F<U.x){B(D,"straight");break}else if(d[D+1]&&d[D+1].getBoundingClientRect().y>U.y+U.height){B(D+1,"straight");break}}}D===d.length&&B(D-1,"straight")}}else{const{target:W}=N,d=W.parentElement.children;for(let D=0;D<d.length;D+=1)if(d[D]===W){const U=W.getBoundingClientRect(),C=U.width/2;if(F>C+U.x){B(D,"after");break}else{B(D,"before");break}}}},Z=(N,F,v,W)=>{if(F==="clear"){c([]),h(0),t("");return}if(k.length===0)if(F==="back"&&s)t(s.slice(0,r-1)+s.slice(r)),h(d=>d-(W||1));else if(F!=="field"&&F!=="back"){const d=s.slice(0,r)+v.content+s.slice(r);h(D=>D+(W||1)),t(d)}else{const d=`${s.slice(0,r)}\${${v.content}}${s.slice(r)}`,D=We(d,u);c(D),h(U=>U+(W||1))}else F==="back"?r>0&&(c(d=>d.slice(0,r-1).concat(d.slice(r))),h(d=>d-(W||1))):v.isFunction?(v.content=v.content.slice(0,v.content.indexOf("(")),c(d=>d.slice(0,r).concat([{id:N,type:F,dataObj:v},{id:N+1,type:"operator",dataObj:{content:"("}}],d.slice(r,r+1),[{id:N+2,type:"operator",dataObj:{content:")"}}],d.slice(r+1))),h(d=>d+(W||2))):(c(d=>d.slice(0,r).concat([{id:N,type:F,dataObj:v}],d.slice(r))),h(d=>d+(W||1)));setTimeout(()=>{var d;return(d=S.current)==null?void 0:d.focus()},0)};return e.jsxs("div",{className:a(xe.wrp),children:[g&&e.jsx("div",{className:`${a(xe.calculateField)} calculator-field`,role:"textbox",ref:S,onClick:E,onKeyDown:O,onFocus:j,onBlur:n,tabIndex:0,children:k.map((N,F)=>N&&e.jsxs("span",{className:`${a(xe[N.type])} ${N.dataObj.isFunction?a(xe.function):""}`,children:[N.dataObj.label||N.dataObj.content,N.type==="caret"&&e.jsx("span",{className:"caret"})]},`sp-${F}`))}),!g&&e.jsx(we,{label:o,type:i,disabled:p,onChange:N=>t(N.target.value),onKeyUp:w,onClick:_,value:s,textarea:l,className:`${f} cal-fld-inp`}),e.jsx(jt,{trigger:"click",theme:"light",maxWidth:"520px",onShow:()=>{var N;$(!0),(N=S.current)==null||N.focus()},onHidden:()=>{$(!1),S.current!==document.activeElement&&c(N=>N.filter(F=>(F==null?void 0:F.type)!=="caret"))},p:"5px",distance:"400",interactive:!0,content:e.jsx(Nt,{clickAction:Z,options:A,formFields:b}),children:e.jsx("span",{className:a(xe.dotOpt),children:e.jsx(yt,{size:"20"})})})]})}function We(o,t){const s=[];if(/\${\w[^ ${}]*}|^\(/g.test(o)){const p=o.match(/\${\w[^ ${}]*}|\d|\D/g);p==null||p.map((i,l)=>{if(/^\s{1}/g.test(i))s.push({id:l,type:"space",dataObj:{content:i}});else if(/^([A-Z]|[a-z]){1}\b/g.test(i))s.push({id:l,type:"letters",dataObj:{content:i}});else if(!isNaN(i)||i===".")s.push({id:l,type:"number",dataObj:{content:i}});else if(/^[+\-*/(),<>]{1}$/g.test(i))s.push({id:l,type:"operator",dataObj:{content:i}});else if(/^[!@#$%^&*()\\=,.?"':{}[\]|_<>]$/g.test(i))s.push({id:l,type:"symbol",dataObj:{content:i}});else if(/\${\w[^]*[\d\D\s]\)}/g.test(i)){let f=i.replace(/^\${|}$/g,"");const A=f.slice(f.indexOf("("));f=f.replace(/\([ \d\D]*\)/g,"()");const b=fe.find(a=>a.name===f);f=f.replace(/\([ \d\D]*\)/g,""),s.push({id:l,type:"field",dataObj:{label:b==null?void 0:b.label,content:f,isFunction:!0}}),s.push(...We(A,t))}else if(/\${\w[^ ${}]*}/g.test(i)){const f=i.replace(/^\${|}$/g,""),A=t.find(b=>b.key===f);if(A)s.push({id:l,type:"field",dataObj:{label:A==null?void 0:A.name,content:A==null?void 0:A.key}});else{const b=fe.find(a=>a.name===f);b?s.push({id:l,type:"field",dataObj:{label:b==null?void 0:b.label,content:b==null?void 0:b.name}}):s.push({id:l,type:"field",dataObj:{label:"Separator",content:i}})}}})}return s}const xe={wrp:{w:"100%",mnh:38,h:"auto",lh:1.5,brs:8,dy:"flex",p:0,mt:5},calculateField:{w:"100%",h:"auto",p:5,ta:"left",b:"1px solid var(--gray-3)",brs:"8px 0px 0px 8px",dy:"flex",rg:"3px",ai:"center",jc:"left",flxp:"wrap",cur:"text",":focus-visible":{oe:"none"},":focus":{bcr:"var(--b-50)",bs:"0 0 0 2px var(--b-50) inset"}},dotOpt:{dy:"inline-flex",ai:"center",bc:"hsl(0deg 0% 85%)",p:5,b:"none",brs:"0px 8px 8px 0px",":hover":{bc:"hsl(0deg 0% 80%)"}},field:{p:"1px 7px",bc:"#E5E8FF",m:"0px 1px",dy:"flex",lh:"1.4",ai:"center",fs:"15px",jc:"center",brs:"8px"},option:{p:"1px 7px",bc:"#e6e6e6",m:"0px 1px",dy:"flex",lh:"1.4",ai:"center",fs:"15px",jc:"center",brs:"11px"},operator:{fs:"17px",fw:"600",p:"0px 1px"},space:{fs:"17px",fw:"600",p:"0px 3px"},function:{mr:"0px !important",brs:"8px 0px 0px 8px !important",bc:"hsl(233deg 100% 90%)"},caret:{dy:"inline-block",w:0,pn:"relative",h:"20px"}},gt=(o,t="")=>{if(t==="")return o;const s=t.split("."),p=s.length-1;return s.slice(0,p).forEach(l=>{o=o[l]}),s.length?o[s[p]]:o},Ct=[{key:"_bf_form",name:"Form"},{key:"_bf_step_no",name:"Step No."}],Ze=o=>{const t=[];return o.forEach(s=>{typeof s=="object"&&!Array.isArray(s)?t.push(s):Array.isArray(s)&&t.push(...Ze(s))}),t},At=()=>{const o=Ne(lt),t=Array.isArray(o)&&o.length>1,s=Ne(ot),p=t?s.multiStepSettings.btnSettings:{},{show:i,prevBtn:l,nextBtn:f}=p;return i?{[l.key]:M({},l),[f.key]:M({},f)}:{}},ye=o=>{var y;const t=Ne(ve),s=M(M({},t),At()),p=Ne(st),i=Je(s,[]),l=Ze(o.logics||[]),f=((y=o==null?void 0:o.actions)==null?void 0:y.fields)||[],A=[...l,...f].map(u=>u.field).filter(u=>u),b=i.filter(u=>u.type==="repeater").map(u=>u.key);let a="";if(b.forEach(u=>{p[u].lg.map(h=>h.i).some(h=>A.includes(h))&&(a=u)}),a){b.splice(b.indexOf(a),1);const u=b.reduce((k,c)=>{const h=p[c].lg.map(x=>x.i);return[...k,...h]},[]);return i.filter(k=>!u.includes(k.key)&&!b.includes(k.key))}return i};function _t({action:o,lgcGrp:t,lgcGrpInd:s,actionInd:p,condGrpInd:i,actionType:l,formFields:f}){var E,Z,N,F,v,W;const A=K(V),b=X(ve),a=K(L),{css:y}=Q();let u="",k="";f!==null&&f.map(d=>{d.key===o.field&&(k=d.type,u=d.key)});const c=()=>{var D,U,C,J,I,se,G,le;if(k==="razorpay")return;let d;if(d=(U=(D=b==null?void 0:b[u])==null?void 0:D.opt)==null?void 0:U.map(T=>({label:T.lbl,value:T.val||T.lbl})),k==="select"){const{optionsList:T}=(b==null?void 0:b[u])||{};if(o.action==="value")return T.reduce((ae,re)=>{const P=Object.keys(re)[0],be=Object.values(re)[0];return ae.push({type:"group",title:P,childs:be.map(ie=>({label:ie.lbl,value:ie.val||ie.lbl}))}),ae},[]);if(o.action==="activelist")return T.reduce((ae,re)=>{const P=Object.keys(re)[0];return ae.push({label:P,value:P}),ae},[])}if(k==="decision-box"){const T=b==null?void 0:b[u];return[{label:(C=T==null?void 0:T.msg)==null?void 0:C.checked,value:(J=T==null?void 0:T.msg)==null?void 0:J.checked},{label:(I=T==null?void 0:T.msg)==null?void 0:I.unchecked,value:(se=T==null?void 0:T.msg)==null?void 0:se.unchecked}]}return d||(d=(le=(G=b==null?void 0:b[u])==null?void 0:G.options)==null?void 0:le.map(T=>({label:T.lbl,value:T.val||T.code||T.i||T.lbl}))),d},r=d=>{A(D=>R(D,U=>{const{fields:C}=U[s].conditions[i].actions;C[p].action=d})),a(D=>z(M({},D),{unsaved:!0}))},h=d=>{A(D=>R(D,U=>{const{fields:C}=U[s].conditions[i].actions;C[p].val=d})),a(D=>z(M({},D),{unsaved:!0}))},x=d=>{A(D=>R(D,U=>{const{fields:C}=U[s].conditions[i].actions;C[p].field=d,C[p].val=""})),a(D=>z(M({},D),{unsaved:!0}))},$=()=>{A(d=>R(d,D=>{const{fields:U}=D[s].conditions[i].actions;U.length>1&&U.splice(p,1)})),a(d=>z(M({},d),{unsaved:!0}))},S=((E=b[o.field])==null?void 0:E.typ)||"",g=((Z=b[o.field])==null?void 0:Z.typ)!=="file-up"&&((N=b[o.field])==null?void 0:N.typ)!=="advanced-file-up",n=((F=b[o.field])==null?void 0:F.typ)!=="button",j=((v=b[o.field])==null?void 0:v.typ)==="title",w=l!=="onsubmit",O=l!=="onvalidate",B=((W=b[o.field])==null?void 0:W.typ)==="decision-box",_=o.field==="_bf_form";return e.jsxs("div",{className:"flx pos-rel btcd-logic-blk",children:[e.jsxs(he,{label:"Form Fields",value:o.field||"",onChange:d=>x(d.target.value),style:{width:720},children:[e.jsx("option",{value:"",children:m("Select One")}),f.map(d=>e.jsx("option",{value:d.key,children:d.name},`ff-Ab-${d.key}`)),Ct.map(d=>e.jsx("option",{value:d.key,children:d.name},`ff-Ab-${d.key}`))]}),e.jsx("div",{className:y({w:100,flx:"align-center",h:35,mt:5}),children:e.jsx("div",{className:y({w:"100%",bd:"#b9c5ff",h:"0.5px"})})}),e.jsxs(he,{label:"Action",onChange:d=>r(d.target.value),value:o.action||"",style:{width:400},className:"w-4",children:[e.jsx("option",{value:"",children:m("Select One")}),_&&e.jsx("option",z(M({value:"save_draft"},!ke&&{disabled:!0}),{children:m(`Save Draft ${ke?"":"(PRO)"}`)})),!_&&e.jsxs(e.Fragment,{children:[!n&&t.action_type==="oninput"&&e.jsx("option",{value:"click",children:m("Click")}),g&&n&&O&&e.jsx("option",{value:"value",children:m("Value")}),w&&O&&e.jsx("option",{value:"enable",children:m("Enable")}),w&&O&&e.jsx("option",{value:"disable",children:m("Disable")}),w&&O&&g&&n&&e.jsx("option",{value:"readonly",children:m("Readonly")}),w&&O&&g&&n&&e.jsx("option",{value:"writeable",children:m("Writeable")}),w&&O&&e.jsx("option",{value:"hide",children:m("Hide")}),w&&O&&e.jsx("option",{value:"show",children:m("Show")}),l==="onvalidate"&&e.jsx("option",{value:"required",children:m("Required")}),l==="onvalidate"&&e.jsx("option",{value:"notrequired",children:m("Not Required")}),S==="select"&&e.jsx("option",{value:"activelist",children:m("Active List")}),w&&O&&g&&n&&e.jsx("option",{value:B?"ct":"lbl",children:m("Label")}),w&&O&&g&&n&&e.jsx("option",{value:"sub-titl",children:m("Sub Title")}),w&&O&&g&&n&&!j&&e.jsx("option",{value:"hlp-txt",children:m("Helper Text")}),j&&e.jsx("option",{value:"title",children:m("Title")})]})]}),["value","activelist","lbl","ct","sub-titl","hlp-txt","title"].includes(o.action)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:y({w:100,flx:"align-center",h:35,mt:5}),children:e.jsx("div",{className:y({w:"100%",bd:"#b9c5ff",h:"0.5px"})})}),e.jsx(Ke,{label:"Value",type:k.match(/select|check|radio|number/g)?"text":k,onChange:h,value:o.val||"",options:c(),formFields:f})]}),e.jsx("div",{className:"btcd-li-side-btn",children:e.jsx(Y,{onClick:$,icn:!0,className:"ml-2 sh-sm white",children:e.jsx(Ae,{})})})]})}function $t({lgcGrp:o,lgcGrpInd:t,condGrp:s,condGrpInd:p}){const{css:i}=Q(),[l,f]=ce(V),A=K(L),{fields:b}=s.actions,a=()=>{const y=R(l,u=>{const{fields:k}=u[t].conditions[p].actions;let c="disable";u[t].action_type==="onsubmit"&&(c="value"),k.push({field:"",action:c})});f(y),A(u=>z(M({},u),{unsaved:!0}))};return e.jsxs("div",{className:i(H.mt2),children:[e.jsx("div",{className:i(Ft.title),children:e.jsx("b",{className:"txt-dp",children:"Field Actions"})}),b.map((y,u)=>e.jsx("div",{className:`mt-2 ${s.cond_type==="always"&&"ml-4"}`,children:e.jsx(_t,{lgcGrp:o,lgcGrpInd:t,condGrpInd:p,action:y,actionInd:u,actionType:o.action_type,formFields:ye(s)})},`atn-${u+22}`)),e.jsx(pe,{msg:"Add More",children:e.jsx(Y,{onClick:()=>a(),icn:!0,className:`blue sh-sm mt-2 ${s.cond_type==="always"&&"ml-4"}`,children:e.jsx(q,{size:"14",className:"icn-rotate-45"})})})]})}const Ft={title:{mb:7},chip:{mnh:30,dy:"flex !important",ai:"center",w:60,mt:9,mb:9}};function Ot({lgcGrpInd:o,condGrpInd:t,enableAction:s,checkKeyInArr:p,getValueFromArr:i}){const{css:l}=Q(),[f,A]=ce(V),b=K(L),a=X(at),y=u=>{const k=R(f,c=>{const{success:r}=c[o].conditions[t].actions,h=r.find(x=>x.type==="integ");h&&(h.details.id=u.map(x=>x.value))});A(k),b(c=>z(M({},c),{unsaved:!0}))};return e.jsxs("div",{className:l(H.mt2),children:[e.jsx(Ce,{onChange:u=>s(u.target.checked,"integ"),title:m("Integration"),checked:p("integ"),className:l(H.flxc)}),p("integ")&&e.jsx(me,{action:u=>y(u),jsonValue:!0,value:i("integ","id"),titleClassName:l({mt:5,ml:28,w:"67.5%"}),className:"w-10",isMultiple:ke,options:a==null?void 0:a.map((u,k)=>({label:u.name,value:u.id?JSON.stringify({id:String(u.id)}):JSON.stringify({index:String(k)})})),placeholder:m("Select Integation")})]})}function St({lgcGrpInd:o,condGrpInd:t,enableAction:s,checkKeyInArr:p,getValueFromArr:i}){var u,k;const{css:l}=Q(),[f,A]=ce(V),b=K(L),a=X(De),y=c=>{const r=R(f,h=>{const{success:x}=h[o].conditions[t].actions,$=x.find(S=>S.type==="redirectPage");$&&($.details.id=c)});A(r),b(h=>z(M({},h),{unsaved:!0}))};return e.jsxs("div",{className:l(H.mt2),children:[e.jsx(Ce,{onChange:c=>s(c.target.checked,"redirectPage"),title:m("Redirect URL"),checked:p("redirectPage"),className:l(H.flxc)}),p("redirectPage")&&e.jsx("div",{className:l({mt:5,ml:28}),children:e.jsxs("select",{className:"btcd-paper-inp w-7",onChange:c=>y(c.target.value),value:i("redirectPage","id"),children:[e.jsx("option",{value:"",children:m("Select Page To Redirect")}),(k=(u=a==null?void 0:a.type)==null?void 0:u.redirectPage)==null?void 0:k.map((c,r)=>e.jsx("option",{value:c.id?JSON.stringify({id:String(c.id)}):JSON.stringify({index:String(r)}),children:c.title},`sr-${r+2.5}`))]})})]})}function Bt({lgcGrpInd:o,condGrpInd:t,enableAction:s,checkKeyInArr:p,getValueFromArr:i}){var u,k;const{css:l}=Q(),[f,A]=ce(V),b=K(L),a=X(De),y=c=>{const r=R(f,h=>{const{success:x}=h[o].conditions[t].actions,$=x.find(S=>S.type==="successMsg");$&&($.details.id=c)});A(r),b(h=>z(M({},h),{unsaved:!0}))};return e.jsxs("div",{className:l(H.mt2),children:[e.jsx(Ce,{onChange:c=>s(c.target.checked,"successMsg"),title:m("Success Message"),checked:p("successMsg"),className:l(H.flxc)}),p("successMsg")&&e.jsx("div",{className:l({mt:5,ml:28}),children:e.jsxs("select",{className:"btcd-paper-inp w-7",onChange:c=>y(c.target.value),value:i("successMsg","id"),children:[e.jsx("option",{value:"",children:m("Select Message")}),(k=(u=a==null?void 0:a.type)==null?void 0:u.successMsg)==null?void 0:k.map((c,r)=>e.jsx("option",{value:c.id?JSON.stringify({id:String(c.id)}):JSON.stringify({index:String(r)}),children:c.title},`sm-${r+2.3}`))]})})]})}function Wt({lgcGrpInd:o,condGrp:t,condGrpInd:s}){var a,y;const[p,i]=ce(V),l=K(L),f=X(De),{failure:A}=t.actions,b=u=>{const k=R(p,c=>{c[o].conditions[s].actions.failure=u});i(k),l(c=>z(M({},c),{unsaved:!0}))};return e.jsxs(he,{onChange:u=>b(u.target.value),value:A,label:"Error Message",className:"w-7 mt-3",children:[e.jsx("option",{value:"",children:m("Select Message")}),(y=(a=f==null?void 0:f.type)==null?void 0:a.successMsg)==null?void 0:y.map((u,k)=>e.jsx("option",{value:u.id?JSON.stringify({id:String(u.id)}):JSON.stringify({index:String(k)}),children:u.title},`vm-${k+2.7}`))]})}function ze({lgcGrp:o,lgcGrpInd:t,condGrp:s,condGrpInd:p}){const{css:i}=Q(),[l,f]=ce(V),A=K(L),{success:b}=s.actions,a=(c,r)=>{const h=R(l,x=>{const{success:$}=x[t].conditions[p].actions;if(c)r==="mailNotify"?$.push({type:r,details:{}}):r==="dblOptin"?$.push({type:r,details:{}}):$.push({type:r,details:{id:""}});else for(let S=0;S<$.length;S+=1)if($[S].type===r){$.splice(S,1);break}});f(h),A(x=>z(M({},x),{unsaved:!0}))},y=c=>b==null?void 0:b.some(r=>r.type===c),u=c=>{const r=R(l,h=>{const{actions:x}=h[t].conditions[p];x.avoid_delete=c});f(r),A(h=>z(M({},h),{unsaved:!0}))},k=(c,r)=>{const h=b.find(x=>x.type===c);return h!==void 0?h.details[r]:""};return e.jsxs(e.Fragment,{children:[o.action_type!=="onvalidate"&&o.action_run!=="delete"&&e.jsx($t,{lgcGrp:o,lgcGrpInd:t,condGrp:s,condGrpInd:p}),(o.action_type==="onsubmit"||o.action_run==="delete")&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:i(H.mt3,H.mb1),children:e.jsx("b",{className:"txt-dp",children:"Additional Actions"})}),e.jsxs("div",{className:s.cond_type==="always"?"ml-4":"",children:[o.action_run!=="delete"&&e.jsx(Bt,{lgcGrpInd:t,condGrpInd:p,enableAction:a,checkKeyInArr:y,getValueFromArr:k}),!o.action_run.match(/^(delete|edit)$/)&&e.jsx(St,{lgcGrpInd:t,condGrpInd:p,enableAction:a,checkKeyInArr:y,getValueFromArr:k}),o.action_run!=="delete"&&e.jsx(Ot,{lgcGrpInd:t,condGrpInd:p,enableAction:a,checkKeyInArr:y,getValueFromArr:k}),e.jsx(Te,{title:m("Email Notification"),lgcGrpInd:t,condGrpInd:p,actionKey:"mailNotify",enableAction:a,checkKeyInArr:y,getValueFromArr:k}),e.jsx(Te,{title:m("Double Opt-in"),lgcGrpInd:t,condGrpInd:p,actionKey:"dblOptin",enableAction:a,checkKeyInArr:y,getValueFromArr:k})]})]}),o.action_run==="delete"&&e.jsx(te,{className:i({mt:5,ml:s.cond_type==="always"?12:-8}),onChange:c=>u(c.target.checked),checked:l[t].avoid_delete,title:e.jsx("small",{className:"txt-dp",children:"Prevent Delete"})}),o.action_type==="onvalidate"&&o.action_run!=="delete"&&e.jsx(Wt,{lgcGrpInd:t,condGrp:s,condGrpInd:p})]})}const Dt={equal:{label:m("Equal"),notFields:["button"]},not_equal:{label:m("Not Equal"),notFields:["button","user"]},null:{label:m("Is Null"),notFields:["button","user"]},not_null:{label:m("Is Not Null"),notFields:["button","user"]},contain:{label:m("Contain"),notFields:["button","date","time","datetime-local","month","week","user"]},contain_all:{label:m("Contain All"),fields:["select"]},not_contain:{label:m("Not Contain"),notFields:["button","date","time","datetime-local","month","week","user"]},greater:{label:m("Greater Than"),fields:["number","date","time","datetime-local"]},less:{label:m("Less Than"),fields:["number","date","time","datetime-local"]},greater_or_equal:{label:m("Greater Than or Equal"),fields:["number","date","time","datetime-local"]},less_or_equal:{label:m("Less Than or Equal"),fields:["number","date","time","datetime-local"]},start_with:{label:m("Start With"),notFields:["button","color","url","password","email","date","time","datetime-local","month","week","user"]},end_with:{label:m("End With"),notFields:["button","color","url","password","email","date","time","datetime-local","month","week","user"]},between:{label:m("Between"),fields:["number","date","time","datetime-local"]},on_click:{label:m("On Click"),fields:["button.btnTyp:button","button.btnTyp:next-step","button.btnTyp:previuos-step"]}};function Oe({logic:o,fieldVal:t,delLogic:s,lgcInd:p,subLgcInd:i,subSubLgcInd:l,value:f,addInlineLogic:A,changeLogic:b,logicValue:a,changeValue:y,changeSmartKey:u,changeFormField:k,smartTagAllowed:c,formFields:r}){var N,F,v,W,d,D,U;const{css:h}=Q(),x=X(ve);let $=!1,S="",g="",n="";(N=r==null?void 0:r.find)==null||N.call(r,C=>{if(C.key===t)return C.type.match(/^(check|radio|select|html-select)$/)?S="text":S=C.type,g=C.type,n=C.key,!0});const j=[{label:m("Logged In"),value:"logged_in"},{label:m("Logged Out"),value:"logged_out"}],w=()=>{var J,I,se,G,le,T,ae,re;if(g==="razorpay")return;let C;if(g==="user"?C=j:C=(I=(J=x==null?void 0:x[n])==null?void 0:J.opt)==null?void 0:I.map(P=>({label:P.lbl,value:P.val||P.lbl})),g==="select"){const{optionsList:P}=(x==null?void 0:x[n])||{};return P.reduce((be,ie)=>{const _e=Object.keys(ie)[0],Xe=Object.values(ie)[0];return be.push({type:"group",title:_e,childs:Xe.map($e=>({label:$e.lbl,value:$e.val||$e.lbl}))}),be},[])}if(S==="decision-box"){const P=x==null?void 0:x[n];return[{label:(se=P==null?void 0:P.msg)==null?void 0:se.checked,value:(G=P==null?void 0:P.msg)==null?void 0:G.checked},{label:(le=P==null?void 0:P.msg)==null?void 0:le.unchecked,value:(T=P==null?void 0:P.msg)==null?void 0:T.unchecked}]}return C||(C=(re=(ae=x==null?void 0:x[n])==null?void 0:ae.options)==null?void 0:re.map(P=>({label:P.lbl,value:P.val||P.code||P.i||P.lbl}))),C},O=(C,J)=>J.find(I=>{if(I===C)return!0;if(!I.includes("."))return!1;const se=I.indexOf("."),G=I.substring(0,se);if(C!==G)return!1;const le=I.substring(se+1);if(!le)return!1;const[T,ae]=le.split(":"),re=T.split("."),P=r.find(ie=>ie.key===n)||{};return re.reduce((ie,_e)=>ie[_e],P)===ae}),B=C=>fe.find(J=>C===`\${${J.name}}`);S||(S=((F=B(t))==null?void 0:F.type)||""),$||($=((v=B(t))==null?void 0:v.singleSelect)||!1);const _=C=>{var se;const J=((se=B(t))==null?void 0:se.type)||C;return J?Object.entries(Dt).reduce((G,[le,T])=>T.notFields&&O(J,T.notFields)?G:T.fields?O(J,T.fields)?[...G,{key:le,lbl:T.label}]:G:[...G,{key:le,lbl:T.label}],[]):[]},E=C=>C==="${_bf_custom_date_format()}"?m("Date Format"):C==="${_bf_user_meta_key()}"?m("Meta Key"):C==="${_bf_query_param()}"?m("Query Param"):"Smart Key",Z=["null","not_null","on_click"];return e.jsxs("div",{className:`${h(Pe.lgcBlk)} btcd-logic-blk`,children:[e.jsxs("div",{className:h(Pe.processDgrm),children:[e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:e.jsxs(he,{label:"Form Fields",value:t,onChange:C=>k(C.target.value,p,i,l),children:[e.jsx("option",{value:"",children:m("Select Form Field")}),!!r.length&&e.jsx("optgroup",{label:"Form Fields",children:r.map(C=>!C.type.match(/^(file-up|recaptcha)$/)&&e.jsx("option",{value:C.key,children:C.name},`ff-lb-${C.key}`))}),c&&e.jsx("optgroup",{label:`General Smart Codes ${ke?"":"(PRO)"}`,children:(W=fe)==null?void 0:W.map(({name:C,label:J})=>e.jsx("option",{value:`\${${C}}`,disabled:!ke,children:J},`ff-rm-${C}`))})]})})}),((d=B(t))==null?void 0:d.functionParam)&&e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:e.jsxs(he,{label:"Field Parameter",onChange:C=>u(C.target.value,p,i,l),value:o.smartKey||"",children:[e.jsx("option",{value:"",children:m("Select Form Field")}),!!r.length&&e.jsx("optgroup",{label:"Form Fields",children:r.map(C=>!C.type.match(/^(file-up|recaptcha)$/)&&e.jsx("option",{value:C.key,children:C.name},`ff-lb-${C.key}`))})]})})}),((D=B(t))==null?void 0:D.custom)&&!((U=B(t))!=null&&U.functionParam)&&e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:e.jsx(we,{label:E(t),type:"text",onChange:C=>u(C.target.value,p,i,l),value:o.smartKey||""})})}),e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:e.jsxs(he,{label:"Logic",value:a,onChange:C=>b(C.target.value,p,i,l),children:[e.jsx("option",{value:"",children:m("Select One")}),_(S).map(({key:C,lbl:J})=>e.jsx("option",{value:C,children:J},C))]})})}),a!=="between"&&a!=="not between"&&!Z.includes(a)&&e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:S.match(/user|select|check|radio/g)?e.jsx(Fe,{className:"msl-wrp-options btcd-paper-drpdwn",defaultValue:f||"",onChange:C=>y(C,p,i,l),options:w(),fldType:S,singleSelect:$}):e.jsx(Ke,{label:"Value",type:S.match(/select|check|radio|number/g)?"text":S,disabled:a==="null"||a==="not_null",onChange:C=>y(C,p,i,l),value:f||"",options:w(),formFields:r})})}),(a==="between"||a==="not between")&&e.jsx("div",{className:"block-wrapper",children:e.jsxs("div",{className:"block-group",children:[e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:g.match(/select|check|radio/g)?e.jsx(Fe,{className:"msl-wrp-options btcd-paper-drpdwn",defaultValue:f.min||"",onChange:C=>y(C,p,i,l,"min"),options:w(),customValue:!0,fldType:g}):e.jsx(we,{label:"Min Value",type:S,disabled:a==="null"||a==="not_null",onChange:C=>y(C.target.value,p,i,l,"min"),value:f.min||""})})}),e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:g.match(/select|check|radio/g)?e.jsx(Fe,{className:"msl-wrp-options btcd-paper-drpdwn",defaultValue:f.max||"",onChange:C=>y(C,p,i,l,"max"),options:w(),customValue:!0,fldType:g}):e.jsx(we,{label:"Max Value",type:S,disabled:a==="null"||a==="not_null",onChange:C=>y(C.target.value,p,i,l,"max"),value:f.max||""})})})]})})]}),e.jsxs("div",{className:"btcd-li-side-btn",children:[e.jsx(Y,{onClick:()=>s(p,i,l),icn:!0,className:"ml-2 white mr-2 sh-sm",children:e.jsx(Ae,{size:"16"})}),e.jsxs(Y,{onClick:()=>A("and",p,i,l),className:"white mr-2 sh-sm",children:[e.jsx(q,{size:"10",className:"icn-rotate-45 mr-1"}),"AND"]}),e.jsxs(Y,{onClick:()=>A("or",p,i,l),className:"white sh-sm",children:[e.jsx(q,{size:"10",className:"icn-rotate-45 mr-1"}),"OR"]})]})]})}const Pe={lgcBlk:{pn:"relative",dy:"flex",cg:15,rg:15,my:5,":hover":{bc:"#F0F0F0"}},lgcGrp:{b:"0.5px solid #D5D5D5",brs:8,p:10,ml:20},blkItm:{w:"100%"},processDgrm:{"--linethick":"1px","--linewidth":"1.5em","--line-color":"#b9c5ff",flx:"align-center",w:"100%",m:0,p:0,ls:"none",ta:"center","& > .block-wrapper":{flex:"1 1 auto"},"& .block-wrapper>.block-content":{cr:"#666",brs:10},"& .block-wrapper::before, & .block-wrapper::after, & .block-group::before, & .block-group::after, & .block-content::before, & .block-content::after":{bse:"solid",bcr:"var(--line-color)"},"& .block-wrapper .block-group .block-wrapper:first-child .block-content::before, &  .block-wrapper .block-group .block-wrapper:first-child::before":{btlr:10},"&  .block-wrapper .block-group .block-wrapper:first-child .block-content::after, & .block-wrapper .block-group .block-wrapper:first-child::after":{btrr:10},"&  .block-wrapper .block-group .block-wrapper:last-child .block-content::before, &  .block-wrapper .block-group .block-wrapper:last-child::before":{bblr:10},"&  .block-wrapper .block-group .block-wrapper:last-child .block-content::after, &  .block-wrapper .block-group .block-wrapper:last-child::after":{bbrr:10},"& ol, & .block-group, & .block-wrapper":{ls:"none",ta:"center"},"& .block-wrapper":{pn:"relative",mb:0,w:"100%"},"& > .block-wrapper, & ol > .block-wrapper, & .block-group > .block-wrapper":{p:"4px 0"},"&  .block-group":{pn:"relative",pl:"var(--linewidth)"},"& .block-group::before, &  .block-group::after":{pn:"absolute",ct:'""',tp:"50%",w:"var(--linewidth)",dy:"block",bwh:"var(--linethick) 0 0"},"& .block-group::before":{lt:0},"&  .block-group::after":{rt:0},"&  .block-group>.block-wrapper::after, &  .block-group>.block-wrapper::before":{pn:"absolute",ct:'""',tp:0,bm:0,w:"var(--linewidth)",h:"100%",dy:"block"},"&  .block-group>.block-wrapper::before":{lt:0,bwh:"0 0 0 var(--linethick)"},"&  .block-group>.block-wrapper::after":{rt:0,bwh:"0 var(--linethick) 0 0"},"&  .block-group>.block-wrapper:first-child::before, &  .block-group>.block-wrapper:first-child::after":{tp:"50%",bm:"auto",h:"50%"},"&  .block-group>.block-wrapper:last-child::before, &  .block-group>.block-wrapper:last-child::after":{tp:0,bm:"auto",h:"50%"},"&  .block-group>.block-wrapper:first-child:last-child::before, &  .block-group>.block-wrapper:first-child:last-child::after":{tp:0,bm:"auto",h:"50%"},"&  .block-wrapper>.block-content":{pn:"relative",ml:"var(--linewidth)"},"& >.block-wrapper:first-child>.block-content":{ml:0},"&  .block-wrapper:not(:last-child) .block-wrapper>.block-content":{mr:"var(--linewidth)"},"&  .block-wrapper>.block-content::before, &  .block-wrapper>.block-content::after":{ct:'""',tp:"50%",w:"var(--linewidth)",pn:"absolute",bwh:"var(--linethick) 0 0",h:"50%"},"&  .block-wrapper>.block-content::after":{rt:"calc(0em - var(--linewidth) + 2px)",mr:"calc(0px - var(--linethick))"},"&  .block-wrapper>.block-content::before":{lt:"calc(0em - var(--linewidth) + 2px)",ml:"calc(0px - var(--linethick))"},"&  .block-wrapper:last-child>.block-content::after, & .block-wrapper:last-child>.block-content::before":{tp:0,bwh:"0 0 var(--linethick)"},"& >.block-wrapper:first-child>.block-content::before, & >.block-wrapper:first-child>.block-group::before, & >.block-wrapper:first-child>.block-group>.block-wrapper::before, & >.block-wrapper:first-child>.block-group>.block-wrapper>.block-content:first-child::before, & >.block-wrapper:first-child>.block-group>.block-wrapper>ol>.block-wrapper:first-child>.block-content::before, & >.block-wrapper:last-child>.block-content::after, & >.block-wrapper:last-child>.block-group::after":{b:0},"& >.block-wrapper>.block-content::after,  &  ol>.block-wrapper>.block-content::after, & >.block-wrapper>.block-group::after,  &  ol>.block-wrapper>.block-group::after":{dy:"none"},"& >.block-wrapper>.block-content, &  ol>.block-wrapper>.block-content":{mr:0},"& >.block-wrapper>.block-group,  &  ol>.block-wrapper>.block-group":{pr:0},"& >.block-wrapper:last-child>.block-content::after,  &  ol>.block-wrapper:last-child>.block-content::after,  & >.block-wrapper:last-child>.block-group::after,  &  ol>.block-wrapper:last-child>.block-group::after":{dy:"block"},"& >.block-wrapper:last-child>.block-content, & ol>.block-wrapper:last-child>.block-content":{mr:0},"&  .block-wrapper:last-child>.block-group::after,  &  .block-wrapper:last-child>.block-group>.block-wrapper::after,  &  .block-wrapper:last-child>.block-group>.block-wrapper>.block-content::after":{dy:"none"}}};function Se({logic:o,nested:t,onChange:s,className:p=null}){return e.jsx("div",{children:e.jsxs("select",{value:o,onChange:s,className:`btcd-logic-chip ${p} ${t&&"scl-8"}`,children:[e.jsx("option",{value:"or",children:m("OR")}),e.jsx("option",{value:"and",children:m("AND")})]})})}function Et({lgcGrp:o,lgcGrpInd:t,condGrp:s,condGrpInd:p}){var g;const{css:i}=Q(),[l,f]=ce(V),A=K(L),b=X(ve),a=(n,j,w)=>{const O=R(l,B=>{const _=B[t].conditions[p].logics;if(_.length>1)if(w!==void 0)if(_[n][j].length===w+1)if(_[n][j].length===3){const E=_[n][j][w-2];_[n].splice(j,1),_[n].push(E)}else _[n][j].splice(w-1,2);else if(_[n][j].length===3){const E=_[n][j][w+2];_[n].splice(j,1),_[n].push(E)}else _[n][j].splice(w,2);else if(j!==void 0)if(_[n].length===j+1)if(_[n].length===3){const E=_[n][j-2];_.splice(n,1),_.splice(n,0,E)}else _[n].splice(j-1,2);else if(_[n].length===3){const E=_[n][j+2];_.splice(n,1),_.splice(n,0,E)}else _[n].splice(j,2);else n!==0?_.splice(n-1,2):_.splice(n,2)});f(O),A(B=>z(M({},B),{unsaved:!0}))},y=(n,j,w,O)=>{const B=R(l,_=>{const E=_[t].conditions[p].logics;O!==void 0?(n==="null"&&(E[j][w][O].val=""),E[j][w][O].logic=n):w!==void 0?(n==="null"&&(E[j][w].val=""),E[j][w].logic=n):(n==="null"&&(E[j].val=""),E[j].logic=n)});f(B),A(_=>z(M({},_),{unsaved:!0}))},u=(n,j,w,O)=>{const B=R(l,_=>{const E=_[t].conditions[p].logics;O!==void 0?E[j][w][O]=n:w!==void 0?E[j][w]=n:E[j]=n});f(B),A(_=>z(M({},_),{unsaved:!0}))},k=(n,j,w,O)=>O!==void 0?n[j][w][O]:w!==void 0?n[j][w]:n[j],c=(n,j,w,O,B="")=>{const _=R(l,E=>{const Z=E[t].conditions[p].logics,N=k(Z,j,w,O);B?(typeof N.val=="string"&&(N.val={}),N.val[B]=n):N.val=n});f(_),A(E=>z(M({},E),{unsaved:!0}))},r=(n,j,w,O)=>{const B=fe.find(E=>E.name===n),_=R(l,E=>{const Z=E[t].conditions[p].logics,N=k(Z,j,w,O);N.field=n,N.val="",B!=null&&B.custom||delete N.smartKey});f(_),A(E=>z(M({},E),{unsaved:!0}))},h=(n,j,w,O)=>{const B=R(l,_=>{const E=_[t].conditions[p].logics;O!==void 0?E[j][w].splice(O+1,0,n,{field:"",logic:"",val:""}):w!==void 0?E[j].splice(w+1,0,n,{field:"",logic:"",val:""}):E.splice(j+1,0,n,{field:"",logic:"",val:""})});f(B),A(_=>z(M({},_),{unsaved:!0}))},x=(n,j,w,O)=>{const B=R(l,_=>{const E=_[t].conditions[p].logics,Z=k(E,j,w,O);Z.smartKey=n});f(B),A(_=>z(M({},_),{unsaved:!0}))},$=(n,j)=>{if(o.action_type!=="oninput")return!0;const w=n.findIndex(O=>O.field&&O.field in b);return w>=0&&w!==j},S=(n,j,w=0)=>{const O=[n],B={field:"",logic:"",val:""};w?O.push([B,n,B]):O.push(B),f(_=>R(_,E=>{const{logics:Z}=_[t].conditions[p],N=[...Z[j],...O];E[t].conditions[p].logics[j]=N}))};return(g=s==null?void 0:s.logics)==null?void 0:g.map((n,j)=>e.jsxs("span",{children:[typeof n=="object"&&!Array.isArray(n)&&e.jsx(Oe,{logic:n,fieldVal:n.field,changeFormField:r,changeValue:c,changeSmartKey:x,logicValue:n.logic,changeLogic:y,addInlineLogic:h,delLogic:a,lgcGrpInd:t,lgcInd:j,value:n.val,actionType:o==null?void 0:o.action_type,smartTagAllowed:$(s.logics,j),formFields:ye(s)}),typeof n=="string"&&e.jsx(Se,{logic:n,onChange:w=>u(w.target.value,j)}),Array.isArray(n)&&e.jsxs("div",{className:"p-2 br-10 btcd-logic-grp mt-2 mb-2 pl-4 pr-4",children:[n.map((w,O)=>e.jsxs("span",{children:[typeof w=="object"&&!Array.isArray(w)&&e.jsx(Oe,{logic:w,fieldVal:w.field,changeFormField:r,changeValue:c,changeSmartKey:x,logicValue:w.logic,changeLogic:y,addInlineLogic:h,delLogic:a,lgcGrpInd:t,lgcInd:j,subLgcInd:O,value:w.val,actionType:o==null?void 0:o.action_type,smartTagAllowed:$(n,O),formFields:ye(s)}),typeof w=="string"&&e.jsx(Se,{logic:w,nested:!0,onChange:B=>u(B.target.value,j,O)}),Array.isArray(w)&&e.jsxs("div",{className:"p-2 br-10 btcd-logic-grp mt-2 mb-2 pl-4 pr-4",children:[w.map((B,_)=>e.jsxs("span",{children:[typeof B=="object"&&!Array.isArray(B)&&e.jsx(Oe,{logic:B,fieldVal:B.field,changeFormField:r,changeValue:c,changeSmartKey:x,logicValue:B.logic,changeLogic:y,addInlineLogic:h,delLogic:a,lgcGrpInd:t,lgcInd:j,subLgcInd:O,subSubLgcInd:_,value:B.val,actionType:o==null?void 0:o.action_type,smartTagAllowed:$(w,_),formFields:ye(s)}),typeof B=="string"&&e.jsx(Se,{logic:B,nested:!0,onChange:E=>u(E.target.value,j,O,_)})]},`subsubLogic-${_+90}`)),e.jsxs(ge,{place:"bottom",children:[e.jsx(pe,{msg:"Add Logic",children:e.jsx(Y,{icn:!0,className:"blue sh-sm",children:e.jsx(q,{size:"14",className:"icn-rotate-45"})})}),e.jsxs("div",{children:[e.jsxs("button",{type:"button",className:i(ue.addItemBtn),onClick:()=>h("and",j,O,w.length),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add AND"]}),e.jsxs("button",{type:"button",className:i(ue.addItemBtn),onClick:()=>h("or",j,O,w.length),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add OR"]})]})]})]})]},`subLogic-${O*7}`)),e.jsxs(ge,{place:"bottom",children:[e.jsx(pe,{msg:"Add Logic",children:e.jsx(Y,{icn:!0,className:"blue sh-sm",children:e.jsx(q,{size:"14",className:"icn-rotate-45"})})}),e.jsxs("div",{children:[e.jsxs("button",{type:"button",className:i(ue.addItemBtn),onClick:()=>S("and",j),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add AND"]}),e.jsxs("button",{type:"button",className:i(ue.addItemBtn),onClick:()=>S("or",j),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add OR"]}),e.jsxs("button",{type:"button",className:i(ue.addItemBtn),onClick:()=>S("and",j,1),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add AND Group"]}),e.jsxs("button",{type:"button",className:i(ue.addItemBtn),onClick:()=>S("or",j,1),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add OR Group"]})]})]})]})]},`logic-${j+44}`))}const ue={addItemBtn:{dy:"block",w:"100%",b:0,oe:0,brs:8,ta:"left",cr:"#444",fs:12,fw:500,p:5,pr:20,bd:"none",curp:1,":hover":{bc:"#EFEFEF"}}};function Mt({lgcGrpInd:o,lgcGrp:t}){var b;const{css:s}=Q(),p=K(V),i=K(L),l=a=>a.replace(/-/g," ").split(" ").map(y=>it(y)).join(" "),f=a=>{Be(),p(y=>R(y,u=>{const{conditions:k}=u[o],c=z(M({},je),{cond_type:a});a==="else"&&delete c.logics,a==="else-if"&&k[k.length-1].cond_type==="else"?k.splice(k.length-1,0,c):k.push(c)})),i(y=>z(M({},y),{unsaved:!0}))},A=(a,y,u="",k=0)=>{Be();const c=[a],r={field:"",logic:"",val:""};k?c.push([r,a,r]):c.push(r),p(h=>R(h,x=>{let $=x[o].conditions[y].logics;$=gt($,u),$.push(...c)})),i(h=>z(M({},h),{unsaved:!0}))};return e.jsxs("div",{className:s(oe.container),children:[e.jsxs("div",{className:s(oe.section),children:[t.action_behaviour==="cond"&&e.jsxs("div",{className:s(oe.sideBdr),children:[e.jsx("div",{className:s(oe.sideBdrLn)}),e.jsx("div",{className:s(oe.sideBdrCrl)})]}),(b=t==null?void 0:t.conditions)==null?void 0:b.map((a,y)=>e.jsxs(de.Fragment,{children:[t.action_behaviour==="cond"&&a.cond_type!=="else"&&e.jsxs(Re,{title:l(a.cond_type),accordionActions:a.cond_type!=="if"&&e.jsx(Ue,{lgcGrpInd:o,condGrpInd:y}),children:[e.jsx(Et,{lgcGrp:t,lgcGrpInd:o,condGrp:a,condGrpInd:y}),e.jsx("div",{className:"mt-1",children:e.jsxs(ge,{place:"bottom",children:[e.jsx(pe,{msg:"Add Logic",children:e.jsx(Y,{icn:!0,className:"blue sh-sm",children:e.jsx(q,{size:"14",className:"icn-rotate-45"})})}),e.jsxs("div",{children:[e.jsxs("button",{type:"button",className:s(oe.addItemBtn),onClick:()=>A("and",y),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add AND"]}),e.jsxs("button",{type:"button",className:s(oe.addItemBtn),onClick:()=>A("or",y),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add OR"]}),e.jsxs("button",{type:"button",className:s(oe.addItemBtn),onClick:()=>A("and",y,"",1),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add AND Group"]}),e.jsxs("button",{type:"button",className:s(oe.addItemBtn),onClick:()=>A("or",y,"",1),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add OR Group"]})]})]})})]},a.cond_type+0),t.action_behaviour==="cond"&&e.jsx(Re,{title:a.cond_type==="else"?"Else":"Then",titleOutline:a.cond_type!=="else",accordionActions:a.cond_type==="else"&&e.jsx(Ue,{lgcGrpInd:o,condGrpInd:y,add:!1,clone:!1}),children:e.jsx(ze,{lgcGrp:t,lgcGrpInd:o,condGrp:a,condGrpInd:y})},a.cond_type+1),t.action_behaviour!=="cond"&&e.jsx(ze,{lgcGrp:t,lgcGrpInd:o,condGrp:a,condGrpInd:y})]},`wkf-${y+99}`))]}),t.action_behaviour==="cond"&&e.jsxs(ge,{place:"bottom",children:[e.jsx(pe,{msg:"Add Condition",children:e.jsx(Y,{icn:!0,className:"blue sh-sm ml-2",children:e.jsx(q,{size:"14",className:"icn-rotate-45"})})}),e.jsxs("div",{children:[e.jsxs("button",{type:"button",className:s(oe.addItemBtn),onClick:()=>f("else-if"),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add Else If"]}),t.conditions[t.conditions.length-1].cond_type!=="else"&&e.jsxs("button",{type:"button",className:s(oe.addItemBtn),onClick:()=>f("else"),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add Else"]})]})]})]})}const Ue=({lgcGrpInd:o,condGrpInd:t,add:s,clone:p,remove:i})=>{const[l,f]=de.useState({show:!1}),A=K(V),b=K(L),a=()=>{f({show:!1})},y=()=>{f({show:!1}),A(h=>R(h,x=>{x[o].conditions.splice(t,1)})),b(h=>z(M({},h),{unsaved:!0}))},u=()=>{f({btnTxt:"Delete",body:"Are you sure to delete this logic?",btnClass:"",action:()=>{y(),a()},show:!0})},k=()=>{A(h=>R(h,x=>{x[o].conditions.splice(t+1,0,ct(x[o].conditions[t]))})),b(h=>z(M({},h),{unsaved:!0}))},c=()=>{A(h=>R(h,x=>{x[o].conditions.splice(t+1,0,z(M({},je),{cond_type:"else-if"}))})),b(h=>z(M({},h),{unsaved:!0}))},r=h=>typeof h=="boolean"?h:!0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[r(s)&&e.jsx(pe,{msg:"Add Else If",children:e.jsx(Y,{onClick:c,icn:!0,className:"white ml-2 sh-sm",children:e.jsx(vt,{size:"16"})})}),r(p)&&e.jsx(pe,{msg:"Clone",children:e.jsx(Y,{onClick:k,icn:!0,className:"white ml-2 sh-sm",children:e.jsx(nt,{size:"16"})})}),r(i)&&e.jsx(pe,{msg:"Delete",children:e.jsx(Y,{onClick:u,icn:!0,className:"white ml-2 sh-sm",children:e.jsx(Ae,{size:"16"})})})]}),e.jsx(He,{show:l.show,close:a,btnTxt:l.btnTxt,btnClass:l.btnClass,body:l.body,action:l.action})]})},oe={container:{mt:10},section:{pn:"relative",w:"100%",zx:1,mb:10,pb:10},sideBdr:{flx:"center",fd:"column",w:50,pn:"absolute",h:"100%",zx:-1},sideBdrLn:{w:2,bc:"var(--b-50)",h:"100%"},sideBdrCrl:{brs:"50%",bc:"var(--b-50)",h:8,w:8,mt:-1},addItemBtn:{dy:"block",w:"100%",b:0,oe:0,brs:8,ta:"left",cr:"#444",fs:12,fw:500,p:5,pr:20,bd:"none",curp:1,":hover":{bc:"#EFEFEF"}}};function Rt({lgcGrpInd:o,lgcGrp:t}){var b;const[s,p]=ce(V),i=K(L),l=a=>{const y=R(s,u=>{a==="delete"?delete u[o].action_type:u[o].action_type===void 0&&(u[o].action_type="onload"),u[o].action_run=a});p(y),i(u=>z(M({},u),{unsaved:!0}))},f=a=>{const y=R(s,u=>{a==="onsubmit"&&u[o].conditions.forEach(c=>{var h,x;const r=(x=(h=c.actions)==null?void 0:h.fields)==null?void 0:x.length;for(let $=0;$<r;$+=1)c.actions.fields[$].action="value"}),u[o].action_behaviour="cond",u[o].conditions.forEach(c=>{a==="onvalidate"?(c.actions.failure="",delete c.actions.fields,delete c.actions.success):(c.actions.fields=[{field:"",action:"value"}],c.actions.success=[],delete c.actions.failure)});const[k]=u[o].conditions;k.cond_type="if",k.logics||(k.logics=je.logics),u[o].action_type=a});p(y),i(u=>z(M({},u),{unsaved:!0}))},A=a=>{const y=R(s,u=>{u[o].action_behaviour=a;const[k]=u[o].conditions;k.cond_type=a==="cond"?"if":a,a==="always"?delete k.logics:a==="cond"&&(k.logics=je.logics),u[o].conditions=[k]});p(y),i(u=>z(M({},u),{unsaved:!0}))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("b",{className:"txt-dp",children:e.jsx("small",{children:"Action Run When:"})}),e.jsx("br",{}),e.jsxs("div",{className:"ml-2",children:[e.jsx(te,{radio:!0,onChange:a=>l(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("Record Create/Edit")}),checked:t.action_run==="create_edit",value:"create_edit"}),e.jsx(te,{radio:!0,onChange:a=>l(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("Record Create")}),checked:t.action_run==="create",value:"create"}),e.jsx(te,{radio:!0,onChange:a=>l(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("Record Edit")}),checked:t.action_run==="edit",value:"edit"}),e.jsx(te,{radio:!0,onChange:a=>l(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("Record Delete")}),checked:t.action_run==="delete",value:"delete"})]})]}),t.action_run!=="delete"&&e.jsxs("div",{children:[e.jsx("b",{className:"txt-dp",children:e.jsx("small",{children:"Action Effect:"})}),e.jsx("br",{}),e.jsxs("div",{className:"ml-2",children:[e.jsx(te,{radio:!0,onChange:a=>f(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("Always")}),checked:t.action_type==="always",value:"always"}),e.jsx(te,{radio:!0,onChange:a=>f(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("Only on Form Load")}),checked:t.action_type==="onload",value:"onload"}),e.jsx(te,{radio:!0,onChange:a=>f(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("Only on Field Input")}),checked:t.action_type==="oninput",value:"oninput"}),e.jsx(te,{radio:!0,onChange:a=>f(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("Only on Form Validate")}),checked:t.action_type==="onvalidate",value:"onvalidate"}),e.jsx(te,{radio:!0,onChange:a=>f(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("Only on Form Submit")}),checked:t.action_type==="onsubmit",value:"onsubmit"})]})]}),e.jsxs("div",{children:[e.jsx("b",{className:"txt-dp",children:e.jsx("small",{children:"Action Behaviour:"})}),e.jsx("br",{}),e.jsxs("div",{className:"ml-2",children:[!((b=t==null?void 0:t.action_type)!=null&&b.match(/^(onvalidate|oninput)$/))&&e.jsx(te,{radio:!0,onChange:a=>A(a.target.value),name:`ab-${o+121}`,title:e.jsx("small",{className:"txt-dp",children:m("Always")}),checked:t.action_behaviour==="always",value:"always"}),e.jsx(te,{radio:!0,onChange:a=>A(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("Condition")}),checked:t.action_behaviour==="cond",value:"cond"})]})]})]})}function os(){const o=X(rt),[t,s]=de.useState({show:!1}),[p,i]=ce(V),l=K(L),{css:f}=Q(),A=X(qe),{isPro:b}=A,a=x=>{switch(x){case"onload":return m("On Load");case"oninput":return m("On Field Input");case"onvalidate":return m("On Form Validate");case"onsubmit":return m("On Form Submit");case"create_edit":return m("Record Create/Edit");case"create":return m("Record Create");case"edit":return m("Record Edit");case"delete":return m("Record Delete");case"always":return m("Always");case"cond":return m("With Condition")}},y=()=>{const x=R(p,$=>{$.unshift({title:`Action ${p.length+1}`,action_type:"always",action_run:"create_edit",action_behaviour:"cond",conditions:[M({},je)]})});i(x),l($=>z(M({},$),{unsaved:!0}))},u=x=>{if(p[x].id){const $=dt({formID:o,id:p[x].id},"bitforms_delete_workflow").then(S=>{if(S!==void 0&&S.success){const g=R(p,n=>{n.splice(x,1)});i(g)}});pt.promise($,{success:"Successfully Deleted.",loading:"Deleting...",error:"Error occurred, Try again."})}else{const $=R(p,S=>{S.splice(x,1)});i($)}},k=(x,$)=>{const S=R(p,g=>{g[$].title=x.target.value});i(S),l(g=>z(M({},g),{unsaved:!0}))},c=()=>{t.show=!1,s(M({},t))},r=x=>{t.btnTxt="Delete",t.body="Are you sure to delete this conditional logic?",t.btnClass="",t.action=()=>{u(x),c()},t.show=!0,s(M({},t))},h=({oldIndex:x,newIndex:$})=>{x!==$&&(i(S=>ft(S,x,$)),l(S=>z(M({},S),{unsaved:!0})))};return e.jsxs("div",{className:"btcd-workflow",style:{width:"93%"},children:[e.jsx(He,{show:t.show,close:c,btnTxt:t.btnTxt,btnClass:t.btnClass,body:t.body,action:t.action}),e.jsx("h2",{children:m("Conditional Logics")}),(!b&&!p.length||b)&&e.jsxs(Y,{className:"blue",onClick:y,children:[e.jsx(q,{size:"10",className:"icn-rotate-45 mr-1"}),m("Add Conditional Logic")]}),p.length===0&&e.jsxs("div",{className:f(H.btcdEmpty,H.txCenter),children:[e.jsx(bt,{size:"50"}),m("Empty")]}),e.jsx(mt,{onSortEnd:h,useDragHandle:!0,children:p.map((x,$)=>e.jsxs(ut,{index:$,children:[e.jsxs("div",{className:"workflow-grp d-flx mt-2",children:[e.jsxs(kt,{customTitle:e.jsx(ht,{className:"workflow-drg-handle mr-1 flx"}),title:x.title,header:e.jsxs("small",{className:"f-right txt-dp mr-4",children:[e.jsxs("span",{className:"mr-2",children:[e.jsx("i",{className:"btcd-chat-dot mr-1"}),a(x.action_run)]}),x.action_type!==void 0&&e.jsxs("span",{className:"mr-2",children:[e.jsx("i",{className:"btcd-chat-dot mr-1"}),a(x.action_type)]}),e.jsxs("span",{children:[e.jsx("i",{className:"btcd-chat-dot mr-1"}),a(x.action_behaviour)]})]}),titleEditable:!0,onTitleChange:S=>k(S,$),notScroll:!0,cls:b?"w-9":"w-10",children:[e.jsx(Rt,{lgcGrpInd:$,lgcGrp:x}),e.jsx(Mt,{lgcGrpInd:$,lgcGrp:x})]}),b&&e.jsx("div",{className:"mt-2",children:e.jsx(Y,{onClick:()=>r($),icn:!0,className:"ml-2 sh-sm btcd-menu-btn tooltip",style:{"--tooltip-txt":'"Delete Action"'},children:e.jsx(Ae,{size:"16"})})})]}),!b&&e.jsxs("div",{className:"txt-center bg-pro p-5 mt-2",children:[m("For")," ",e.jsx("span",{className:"txt-pro",children:m("UNLIMITED")})," ",m("Conditional Logics"),", ",e.jsx("a",{href:"https://www.bitapps.pro/bit-form",target:"_blank",rel:"noreferrer",children:e.jsx("b",{className:"txt-pro",children:m("Buy Premium")})})]})]},`workflows-grp-${$+13}`))}),p.length>1&&e.jsxs("div",{className:f(H.w9,{fs:13},H.mt4),children:[e.jsx("strong",{children:"Note: "}),"Conditional Logics are triggered based on the order of the logic groups. The higher the logic group, the higher the priority. If you want to change the priority, you can sort by drag and drop the logic group."]})]})}export{os as default};
