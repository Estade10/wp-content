var zb=Object.defineProperty,Wb=Object.defineProperties;var Hb=Object.getOwnPropertyDescriptors;var Lc=Object.getOwnPropertySymbols;var Nf=Object.prototype.hasOwnProperty,Pf=Object.prototype.propertyIsEnumerable;var Df=Math.pow,$f=(t,e,s)=>e in t?zb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,_=(t,e)=>{for(var s in e||(e={}))Nf.call(e,s)&&$f(t,s,e[s]);if(Lc)for(var s of Lc(e))Pf.call(e,s)&&$f(t,s,e[s]);return t},A=(t,e)=>Wb(t,Hb(e));var Ff=(t,e)=>{var s={};for(var i in t)Nf.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(t!=null&&Lc)for(var i of Lc(t))e.indexOf(i)<0&&Pf.call(t,i)&&(s[i]=t[i]);return s};var Mu=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var r=(t,e,s)=>(Mu(t,e,"read from private field"),s?s.call(t):e.get(t)),m=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},T=(t,e,s,i)=>(Mu(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s);var l=(t,e,s)=>(Mu(t,e,"access private method"),s);var Ac=(t,e,s)=>new Promise((i,n)=>{var a=c=>{try{h(s.next(c))}catch(d){n(d)}},o=c=>{try{h(s.throw(c))}catch(d){n(d)}},h=c=>c.done?i(c.value):Promise.resolve(c.value).then(a,o);h((s=s.apply(t,e)).next())});import{o as _u,u as et,dj as qb,ar as cn,r as j,j as p,ck as S,cl as M,bj as ms,e as rn,a2 as oe,ax as yt,dk as Yb,h as kr,au as Ot,$ as Cc,dl as gt,F as fo,by as mo,P as an,ai as wu,l as Re,y as aa,s as nf,bA as rf,_ as gn,bE as af,db as vu,dm as of,f as Xb,aG as jm,bC as Um,am as Vm,bi as zm,cA as Wm,a6 as lf,bM as Hm,c8 as qm,p as Ym,t as Xm,ct as Zm,dn as Wc,dp as Qm,bu as mh,U as Ho,I as Jm,bh as Km,cn as Zb,bB as tg,L as Qb,at as eg,dq as sg,E as Jb,O as Kb,aE as tI}from"./main-281.js";import{v as gh,s as ju,a as ig,w as ng,x as rg,B as eI}from"./bf-869-79.js";import{C as sI}from"./bf-900-104.js";import{R as ag,F as Eh,M as iI,a as nI}from"./bf-404-101.js";import{R as _t}from"./bf-757-139.js";/* empty css          */import"./bf-751-65.js";import"./bf-646-73.js";import"./bf-23-74.js";import"./bf-811-102.js";import"./bf-675-103.js";import"./bf-231-105.js";import"./bf-406-106.js";import"./bf-112-111.js";import"./bf-724-110.js";import"./bf-521-107.js";import"./bf-890-67.js";import"./bf-557-138.js";var ws,Us,pa,as,He,$i,Xo,Zo,Qo,Jo,ur,En,qe,Oh,og,yh,lg,Lh,cg,Ah,hg,Ni,Kn,Mh,dg,bn,zr,Ko,Uu,In,Wr,fa,Hc;class rI{constructor(e,s){m(this,Oh);m(this,yh);m(this,Lh);m(this,Ah);m(this,Ni);m(this,Mh);m(this,bn);m(this,Ko);m(this,In);m(this,fa);m(this,ws,null);m(this,Us,null);m(this,pa,null);m(this,as,null);m(this,He,{});m(this,$i,null);m(this,Xo,null);m(this,Zo,null);m(this,Qo,null);m(this,Jo,null);m(this,ur,null);m(this,En,[]);m(this,qe,{document:{},formID:null,configSetting:{},ajaxURL:null,nonce:null,uploadFileToServer:null});Object.assign(r(this,qe),s),T(this,$i,s.fieldKey),T(this,as,s.window?s.window:window),T(this,pa,s.document?s.document:document),typeof e=="string"?T(this,ws,r(this,pa).querySelector(e)):T(this,ws,e),T(this,Xo,r(this,qe).formID),T(this,He,r(this,qe).configSetting),T(this,Zo,r(this,qe).ajaxURL),T(this,Qo,r(this,qe).nonce),T(this,Jo,r(this,qe).uploadFileToServer),this.uploaded_files=[],this.on_select_upload=!1,this.init()}init(){this.files=[];const e=[];r(this,He).allowFileSizeValidation&&e.push(r(this,as).bit_filepond_plugin_file_validate_size),r(this,He).allowFileTypeValidation&&e.push(r(this,as).bit_filepond_plugin_file_validate_type),r(this,He).allowImageCrop&&e.push(r(this,as).bit_filepond_plugin_image_crop),r(this,He).allowImagePreview&&e.push(r(this,as).bit_filepond_plugin_image_preview),r(this,He).allowImageResize&&e.push(r(this,as).bit_filepond_plugin_image_resize),r(this,He).allowImageTransform&&e.push(r(this,as).bit_filepond_plugin_image_transform),r(this,He).allowImageValidateSize&&e.push(r(this,as).bit_filepond_plugin_image_validate_size),r(this,He).allowPreview&&e.push(r(this,as).bit_filepond_plugin_media_preview);const{create:s,registerPlugin:i}=r(this,as).bit_filepond;if(i(...e),T(this,Us,s(r(this,He))),r(this,ws).appendChild(r(this,Us).element),setTimeout(()=>{r(this,ws)&&r(this,ws).parentNode.parentNode.querySelector(`.${r(this,$i)}-lbl`).setAttribute("for",l(this,fa,Hc).call(this,'input[name="filepond"]').id)},1e3),r(this,qe).onFileUpdate&&r(this,Us).on("updatefiles",r(this,qe).onFileUpdate),r(this,Jo)){const n=new URL(r(this,Zo));this.on_select_upload=r(this,He).instantUpload,n.searchParams.append("_ajax_nonce",r(this,Qo));let a=null;r(this,Us).setOptions({server:{process:(o,h,c,d,u,f,E)=>{const g=new FormData;n.searchParams.has("action")&&n.searchParams.delete("action"),n.searchParams.append("action","bitforms_file_upload"),g.append(r(this,$i),h,h.name),g.append("fieldKey",r(this,$i)),g.append("formID",r(this,Xo));const b=new XMLHttpRequest;return b.open("POST",n.href),b.upload.onprogress=I=>{f(I.lengthComputable,I.loaded,I.total)},b.onload=()=>{var I,v;a=JSON.parse(b.responseText),b.status>=200&&b.status<300?(this.uploaded_files.push((I=a==null?void 0:a.data)==null?void 0:I.file_name),d((v=a==null?void 0:a.data)==null?void 0:v.file_name)):u()},b.send(g),{abort:()=>{b.abort(),E()}}},revert:(o,h,c)=>{if(this.uploaded_files.find(u=>u===o)){const u=this.uploaded_files.indexOf(o);this.uploaded_files.splice(u,1),n.searchParams.has("action")&&n.searchParams.delete("action"),n.searchParams.append("action","bitforms_file_delete"),n.searchParams.append("file_name",o);const f=new XMLHttpRequest;return f.open("DELETE",n.href),f.onload=()=>{f.status>=200&&f.status<300?h():c()},f.send(),{abort:()=>{f.abort()}}}}},labelFileProcessingError:()=>a==null?void 0:a.data}),r(this,Us).on("updatefiles",()=>{this.files=[],this.files=r(this,Us).getFiles()})}r(this,qe).oldFiles&&l(this,Oh,og).call(this,r(this,qe).oldFiles)}reset(){r(this,Us).destroy(r(this,Us).element),r(this,ws).innerHTML="",this.init()}}ws=new WeakMap,Us=new WeakMap,pa=new WeakMap,as=new WeakMap,He=new WeakMap,$i=new WeakMap,Xo=new WeakMap,Zo=new WeakMap,Qo=new WeakMap,Jo=new WeakMap,ur=new WeakMap,En=new WeakMap,qe=new WeakMap,Oh=new WeakSet,og=function(e){const s=JSON.parse(e);T(this,En,JSON.parse(e)),T(this,ur,l(this,Ni,Kn).call(this,"div")),l(this,bn,zr).call(this,r(this,ur),"old-file-list"),s.forEach(n=>{l(this,yh,lg).call(this,n)});const i=l(this,Ni,Kn).call(this,"input");i.type="hidden",i.name=`${r(this,$i)}_old`,i.value=r(this,En).toString(),r(this,ws).appendChild(r(this,ur)),r(this,ws).appendChild(i)},yh=new WeakSet,lg=function(e){const s=l(this,Ni,Kn).call(this,"div"),i=e.replace(/( |\.|\(|\))/g,"");s.id=`file-wrp-${i}`,l(this,bn,zr).call(this,s,"file-wrpr");const n=l(this,Ni,Kn).call(this,"div");l(this,bn,zr).call(this,n,"file-details");const a=l(this,Ni,Kn).call(this,"a");l(this,bn,zr).call(this,a,"file-title"),l(this,In,Wr).call(this,a,"target","_blank"),l(this,In,Wr).call(this,a,"href",`${r(this,qe).baseDLURL}&fileID=${e}`),l(this,Ko,Uu).call(this,a,e),n.append(a),s.append(n);const o=l(this,Ni,Kn).call(this,"button");l(this,bn,zr).call(this,o,"cross-btn"),l(this,In,Wr).call(this,o,"data-file-id",i),l(this,In,Wr).call(this,o,"data-file-name",e),l(this,In,Wr).call(this,o,"type","button"),l(this,Ko,Uu).call(this,o,"Ã—"),l(this,Mh,dg).call(this,o,"click",h=>l(this,Lh,cg).call(this,h)),s.append(o),r(this,ur).appendChild(s)},Lh=new WeakSet,cg=function(e){const s=e.target.getAttribute("data-file-id"),i=e.target.getAttribute("data-file-name");l(this,Ah,hg).call(this,`#file-wrp-${s}`),T(this,En,r(this,En).filter(n=>n!==i)),l(this,fa,Hc).call(this,`input[name="${r(this,$i)}_old"]`).value=r(this,En).toString()},Ah=new WeakSet,hg=function(e){var s;(s=l(this,fa,Hc).call(this,e))==null||s.remove()},Ni=new WeakSet,Kn=function(e){return r(this,pa).createElement(e)},Mh=new WeakSet,dg=function(e,s,i){e.addEventListener(s,i)},bn=new WeakSet,zr=function(e,s){e.classList.add(s)},Ko=new WeakSet,Uu=function(e,s){e.textContent=s},In=new WeakSet,Wr=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},fa=new WeakSet,Hc=function(e){return r(this,ws).querySelector(e)||console.error("selector not found",e)};/*!
* FilePond 4.30.4
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const aI=t=>t instanceof HTMLElement,oI=(t,e=[],s=[])=>{const i=_({},t),n=[],a=[],o=()=>_({},i),h=()=>{const b=[...n];return n.length=0,b},c=()=>{const b=[...a];a.length=0,b.forEach(({type:I,data:v})=>{d(I,v)})},d=(b,I,v)=>{if(v&&!document.hidden){a.push({type:b,data:I});return}g[b]&&g[b](I),n.push({type:b,data:I})},u=(b,...I)=>E[b]?E[b](...I):null,f={getState:o,processActionQueue:h,processDispatchQueue:c,dispatch:d,query:u};let E={};e.forEach(b=>{E=_(_({},b(i)),E)});let g={};return s.forEach(b=>{g=_(_({},b(d,u,i)),g)}),f},lI=(t,e,s)=>{if(typeof s=="function"){t[e]=s;return}Object.defineProperty(t,e,_({},s))},Lt=(t,e)=>{for(const s in t)t.hasOwnProperty(s)&&e(s,t[s])},qn=t=>{const e={};return Lt(t,s=>{lI(e,s,t[s])}),e},kt=(t,e,s=null)=>{if(s===null)return t.getAttribute(e)||t.hasAttribute(e);t.setAttribute(e,s)},cI="http://www.w3.org/2000/svg",hI=["svg","path"],Gf=t=>hI.includes(t),bh=(t,e,s={})=>{typeof e=="object"&&(s=e,e=null);const i=Gf(t)?document.createElementNS(cI,t):document.createElement(t);return e&&(Gf(t)?kt(i,"class",e):i.className=e),Lt(s,(n,a)=>{kt(i,n,a)}),i},dI=t=>(e,s)=>{typeof s!="undefined"&&t.children[s]?t.insertBefore(e,t.children[s]):t.appendChild(e)},uI=(t,e)=>(s,i)=>(typeof i!="undefined"?e.splice(i,0,s):e.push(s),s),pI=(t,e)=>s=>(e.splice(e.indexOf(s),1),s.element.parentNode&&t.removeChild(s.element),s),fI=(()=>typeof window!="undefined"&&typeof window.document!="undefined")(),ug=()=>fI,mI=ug()?bh("svg"):{},gI="children"in mI?t=>t.children.length:t=>t.childNodes.length,pg=(t,e,s,i)=>{const n=s[0]||t.left,a=s[1]||t.top,o=n+t.width,h=a+t.height*(i[1]||1),c={element:_({},t),inner:{left:t.left,top:t.top,right:t.right,bottom:t.bottom},outer:{left:n,top:a,right:o,bottom:h}};return e.filter(d=>!d.isRectIgnored()).map(d=>d.rect).forEach(d=>{Bf(c.inner,_({},d.inner)),Bf(c.outer,_({},d.outer))}),kf(c.inner),c.outer.bottom+=c.element.marginBottom,c.outer.right+=c.element.marginRight,kf(c.outer),c},Bf=(t,e)=>{e.top+=t.top,e.right+=t.left,e.bottom+=t.top,e.left+=t.left,e.bottom>t.bottom&&(t.bottom=e.bottom),e.right>t.right&&(t.right=e.right)},kf=t=>{t.width=t.right-t.left,t.height=t.bottom-t.top},cr=t=>typeof t=="number",EI=(t,e,s,i=.001)=>Math.abs(t-e)<i&&Math.abs(s)<i,bI=({stiffness:t=.5,damping:e=.75,mass:s=10}={})=>{let i=null,n=null,a=0,o=!1;const d=qn({interpolate:(u,f)=>{if(o)return;if(!(cr(i)&&cr(n))){o=!0,a=0;return}const E=-(n-i)*t;a+=E/s,n+=a,a*=e,EI(n,i,a)||f?(n=i,a=0,o=!0,d.onupdate(n),d.oncomplete(n)):d.onupdate(n)},target:{set:u=>{if(cr(u)&&!cr(n)&&(n=u),i===null&&(i=u,n=u),i=u,n===i||typeof i=="undefined"){o=!0,a=0,d.onupdate(n),d.oncomplete(n);return}o=!1},get:()=>i},resting:{get:()=>o},onupdate:u=>{},oncomplete:u=>{}});return d},II=t=>t<.5?2*t*t:-1+(4-2*t)*t,_I=({duration:t=500,easing:e=II,delay:s=0}={})=>{let i=null,n,a,o=!0,h=!1,c=null;const u=qn({interpolate:(f,E)=>{o||c===null||(i===null&&(i=f),!(f-i<s)&&(n=f-i-s,n>=t||E?(n=1,a=h?0:1,u.onupdate(a*c),u.oncomplete(a*c),o=!0):(a=n/t,u.onupdate((n>=0?e(h?1-a:a):0)*c))))},target:{get:()=>h?0:c,set:f=>{if(c===null){c=f,u.onupdate(f),u.oncomplete(f);return}f<c?(c=1,h=!0):(h=!1,c=f),o=!1,i=null}},resting:{get:()=>o},onupdate:f=>{},oncomplete:f=>{}});return u},jf={spring:bI,tween:_I},wI=(t,e,s)=>{const i=t[e]&&typeof t[e][s]=="object"?t[e][s]:t[e]||t,n=typeof i=="string"?i:i.type,a=typeof i=="object"?_({},i):{};return jf[n]?jf[n](a):null},cf=(t,e,s,i=!1)=>{e=Array.isArray(e)?e:[e],e.forEach(n=>{t.forEach(a=>{let o=a,h=()=>s[a],c=d=>s[a]=d;typeof a=="object"&&(o=a.key,h=a.getter||h,c=a.setter||c),!(n[o]&&!i)&&(n[o]={get:h,set:c})})})},vI=({mixinConfig:t,viewProps:e,viewInternalAPI:s,viewExternalAPI:i})=>{const n=_({},e),a=[];return Lt(t,(o,h)=>{const c=wI(h);if(!c)return;c.onupdate=u=>{e[o]=u},c.target=n[o],cf([{key:o,setter:u=>{c.target!==u&&(c.target=u)},getter:()=>e[o]}],[s,i],e,!0),a.push(c)}),{write:o=>{let h=document.hidden,c=!0;return a.forEach(d=>{d.resting||(c=!1),d.interpolate(o,h)}),c},destroy:()=>{}}},TI=t=>(e,s)=>{t.addEventListener(e,s)},xI=t=>(e,s)=>{t.removeEventListener(e,s)},SI=({mixinConfig:t,viewProps:e,viewInternalAPI:s,viewExternalAPI:i,viewState:n,view:a})=>{const o=[],h=TI(a.element),c=xI(a.element);return i.on=(d,u)=>{o.push({type:d,fn:u}),h(d,u)},i.off=(d,u)=>{o.splice(o.findIndex(f=>f.type===d&&f.fn===u),1),c(d,u)},{write:()=>!0,destroy:()=>{o.forEach(d=>{c(d.type,d.fn)})}}},RI=({mixinConfig:t,viewProps:e,viewExternalAPI:s})=>{cf(t,s,e)},ye=t=>t!=null,CI={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},OI=({mixinConfig:t,viewProps:e,viewInternalAPI:s,viewExternalAPI:i,view:n})=>{const a=_({},e),o={};cf(t,[s,i],e);const h=()=>[e.translateX||0,e.translateY||0],c=()=>[e.scaleX||0,e.scaleY||0],d=()=>n.rect?pg(n.rect,n.childViews,h(),c()):null;return s.rect={get:d},i.rect={get:d},t.forEach(u=>{e[u]=typeof a[u]=="undefined"?CI[u]:a[u]}),{write:()=>{if(yI(o,e))return LI(n.element,e),Object.assign(o,_({},e)),!0},destroy:()=>{}}},yI=(t,e)=>{if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const s in e)if(e[s]!==t[s])return!0;return!1},LI=(t,{opacity:e,perspective:s,translateX:i,translateY:n,scaleX:a,scaleY:o,rotateX:h,rotateY:c,rotateZ:d,originX:u,originY:f,width:E,height:g})=>{let b="",I="";(ye(u)||ye(f))&&(I+=`transform-origin: ${u||0}px ${f||0}px;`),ye(s)&&(b+=`perspective(${s}px) `),(ye(i)||ye(n))&&(b+=`translate3d(${i||0}px, ${n||0}px, 0) `),(ye(a)||ye(o))&&(b+=`scale3d(${ye(a)?a:1}, ${ye(o)?o:1}, 1) `),ye(d)&&(b+=`rotateZ(${d}rad) `),ye(h)&&(b+=`rotateX(${h}rad) `),ye(c)&&(b+=`rotateY(${c}rad) `),b.length&&(I+=`transform:${b};`),ye(e)&&(I+=`opacity:${e};`,e===0&&(I+="visibility:hidden;"),e<1&&(I+="pointer-events:none;")),ye(g)&&(I+=`height:${g}px;`),ye(E)&&(I+=`width:${E}px;`);const v=t.elementCurrentStyle||"";(I.length!==v.length||I!==v)&&(t.style.cssText=I,t.elementCurrentStyle=I)},AI={styles:OI,listeners:SI,animations:vI,apis:RI},Uf=(t={},e={},s={})=>(e.layoutCalculated||(t.paddingTop=parseInt(s.paddingTop,10)||0,t.marginTop=parseInt(s.marginTop,10)||0,t.marginRight=parseInt(s.marginRight,10)||0,t.marginBottom=parseInt(s.marginBottom,10)||0,t.marginLeft=parseInt(s.marginLeft,10)||0,e.layoutCalculated=!0),t.left=e.offsetLeft||0,t.top=e.offsetTop||0,t.width=e.offsetWidth||0,t.height=e.offsetHeight||0,t.right=t.left+t.width,t.bottom=t.top+t.height,t.scrollTop=e.scrollTop,t.hidden=e.offsetParent===null,t),jt=({tag:t="div",name:e=null,attributes:s={},read:i=()=>{},write:n=()=>{},create:a=()=>{},destroy:o=()=>{},filterFrameActionsForChild:h=(g,b)=>b,didCreateView:c=()=>{},didWriteView:d=()=>{},ignoreRect:u=!1,ignoreRectUpdate:f=!1,mixins:E=[]}={})=>(g,b={})=>{const I=bh(t,`filepond--${e}`,s),v=window.getComputedStyle(I,null),C=Uf();let w=null,x=!1;const R=[],O=[],L={},P={},y=[n],D=[i],V=[o],k=()=>I,B=()=>R.concat(),X=()=>L,N=J=>(st,ct)=>st(J,ct),W=()=>w||(w=pg(C,R,[0,0],[1,1]),w),F=()=>v,$=()=>{w=null,R.forEach(ct=>ct._read()),!(f&&C.width&&C.height)&&Uf(C,I,v);const st={root:lt,props:b,rect:C};D.forEach(ct=>ct(st))},G=(J,st,ct)=>{let mt=st.length===0;return y.forEach(dt=>{dt({props:b,root:lt,actions:st,timestamp:J,shouldOptimize:ct})===!1&&(mt=!1)}),O.forEach(dt=>{dt.write(J)===!1&&(mt=!1)}),R.filter(dt=>!!dt.element.parentNode).forEach(dt=>{dt._write(J,h(dt,st),ct)||(mt=!1)}),R.forEach((dt,si)=>{dt.element.parentNode||(lt.appendChild(dt.element,si),dt._read(),dt._write(J,h(dt,st),ct),mt=!1)}),x=mt,d({props:b,root:lt,actions:st,timestamp:J}),mt},U=()=>{O.forEach(J=>J.destroy()),V.forEach(J=>{J({root:lt,props:b})}),R.forEach(J=>J._destroy())},H={element:{get:k},style:{get:F},childViews:{get:B}},Y=A(_({},H),{rect:{get:W},ref:{get:X},is:J=>e===J,appendChild:dI(I),createChildView:N(g),linkView:J=>(R.push(J),J),unlinkView:J=>{R.splice(R.indexOf(J),1)},appendChildView:uI(I,R),removeChildView:pI(I,R),registerWriter:J=>y.push(J),registerReader:J=>D.push(J),registerDestroyer:J=>V.push(J),invalidateLayout:()=>I.layoutCalculated=!1,dispatch:g.dispatch,query:g.query}),ot={element:{get:k},childViews:{get:B},rect:{get:W},resting:{get:()=>x},isRectIgnored:()=>u,_read:$,_write:G,_destroy:U},rt=A(_({},H),{rect:{get:()=>C}});Object.keys(E).sort((J,st)=>J==="styles"?1:st==="styles"?-1:0).forEach(J=>{const st=AI[J]({mixinConfig:E[J],viewProps:b,viewState:P,viewInternalAPI:Y,viewExternalAPI:ot,view:qn(rt)});st&&O.push(st)});const lt=qn(Y);a({root:lt,props:b});const bt=gI(I);return R.forEach((J,st)=>{lt.appendChild(J.element,bt+st)}),c(lt),qn(ot)},MI=(t,e,s=60)=>{const i="__framePainter";if(window[i]){window[i].readers.push(t),window[i].writers.push(e);return}window[i]={readers:[t],writers:[e]};const n=window[i],a=1e3/s;let o=null,h=null,c=null,d=null;const u=()=>{document.hidden?(c=()=>window.setTimeout(()=>f(performance.now()),a),d=()=>window.clearTimeout(h)):(c=()=>window.requestAnimationFrame(f),d=()=>window.cancelAnimationFrame(h))};document.addEventListener("visibilitychange",()=>{d&&d(),u(),f(performance.now())});const f=E=>{h=c(f),o||(o=E);const g=E-o;g<=a||(o=E-g%a,n.readers.forEach(b=>b()),n.writers.forEach(b=>b(E)))};return u(),f(performance.now()),{pause:()=>{d(h)}}},Ue=(t,e)=>({root:s,props:i,actions:n=[],timestamp:a,shouldOptimize:o})=>{n.filter(h=>t[h.type]).forEach(h=>t[h.type]({root:s,props:i,action:h.data,timestamp:a,shouldOptimize:o})),e&&e({root:s,props:i,actions:n,timestamp:a,shouldOptimize:o})},Vf=(t,e)=>e.parentNode.insertBefore(t,e),zf=(t,e)=>e.parentNode.insertBefore(t,e.nextSibling),Tu=t=>Array.isArray(t),on=t=>t==null,$I=t=>t.trim(),xu=t=>""+t,NI=(t,e=",")=>on(t)?[]:Tu(t)?t:xu(t).split(e).map($I).filter(s=>s.length),fg=t=>typeof t=="boolean",mg=t=>fg(t)?t:t==="true",je=t=>typeof t=="string",gg=t=>cr(t)?t:je(t)?xu(t).replace(/[a-z]+/gi,""):0,qc=t=>parseInt(gg(t),10),Wf=t=>parseFloat(gg(t)),go=t=>cr(t)&&isFinite(t)&&Math.floor(t)===t,Hf=(t,e=1e3)=>{if(go(t))return t;let s=xu(t).trim();return/MB$/i.test(s)?(s=s.replace(/MB$i/,"").trim(),qc(s)*e*e):/KB/i.test(s)?(s=s.replace(/KB$i/,"").trim(),qc(s)*e):qc(s)},hr=t=>typeof t=="function",PI=t=>{let e=self,s=t.split("."),i=null;for(;i=s.shift();)if(e=e[i],!e)return null;return e},qf={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},DI=t=>{const e={};return e.url=je(t)?t:t.url||"",e.timeout=t.timeout?parseInt(t.timeout,10):0,e.headers=t.headers?t.headers:{},Lt(qf,s=>{e[s]=FI(s,t[s],qf[s],e.timeout,e.headers)}),e.process=t.process||je(t)||t.url?e.process:null,e.remove=t.remove||null,delete e.headers,e},FI=(t,e,s,i,n)=>{if(e===null)return null;if(typeof e=="function")return e;const a={url:s==="GET"||s==="PATCH"?`?${t}=`:"",method:s,headers:n,withCredentials:!1,timeout:i,onload:null,ondata:null,onerror:null};if(je(e))return a.url=e,a;if(Object.assign(a,e),je(a.headers)){const o=a.headers.split(/:(.+)/);a.headers={header:o[0],value:o[1]}}return a.withCredentials=mg(a.withCredentials),a},GI=t=>DI(t),BI=t=>t===null,ae=t=>typeof t=="object"&&t!==null,kI=t=>ae(t)&&je(t.url)&&ae(t.process)&&ae(t.revert)&&ae(t.restore)&&ae(t.fetch),Vu=t=>Tu(t)?"array":BI(t)?"null":go(t)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(t)?"bytes":kI(t)?"api":typeof t,jI=t=>t.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),UI={array:NI,boolean:mg,int:t=>Vu(t)==="bytes"?Hf(t):qc(t),number:Wf,float:Wf,bytes:Hf,string:t=>hr(t)?t:xu(t),function:t=>PI(t),serverapi:GI,object:t=>{try{return JSON.parse(jI(t))}catch(e){return null}}},VI=(t,e)=>UI[e](t),Eg=(t,e,s)=>{if(t===e)return t;let i=Vu(t);if(i!==s){const n=VI(t,s);if(i=Vu(n),n===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${s}"`;t=n}return t},zI=(t,e)=>{let s=t;return{enumerable:!0,get:()=>s,set:i=>{s=Eg(i,t,e)}}},WI=t=>{const e={};return Lt(t,s=>{const i=t[s];e[s]=zI(i[0],i[1])}),qn(e)},HI=t=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:WI(t)}),Su=(t,e="-")=>t.split(/(?=[A-Z])/).map(s=>s.toLowerCase()).join(e),qI=(t,e)=>{const s={};return Lt(e,i=>{s[i]={get:()=>t.getState().options[i],set:n=>{t.dispatch(`SET_${Su(i,"_").toUpperCase()}`,{value:n})}}}),s},YI=t=>(e,s,i)=>{const n={};return Lt(t,a=>{const o=Su(a,"_").toUpperCase();n[`SET_${o}`]=h=>{try{i.options[a]=h.value}catch(c){}e(`DID_SET_${o}`,{value:i.options[a]})}}),n},XI=t=>e=>{const s={};return Lt(t,i=>{s[`GET_${Su(i,"_").toUpperCase()}`]=n=>e.options[i]}),s},Ds={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},hf=()=>Math.random().toString(36).substring(2,11),df=(t,e)=>t.splice(e,1),ZI=(t,e)=>{e?t():document.hidden?Promise.resolve(1).then(t):setTimeout(t,0)},Ru=()=>{const t=[],e=(i,n)=>{df(t,t.findIndex(a=>a.event===i&&(a.cb===n||!n)))},s=(i,n,a)=>{t.filter(o=>o.event===i).map(o=>o.cb).forEach(o=>ZI(()=>o(...n),a))};return{fireSync:(i,...n)=>{s(i,n,!0)},fire:(i,...n)=>{s(i,n,!1)},on:(i,n)=>{t.push({event:i,cb:n})},onOnce:(i,n)=>{t.push({event:i,cb:(...a)=>{e(i,n),n(...a)}})},off:e}},bg=(t,e,s)=>{Object.getOwnPropertyNames(t).filter(i=>!s.includes(i)).forEach(i=>Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i)))},QI=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],Je=t=>{const e={};return bg(t,e,QI),e},JI=t=>{t.forEach((e,s)=>{e.released&&df(t,s)})},it={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},Kt={INPUT:1,LIMBO:2,LOCAL:3},Ig=t=>/[^0-9]+/.exec(t),_g=()=>Ig(1.1.toLocaleString())[0],KI=()=>{const t=_g(),e=1e3.toLocaleString(),s=1e3.toString();return e!==s?Ig(e)[0]:t==="."?",":"."},z={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},uf=[],Ks=(t,e,s)=>new Promise((i,n)=>{const a=uf.filter(h=>h.key===t).map(h=>h.cb);if(a.length===0){i(e);return}const o=a.shift();a.reduce((h,c)=>h.then(d=>c(d,s)),o(e,s)).then(h=>i(h)).catch(h=>n(h))}),jr=(t,e,s)=>uf.filter(i=>i.key===t).map(i=>i.cb(e,s)),t_=(t,e)=>uf.push({key:t,cb:e}),e_=t=>Object.assign(oa,t),Ih=()=>_({},oa),s_=t=>{Lt(t,(e,s)=>{oa[e]&&(oa[e][0]=Eg(s,oa[e][0],oa[e][1]))})},oa={id:[null,z.STRING],name:["filepond",z.STRING],disabled:[!1,z.BOOLEAN],className:[null,z.STRING],required:[!1,z.BOOLEAN],captureMethod:[null,z.STRING],allowSyncAcceptAttribute:[!0,z.BOOLEAN],allowDrop:[!0,z.BOOLEAN],allowBrowse:[!0,z.BOOLEAN],allowPaste:[!0,z.BOOLEAN],allowMultiple:[!1,z.BOOLEAN],allowReplace:[!0,z.BOOLEAN],allowRevert:[!0,z.BOOLEAN],allowRemove:[!0,z.BOOLEAN],allowProcess:[!0,z.BOOLEAN],allowReorder:[!1,z.BOOLEAN],allowDirectoriesOnly:[!1,z.BOOLEAN],storeAsFile:[!1,z.BOOLEAN],forceRevert:[!1,z.BOOLEAN],maxFiles:[null,z.INT],checkValidity:[!1,z.BOOLEAN],itemInsertLocationFreedom:[!0,z.BOOLEAN],itemInsertLocation:["before",z.STRING],itemInsertInterval:[75,z.INT],dropOnPage:[!1,z.BOOLEAN],dropOnElement:[!0,z.BOOLEAN],dropValidation:[!1,z.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],z.ARRAY],instantUpload:[!0,z.BOOLEAN],maxParallelUploads:[2,z.INT],allowMinimumUploadDuration:[!0,z.BOOLEAN],chunkUploads:[!1,z.BOOLEAN],chunkForce:[!1,z.BOOLEAN],chunkSize:[5e6,z.INT],chunkRetryDelays:[[500,1e3,3e3],z.ARRAY],server:[null,z.SERVER_API],fileSizeBase:[1e3,z.INT],labelFileSizeBytes:["bytes",z.STRING],labelFileSizeKilobytes:["KB",z.STRING],labelFileSizeMegabytes:["MB",z.STRING],labelFileSizeGigabytes:["GB",z.STRING],labelDecimalSeparator:[_g(),z.STRING],labelThousandsSeparator:[KI(),z.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',z.STRING],labelInvalidField:["Field contains invalid files",z.STRING],labelFileWaitingForSize:["Waiting for size",z.STRING],labelFileSizeNotAvailable:["Size not available",z.STRING],labelFileCountSingular:["file in list",z.STRING],labelFileCountPlural:["files in list",z.STRING],labelFileLoading:["Loading",z.STRING],labelFileAdded:["Added",z.STRING],labelFileLoadError:["Error during load",z.STRING],labelFileRemoved:["Removed",z.STRING],labelFileRemoveError:["Error during remove",z.STRING],labelFileProcessing:["Uploading",z.STRING],labelFileProcessingComplete:["Upload complete",z.STRING],labelFileProcessingAborted:["Upload cancelled",z.STRING],labelFileProcessingError:["Error during upload",z.STRING],labelFileProcessingRevertError:["Error during revert",z.STRING],labelTapToCancel:["tap to cancel",z.STRING],labelTapToRetry:["tap to retry",z.STRING],labelTapToUndo:["tap to undo",z.STRING],labelButtonRemoveItem:["Remove",z.STRING],labelButtonAbortItemLoad:["Abort",z.STRING],labelButtonRetryItemLoad:["Retry",z.STRING],labelButtonAbortItemProcessing:["Cancel",z.STRING],labelButtonUndoItemProcessing:["Undo",z.STRING],labelButtonRetryItemProcessing:["Retry",z.STRING],labelButtonProcessItem:["Upload",z.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',z.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',z.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',z.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',z.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',z.STRING],oninit:[null,z.FUNCTION],onwarning:[null,z.FUNCTION],onerror:[null,z.FUNCTION],onactivatefile:[null,z.FUNCTION],oninitfile:[null,z.FUNCTION],onaddfilestart:[null,z.FUNCTION],onaddfileprogress:[null,z.FUNCTION],onaddfile:[null,z.FUNCTION],onprocessfilestart:[null,z.FUNCTION],onprocessfileprogress:[null,z.FUNCTION],onprocessfileabort:[null,z.FUNCTION],onprocessfilerevert:[null,z.FUNCTION],onprocessfile:[null,z.FUNCTION],onprocessfiles:[null,z.FUNCTION],onremovefile:[null,z.FUNCTION],onpreparefile:[null,z.FUNCTION],onupdatefiles:[null,z.FUNCTION],onreorderfiles:[null,z.FUNCTION],beforeDropFile:[null,z.FUNCTION],beforeAddFile:[null,z.FUNCTION],beforeRemoveFile:[null,z.FUNCTION],beforePrepareFile:[null,z.FUNCTION],stylePanelLayout:[null,z.STRING],stylePanelAspectRatio:[null,z.STRING],styleItemPanelAspectRatio:[null,z.STRING],styleButtonRemoveItemPosition:["left",z.STRING],styleButtonProcessItemPosition:["right",z.STRING],styleLoadIndicatorPosition:["right",z.STRING],styleProgressIndicatorPosition:["right",z.STRING],styleButtonRemoveItemAlign:[!1,z.BOOLEAN],files:[[],z.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],z.ARRAY]},dr=(t,e)=>on(e)?t[0]||null:go(e)?t[e]||null:(typeof e=="object"&&(e=e.id),t.find(s=>s.id===e)||null),wg=t=>{if(on(t))return t;if(/:/.test(t)){const e=t.split(":");return e[1]/e[0]}return parseFloat(t)},ti=t=>t.filter(e=>!e.archived),vg={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let Mc=null;const i_=()=>{if(Mc===null)try{const t=new DataTransfer;t.items.add(new File(["hello world"],"This_Works.txt"));const e=document.createElement("input");e.setAttribute("type","file"),e.files=t.files,Mc=e.files.length===1}catch(t){Mc=!1}return Mc},n_=[it.LOAD_ERROR,it.PROCESSING_ERROR,it.PROCESSING_REVERT_ERROR],r_=[it.LOADING,it.PROCESSING,it.PROCESSING_QUEUED,it.INIT],a_=[it.PROCESSING_COMPLETE],o_=t=>n_.includes(t.status),l_=t=>r_.includes(t.status),c_=t=>a_.includes(t.status),Yf=t=>ae(t.options.server)&&(ae(t.options.server.process)||hr(t.options.server.process)),h_=t=>({GET_STATUS:()=>{const e=ti(t.items),{EMPTY:s,ERROR:i,BUSY:n,IDLE:a,READY:o}=vg;return e.length===0?s:e.some(o_)?i:e.some(l_)?n:e.some(c_)?o:a},GET_ITEM:e=>dr(t.items,e),GET_ACTIVE_ITEM:e=>dr(ti(t.items),e),GET_ACTIVE_ITEMS:()=>ti(t.items),GET_ITEMS:()=>t.items,GET_ITEM_NAME:e=>{const s=dr(t.items,e);return s?s.filename:null},GET_ITEM_SIZE:e=>{const s=dr(t.items,e);return s?s.fileSize:null},GET_STYLES:()=>Object.keys(t.options).filter(e=>/^style/.test(e)).map(e=>({name:e,value:t.options[e]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(t.options.stylePanelLayout)?1:wg(t.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>t.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:e=>ti(t.items).filter(s=>s.status===e),GET_TOTAL_ITEMS:()=>ti(t.items).length,SHOULD_UPDATE_FILE_INPUT:()=>t.options.storeAsFile&&i_()&&!Yf(t),IS_ASYNC:()=>Yf(t),GET_FILE_SIZE_LABELS:e=>({labelBytes:e("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:e("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:e("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:e("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),d_=t=>{const e=ti(t.items).length;if(!t.options.allowMultiple)return e===0;const s=t.options.maxFiles;return s===null||e<s},Tg=(t,e,s)=>Math.max(Math.min(s,t),e),u_=(t,e,s)=>t.splice(e,0,s),p_=(t,e,s)=>on(e)?null:typeof s=="undefined"?(t.push(e),e):(s=Tg(s,0,t.length),u_(t,s,e),e),zu=t=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(t),Oc=t=>t.split("/").pop().split("?").shift(),Cu=t=>t.split(".").pop(),f_=t=>{if(typeof t!="string")return"";const e=t.split("/").pop();return/svg/.test(e)?"svg":/zip|compressed/.test(e)?"zip":/plain/.test(e)?"txt":/msword/.test(e)?"doc":/[a-z]+/.test(e)?e==="jpeg"?"jpg":e:""},vo=(t,e="")=>(e+t).slice(-e.length),xg=(t=new Date)=>`${t.getFullYear()}-${vo(t.getMonth()+1,"00")}-${vo(t.getDate(),"00")}_${vo(t.getHours(),"00")}-${vo(t.getMinutes(),"00")}-${vo(t.getSeconds(),"00")}`,uo=(t,e,s=null,i=null)=>{const n=typeof s=="string"?t.slice(0,t.size,s):t.slice(0,t.size,t.type);return n.lastModifiedDate=new Date,t._relativePath&&(n._relativePath=t._relativePath),je(e)||(e=xg()),e&&i===null&&Cu(e)?n.name=e:(i=i||f_(n.type),n.name=e+(i?"."+i:"")),n},m_=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Sg=(t,e)=>{const s=m_();if(s){const i=new s;return i.append(t),i.getBlob(e)}return new Blob([t],{type:e})},g_=(t,e)=>{const s=new ArrayBuffer(t.length),i=new Uint8Array(s);for(let n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return Sg(s,e)},Rg=t=>(/^data:(.+);/.exec(t)||[])[1]||null,E_=t=>t.split(",")[1].replace(/\s/g,""),b_=t=>atob(E_(t)),I_=t=>{const e=Rg(t),s=b_(t);return g_(s,e)},__=(t,e,s)=>uo(I_(t),e,null,s),w_=t=>{if(!/^content-disposition:/i.test(t))return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map(s=>s.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(s=>s.length);return e.length?decodeURI(e[e.length-1]):null},v_=t=>{if(/content-length:/i.test(t)){const e=t.match(/[0-9]+/)[0];return e?parseInt(e,10):null}return null},T_=t=>/x-content-transfer-id:/i.test(t)&&(t.split(":")[1]||"").trim()||null,pf=t=>{const e={source:null,name:null,size:null},s=t.split(`
`);for(let i of s){const n=w_(i);if(n){e.name=n;continue}const a=v_(i);if(a){e.size=a;continue}const o=T_(i);if(o){e.source=o;continue}}return e},x_=t=>{const e={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},s=()=>e.progress,i=()=>{e.request&&e.request.abort&&e.request.abort()},n=()=>{const h=e.source;o.fire("init",h),h instanceof File?o.fire("load",h):h instanceof Blob?o.fire("load",uo(h,h.name)):zu(h)?o.fire("load",__(h)):a(h)},a=h=>{if(!t){o.fire("error",{type:"error",body:"Can't load URL",code:400});return}e.timestamp=Date.now(),e.request=t(h,c=>{e.duration=Date.now()-e.timestamp,e.complete=!0,c instanceof Blob&&(c=uo(c,c.name||Oc(h))),o.fire("load",c instanceof Blob?c:c?c.body:null)},c=>{o.fire("error",typeof c=="string"?{type:"error",code:0,body:c}:c)},(c,d,u)=>{if(u&&(e.size=u),e.duration=Date.now()-e.timestamp,!c){e.progress=null;return}e.progress=d/u,o.fire("progress",e.progress)},()=>{o.fire("abort")},c=>{const d=pf(typeof c=="string"?c:c.headers);o.fire("meta",{size:e.size||d.size,filename:d.name,source:d.source})})},o=A(_({},Ru()),{setSource:h=>e.source=h,getProgress:s,abort:i,load:n});return o},Xf=t=>/GET|HEAD/.test(t),Fr=(t,e,s)=>{const i={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{n=!0,o.abort()}};let n=!1,a=!1;s=_({method:"POST",headers:{},withCredentials:!1},s),e=encodeURI(e),Xf(s.method)&&t&&(e=`${e}${encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))}`);const o=new XMLHttpRequest,h=Xf(s.method)?o:o.upload;return h.onprogress=c=>{n||i.onprogress(c.lengthComputable,c.loaded,c.total)},o.onreadystatechange=()=>{o.readyState<2||o.readyState===4&&o.status===0||a||(a=!0,i.onheaders(o))},o.onload=()=>{o.status>=200&&o.status<300?i.onload(o):i.onerror(o)},o.onerror=()=>i.onerror(o),o.onabort=()=>{n=!0,i.onabort()},o.ontimeout=()=>i.ontimeout(o),o.open(s.method,e,!0),go(s.timeout)&&(o.timeout=s.timeout),Object.keys(s.headers).forEach(c=>{const d=unescape(encodeURIComponent(s.headers[c]));o.setRequestHeader(c,d)}),s.responseType&&(o.responseType=s.responseType),s.withCredentials&&(o.withCredentials=!0),o.send(t),i},Pt=(t,e,s,i)=>({type:t,code:e,body:s,headers:i}),Gr=t=>e=>{t(Pt("error",0,"Timeout",e.getAllResponseHeaders()))},Zf=t=>/\?/.test(t),Uo=(...t)=>{let e="";return t.forEach(s=>{e+=Zf(e)&&Zf(s)?s.replace(/\?/,"&"):s}),e},$u=(t="",e)=>{if(typeof e=="function")return e;if(!e||!je(e.url))return null;const s=e.onload||(n=>n),i=e.onerror||(n=>null);return(n,a,o,h,c,d)=>{const u=Fr(n,Uo(t,e.url),A(_({},e),{responseType:"blob"}));return u.onload=f=>{const E=f.getAllResponseHeaders(),g=pf(E).name||Oc(n);a(Pt("load",f.status,e.method==="HEAD"?null:uo(s(f.response),g),E))},u.onerror=f=>{o(Pt("error",f.status,i(f.response)||f.statusText,f.getAllResponseHeaders()))},u.onheaders=f=>{d(Pt("headers",f.status,null,f.getAllResponseHeaders()))},u.ontimeout=Gr(o),u.onprogress=h,u.onabort=c,u}},gs={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},S_=(t,e,s,i,n,a,o,h,c,d,u)=>{const f=[],{chunkTransferId:E,chunkServer:g,chunkSize:b,chunkRetryDelays:I}=u,v={serverId:E,aborted:!1},C=e.ondata||(N=>N),w=e.onload||((N,W)=>W==="HEAD"?N.getResponseHeader("Upload-Offset"):N.response),x=e.onerror||(N=>null),R=N=>{const W=new FormData;ae(n)&&W.append(s,JSON.stringify(n));const F=typeof e.headers=="function"?e.headers(i,n):A(_({},e.headers),{"Upload-Length":i.size}),$=A(_({},e),{headers:F}),G=Fr(C(W),Uo(t,e.url),$);G.onload=U=>N(w(U,$.method)),G.onerror=U=>o(Pt("error",U.status,x(U.response)||U.statusText,U.getAllResponseHeaders())),G.ontimeout=Gr(o)},O=N=>{const W=Uo(t,g.url,v.serverId),$={headers:typeof e.headers=="function"?e.headers(v.serverId):_({},e.headers),method:"HEAD"},G=Fr(null,W,$);G.onload=U=>N(w(U,$.method)),G.onerror=U=>o(Pt("error",U.status,x(U.response)||U.statusText,U.getAllResponseHeaders())),G.ontimeout=Gr(o)},L=Math.floor(i.size/b);for(let N=0;N<=L;N++){const W=N*b,F=i.slice(W,W+b,"application/offset+octet-stream");f[N]={index:N,size:F.size,offset:W,data:F,file:i,progress:0,retries:[...I],status:gs.QUEUED,error:null,request:null,timeout:null}}const P=()=>a(v.serverId),y=N=>N.status===gs.QUEUED||N.status===gs.ERROR,D=N=>{if(v.aborted)return;if(N=N||f.find(y),!N){f.every(H=>H.status===gs.COMPLETE)&&P();return}N.status=gs.PROCESSING,N.progress=null;const W=g.ondata||(H=>H),F=g.onerror||(H=>null),$=Uo(t,g.url,v.serverId),G=typeof g.headers=="function"?g.headers(N):A(_({},g.headers),{"Content-Type":"application/offset+octet-stream","Upload-Offset":N.offset,"Upload-Length":i.size,"Upload-Name":i.name}),U=N.request=Fr(W(N.data),$,A(_({},g),{headers:G}));U.onload=()=>{N.status=gs.COMPLETE,N.request=null,B()},U.onprogress=(H,Y,ot)=>{N.progress=H?Y:null,k()},U.onerror=H=>{N.status=gs.ERROR,N.request=null,N.error=F(H.response)||H.statusText,V(N)||o(Pt("error",H.status,F(H.response)||H.statusText,H.getAllResponseHeaders()))},U.ontimeout=H=>{N.status=gs.ERROR,N.request=null,V(N)||Gr(o)(H)},U.onabort=()=>{N.status=gs.QUEUED,N.request=null,c()}},V=N=>N.retries.length===0?!1:(N.status=gs.WAITING,clearTimeout(N.timeout),N.timeout=setTimeout(()=>{D(N)},N.retries.shift()),!0),k=()=>{const N=f.reduce((F,$)=>F===null||$.progress===null?null:F+$.progress,0);if(N===null)return h(!1,0,0);const W=f.reduce((F,$)=>F+$.size,0);h(!0,N,W)},B=()=>{f.filter(W=>W.status===gs.PROCESSING).length>=1||D()},X=()=>{f.forEach(N=>{clearTimeout(N.timeout),N.request&&N.request.abort()})};return v.serverId?O(N=>{v.aborted||(f.filter(W=>W.offset<N).forEach(W=>{W.status=gs.COMPLETE,W.progress=W.size}),B())}):R(N=>{v.aborted||(d(N),v.serverId=N,B())}),{abort:()=>{v.aborted=!0,X()}}},R_=(t,e,s,i)=>(n,a,o,h,c,d,u)=>{if(!n)return;const f=i.chunkUploads,E=f&&n.size>i.chunkSize,g=f&&(E||i.chunkForce);if(n instanceof Blob&&g)return S_(t,e,s,n,a,o,h,c,d,u,i);const b=e.ondata||(O=>O),I=e.onload||(O=>O),v=e.onerror||(O=>null),C=typeof e.headers=="function"?e.headers(n,a)||{}:_({},e.headers),w=A(_({},e),{headers:C});var x=new FormData;ae(a)&&x.append(s,JSON.stringify(a)),(n instanceof Blob?[{name:null,file:n}]:n).forEach(O=>{x.append(s,O.file,O.name===null?O.file.name:`${O.name}${O.file.name}`)});const R=Fr(b(x),Uo(t,e.url),w);return R.onload=O=>{o(Pt("load",O.status,I(O.response),O.getAllResponseHeaders()))},R.onerror=O=>{h(Pt("error",O.status,v(O.response)||O.statusText,O.getAllResponseHeaders()))},R.ontimeout=Gr(h),R.onprogress=c,R.onabort=d,R},C_=(t="",e,s,i)=>typeof e=="function"?(...n)=>e(s,...n,i):!e||!je(e.url)?null:R_(t,e,s,i),To=(t="",e)=>{if(typeof e=="function")return e;if(!e||!je(e.url))return(n,a)=>a();const s=e.onload||(n=>n),i=e.onerror||(n=>null);return(n,a,o)=>{const h=Fr(n,t+e.url,e);return h.onload=c=>{a(Pt("load",c.status,s(c.response),c.getAllResponseHeaders()))},h.onerror=c=>{o(Pt("error",c.status,i(c.response)||c.statusText,c.getAllResponseHeaders()))},h.ontimeout=Gr(o),h}},Cg=(t=0,e=1)=>t+Math.random()*(e-t),O_=(t,e=1e3,s=0,i=25,n=250)=>{let a=null;const o=Date.now(),h=()=>{let c=Date.now()-o,d=Cg(i,n);c+d>e&&(d=c+d-e);let u=c/e;if(u>=1||document.hidden){t(1);return}t(u),a=setTimeout(h,d)};return e>0&&h(),{clear:()=>{clearTimeout(a)}}},y_=(t,e)=>{const s={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:i}=e,n=(u,f)=>{const E=()=>{s.duration===0||s.progress===null||d.fire("progress",d.getProgress())},g=()=>{s.complete=!0,d.fire("load-perceived",s.response.body)};d.fire("start"),s.timestamp=Date.now(),s.perceivedPerformanceUpdater=O_(b=>{s.perceivedProgress=b,s.perceivedDuration=Date.now()-s.timestamp,E(),s.response&&s.perceivedProgress===1&&!s.complete&&g()},i?Cg(750,1500):0),s.request=t(u,f,b=>{s.response=ae(b)?b:{type:"load",code:200,body:`${b}`,headers:{}},s.duration=Date.now()-s.timestamp,s.progress=1,d.fire("load",s.response.body),(!i||i&&s.perceivedProgress===1)&&g()},b=>{s.perceivedPerformanceUpdater.clear(),d.fire("error",ae(b)?b:{type:"error",code:0,body:`${b}`})},(b,I,v)=>{s.duration=Date.now()-s.timestamp,s.progress=b?I/v:null,E()},()=>{s.perceivedPerformanceUpdater.clear(),d.fire("abort",s.response?s.response.body:null)},b=>{d.fire("transfer",b)})},a=()=>{s.request&&(s.perceivedPerformanceUpdater.clear(),s.request.abort&&s.request.abort(),s.complete=!0)},o=()=>{a(),s.complete=!1,s.perceivedProgress=0,s.progress=0,s.timestamp=null,s.perceivedDuration=0,s.duration=0,s.request=null,s.response=null},h=i?()=>s.progress?Math.min(s.progress,s.perceivedProgress):null:()=>s.progress||null,c=i?()=>Math.min(s.duration,s.perceivedDuration):()=>s.duration,d=A(_({},Ru()),{process:n,abort:a,getProgress:h,getDuration:c,reset:o});return d},Og=t=>t.substring(0,t.lastIndexOf("."))||t,L_=t=>{let e=[t.name,t.size,t.type];return t instanceof Blob||zu(t)?e[0]=t.name||xg():zu(t)?(e[1]=t.length,e[2]=Rg(t)):je(t)&&(e[0]=Oc(t),e[1]=0,e[2]="application/octet-stream"),{name:e[0],size:e[1],type:e[2]}},po=t=>!!(t instanceof File||t instanceof Blob&&t.name),yg=t=>{if(!ae(t))return t;const e=Tu(t)?[]:{};for(const s in t){if(!t.hasOwnProperty(s))continue;const i=t[s];e[s]=i&&ae(i)?yg(i):i}return e},A_=(t=null,e=null,s=null)=>{const i=hf(),n={archived:!1,frozen:!1,released:!1,source:null,file:s,serverFileReference:e,transferId:null,processingAborted:!1,status:e?it.PROCESSING_COMPLETE:it.INIT,activeLoader:null,activeProcessor:null};let a=null;const o={},h=y=>n.status=y,c=(y,...D)=>{n.released||n.frozen||L.fire(y,...D)},d=()=>Cu(n.file.name),u=()=>n.file.type,f=()=>n.file.size,E=()=>n.file,g=(y,D,V)=>{if(n.source=y,L.fireSync("init"),n.file){L.fireSync("load-skip");return}n.file=L_(y),D.on("init",()=>{c("load-init")}),D.on("meta",k=>{n.file.size=k.size,n.file.filename=k.filename,k.source&&(t=Kt.LIMBO,n.serverFileReference=k.source,n.status=it.PROCESSING_COMPLETE),c("load-meta")}),D.on("progress",k=>{h(it.LOADING),c("load-progress",k)}),D.on("error",k=>{h(it.LOAD_ERROR),c("load-request-error",k)}),D.on("abort",()=>{h(it.INIT),c("load-abort")}),D.on("load",k=>{n.activeLoader=null;const B=N=>{n.file=po(N)?N:n.file,t===Kt.LIMBO&&n.serverFileReference?h(it.PROCESSING_COMPLETE):h(it.IDLE),c("load")},X=N=>{n.file=k,c("load-meta"),h(it.LOAD_ERROR),c("load-file-error",N)};if(n.serverFileReference){B(k);return}V(k,B,X)}),D.setSource(y),n.activeLoader=D,D.load()},b=()=>{n.activeLoader&&n.activeLoader.load()},I=()=>{if(n.activeLoader){n.activeLoader.abort();return}h(it.INIT),c("load-abort")},v=(y,D)=>{if(n.processingAborted){n.processingAborted=!1;return}if(h(it.PROCESSING),a=null,!(n.file instanceof Blob)){L.on("load",()=>{v(y,D)});return}y.on("load",B=>{n.transferId=null,n.serverFileReference=B}),y.on("transfer",B=>{n.transferId=B}),y.on("load-perceived",B=>{n.activeProcessor=null,n.transferId=null,n.serverFileReference=B,h(it.PROCESSING_COMPLETE),c("process-complete",B)}),y.on("start",()=>{c("process-start")}),y.on("error",B=>{n.activeProcessor=null,h(it.PROCESSING_ERROR),c("process-error",B)}),y.on("abort",B=>{n.activeProcessor=null,n.serverFileReference=B,h(it.IDLE),c("process-abort"),a&&a()}),y.on("progress",B=>{c("process-progress",B)});const V=B=>{n.archived||y.process(B,_({},o))},k=console.error;D(n.file,V,k),n.activeProcessor=y},C=()=>{n.processingAborted=!1,h(it.PROCESSING_QUEUED)},w=()=>new Promise(y=>{if(!n.activeProcessor){n.processingAborted=!0,h(it.IDLE),c("process-abort"),y();return}a=()=>{y()},n.activeProcessor.abort()}),x=(y,D)=>new Promise((V,k)=>{const B=n.serverFileReference!==null?n.serverFileReference:n.transferId;if(B===null){V();return}y(B,()=>{n.serverFileReference=null,n.transferId=null,V()},X=>{if(!D){V();return}h(it.PROCESSING_REVERT_ERROR),c("process-revert-error"),k(X)}),h(it.IDLE),c("process-revert")}),R=(y,D,V)=>{const k=y.split("."),B=k[0],X=k.pop();let N=o;k.forEach(W=>N=N[W]),JSON.stringify(N[X])!==JSON.stringify(D)&&(N[X]=D,c("metadata-update",{key:B,value:o[B],silent:V}))},L=A(_({id:{get:()=>i},origin:{get:()=>t,set:y=>t=y},serverId:{get:()=>n.serverFileReference},transferId:{get:()=>n.transferId},status:{get:()=>n.status},filename:{get:()=>n.file.name},filenameWithoutExtension:{get:()=>Og(n.file.name)},fileExtension:{get:d},fileType:{get:u},fileSize:{get:f},file:{get:E},relativePath:{get:()=>n.file._relativePath},source:{get:()=>n.source},getMetadata:y=>yg(y?o[y]:o),setMetadata:(y,D,V)=>{if(ae(y)){const k=y;return Object.keys(k).forEach(B=>{R(B,k[B],D)}),y}return R(y,D,V),D},extend:(y,D)=>P[y]=D,abortLoad:I,retryLoad:b,requestProcessing:C,abortProcessing:w,load:g,process:v,revert:x},Ru()),{freeze:()=>n.frozen=!0,release:()=>n.released=!0,released:{get:()=>n.released},archive:()=>n.archived=!0,archived:{get:()=>n.archived}}),P=qn(L);return P},M_=(t,e)=>on(e)?0:je(e)?t.findIndex(s=>s.id===e):-1,Qf=(t,e)=>{const s=M_(t,e);if(!(s<0))return t[s]||null},Jf=(t,e,s,i,n,a)=>{const o=Fr(null,t,{method:"GET",responseType:"blob"});return o.onload=h=>{const c=h.getAllResponseHeaders(),d=pf(c).name||Oc(t);e(Pt("load",h.status,uo(h.response,d),c))},o.onerror=h=>{s(Pt("error",h.status,h.statusText,h.getAllResponseHeaders()))},o.onheaders=h=>{a(Pt("headers",h.status,null,h.getAllResponseHeaders()))},o.ontimeout=Gr(s),o.onprogress=i,o.onabort=n,o},Kf=t=>(t.indexOf("//")===0&&(t=location.protocol+t),t.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),$_=t=>(t.indexOf(":")>-1||t.indexOf("//")>-1)&&Kf(location.href)!==Kf(t),$c=t=>(...e)=>hr(t)?t(...e):t,N_=t=>!po(t.file),Nu=(t,e)=>{clearTimeout(e.listUpdateTimeout),e.listUpdateTimeout=setTimeout(()=>{t("DID_UPDATE_ITEMS",{items:ti(e.items)})},0)},tm=(t,...e)=>new Promise(s=>{if(!t)return s(!0);const i=t(...e);if(i==null)return s(!0);if(typeof i=="boolean")return s(i);typeof i.then=="function"&&i.then(s)}),Pu=(t,e)=>{t.items.sort((s,i)=>e(Je(s),Je(i)))},Es=(t,e)=>(o={})=>{var h=o,{query:s,success:i=()=>{},failure:n=()=>{}}=h,a=Ff(h,["query","success","failure"]);const c=dr(t.items,s);if(!c){n({error:Pt("error",0,"Item not found"),file:null});return}e(c,i,n,a||{})},P_=(t,e,s)=>({ABORT_ALL:()=>{ti(s.items).forEach(i=>{i.freeze(),i.abortLoad(),i.abortProcessing()})},DID_SET_FILES:({value:i=[]})=>{const n=i.map(o=>({source:o.source?o.source:o,options:o.options}));let a=ti(s.items);a.forEach(o=>{n.find(h=>h.source===o.source||h.source===o.file)||t("REMOVE_ITEM",{query:o,remove:!1})}),a=ti(s.items),n.forEach((o,h)=>{a.find(c=>c.source===o.source||c.file===o.source)||t("ADD_ITEM",A(_({},o),{interactionMethod:Ds.NONE,index:h}))})},DID_UPDATE_ITEM_METADATA:({id:i,action:n,change:a})=>{a.silent||(clearTimeout(s.itemUpdateTimeout),s.itemUpdateTimeout=setTimeout(()=>{const o=Qf(s.items,i);if(!e("IS_ASYNC")){Ks("SHOULD_PREPARE_OUTPUT",!1,{item:o,query:e,action:n,change:a}).then(u=>{const f=e("GET_BEFORE_PREPARE_FILE");f&&(u=f(o,u)),u&&t("REQUEST_PREPARE_OUTPUT",{query:i,item:o,success:E=>{t("DID_PREPARE_OUTPUT",{id:i,file:E})}},!0)});return}o.origin===Kt.LOCAL&&t("DID_LOAD_ITEM",{id:o.id,error:null,serverFileReference:o.source});const h=()=>{setTimeout(()=>{t("REQUEST_ITEM_PROCESSING",{query:i})},32)},c=u=>{o.revert(To(s.options.server.url,s.options.server.revert),e("GET_FORCE_REVERT")).then(u?h:()=>{}).catch(()=>{})},d=u=>{o.abortProcessing().then(u?h:()=>{})};if(o.status===it.PROCESSING_COMPLETE)return c(s.options.instantUpload);if(o.status===it.PROCESSING)return d(s.options.instantUpload);s.options.instantUpload&&h()},0))},MOVE_ITEM:({query:i,index:n})=>{const a=dr(s.items,i);if(!a)return;const o=s.items.indexOf(a);n=Tg(n,0,s.items.length-1),o!==n&&s.items.splice(n,0,s.items.splice(o,1)[0])},SORT:({compare:i})=>{Pu(s,i),t("DID_SORT_ITEMS",{items:e("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:i,index:n,interactionMethod:a,success:o=()=>{},failure:h=()=>{}})=>{let c=n;if(n===-1||typeof n=="undefined"){const g=e("GET_ITEM_INSERT_LOCATION"),b=e("GET_TOTAL_ITEMS");c=g==="before"?0:b}const d=e("GET_IGNORED_FILES"),u=g=>po(g)?!d.includes(g.name.toLowerCase()):!on(g),E=i.filter(u).map(g=>new Promise((b,I)=>{t("ADD_ITEM",{interactionMethod:a,source:g.source||g,success:b,failure:I,index:c++,options:g.options||{}})}));Promise.all(E).then(o).catch(h)},ADD_ITEM:({source:i,index:n=-1,interactionMethod:a,success:o=()=>{},failure:h=()=>{},options:c={}})=>{if(on(i)){h({error:Pt("error",0,"No source"),file:null});return}if(po(i)&&s.options.ignoredFiles.includes(i.name.toLowerCase()))return;if(!d_(s)){if(s.options.allowMultiple||!s.options.allowMultiple&&!s.options.allowReplace){const w=Pt("warning",0,"Max files");t("DID_THROW_MAX_FILES",{source:i,error:w}),h({error:w,file:null});return}const C=ti(s.items)[0];if(C.status===it.PROCESSING_COMPLETE||C.status===it.PROCESSING_REVERT_ERROR){const w=e("GET_FORCE_REVERT");if(C.revert(To(s.options.server.url,s.options.server.revert),w).then(()=>{w&&t("ADD_ITEM",{source:i,index:n,interactionMethod:a,success:o,failure:h,options:c})}).catch(()=>{}),w)return}t("REMOVE_ITEM",{query:C.id})}const d=c.type==="local"?Kt.LOCAL:c.type==="limbo"?Kt.LIMBO:Kt.INPUT,u=A_(d,d===Kt.INPUT?null:i,c.file);Object.keys(c.metadata||{}).forEach(C=>{u.setMetadata(C,c.metadata[C])}),jr("DID_CREATE_ITEM",u,{query:e,dispatch:t});const f=e("GET_ITEM_INSERT_LOCATION");s.options.itemInsertLocationFreedom||(n=f==="before"?-1:s.items.length),p_(s.items,u,n),hr(f)&&i&&Pu(s,f);const E=u.id;u.on("init",()=>{t("DID_INIT_ITEM",{id:E})}),u.on("load-init",()=>{t("DID_START_ITEM_LOAD",{id:E})}),u.on("load-meta",()=>{t("DID_UPDATE_ITEM_META",{id:E})}),u.on("load-progress",C=>{t("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:E,progress:C})}),u.on("load-request-error",C=>{const w=$c(s.options.labelFileLoadError)(C);if(C.code>=400&&C.code<500){t("DID_THROW_ITEM_INVALID",{id:E,error:C,status:{main:w,sub:`${C.code} (${C.body})`}}),h({error:C,file:Je(u)});return}t("DID_THROW_ITEM_LOAD_ERROR",{id:E,error:C,status:{main:w,sub:s.options.labelTapToRetry}})}),u.on("load-file-error",C=>{t("DID_THROW_ITEM_INVALID",{id:E,error:C.status,status:C.status}),h({error:C.status,file:Je(u)})}),u.on("load-abort",()=>{t("REMOVE_ITEM",{query:E})}),u.on("load-skip",()=>{t("COMPLETE_LOAD_ITEM",{query:E,item:u,data:{source:i,success:o}})}),u.on("load",()=>{const C=w=>{if(!w){t("REMOVE_ITEM",{query:E});return}u.on("metadata-update",x=>{t("DID_UPDATE_ITEM_METADATA",{id:E,change:x})}),Ks("SHOULD_PREPARE_OUTPUT",!1,{item:u,query:e}).then(x=>{const R=e("GET_BEFORE_PREPARE_FILE");R&&(x=R(u,x));const O=()=>{t("COMPLETE_LOAD_ITEM",{query:E,item:u,data:{source:i,success:o}}),Nu(t,s)};if(x){t("REQUEST_PREPARE_OUTPUT",{query:E,item:u,success:L=>{t("DID_PREPARE_OUTPUT",{id:E,file:L}),O()}},!0);return}O()})};Ks("DID_LOAD_ITEM",u,{query:e,dispatch:t}).then(()=>{tm(e("GET_BEFORE_ADD_FILE"),Je(u)).then(C)}).catch(w=>{if(!w||!w.error||!w.status)return C(!1);t("DID_THROW_ITEM_INVALID",{id:E,error:w.error,status:w.status})})}),u.on("process-start",()=>{t("DID_START_ITEM_PROCESSING",{id:E})}),u.on("process-progress",C=>{t("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:E,progress:C})}),u.on("process-error",C=>{t("DID_THROW_ITEM_PROCESSING_ERROR",{id:E,error:C,status:{main:$c(s.options.labelFileProcessingError)(C),sub:s.options.labelTapToRetry}})}),u.on("process-revert-error",C=>{t("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:E,error:C,status:{main:$c(s.options.labelFileProcessingRevertError)(C),sub:s.options.labelTapToRetry}})}),u.on("process-complete",C=>{t("DID_COMPLETE_ITEM_PROCESSING",{id:E,error:null,serverFileReference:C}),t("DID_DEFINE_VALUE",{id:E,value:C})}),u.on("process-abort",()=>{t("DID_ABORT_ITEM_PROCESSING",{id:E})}),u.on("process-revert",()=>{t("DID_REVERT_ITEM_PROCESSING",{id:E}),t("DID_DEFINE_VALUE",{id:E,value:null})}),t("DID_ADD_ITEM",{id:E,index:n,interactionMethod:a}),Nu(t,s);const{url:g,load:b,restore:I,fetch:v}=s.options.server||{};u.load(i,x_(d===Kt.INPUT?je(i)&&$_(i)&&v?$u(g,v):Jf:d===Kt.LIMBO?$u(g,I):$u(g,b)),(C,w,x)=>{Ks("LOAD_FILE",C,{query:e}).then(w).catch(x)})},REQUEST_PREPARE_OUTPUT:({item:i,success:n,failure:a=()=>{}})=>{const o={error:Pt("error",0,"Item not found"),file:null};if(i.archived)return a(o);Ks("PREPARE_OUTPUT",i.file,{query:e,item:i}).then(h=>{Ks("COMPLETE_PREPARE_OUTPUT",h,{query:e,item:i}).then(c=>{if(i.archived)return a(o);n(c)})})},COMPLETE_LOAD_ITEM:({item:i,data:n})=>{const{success:a,source:o}=n,h=e("GET_ITEM_INSERT_LOCATION");if(hr(h)&&o&&Pu(s,h),t("DID_LOAD_ITEM",{id:i.id,error:null,serverFileReference:i.origin===Kt.INPUT?null:o}),a(Je(i)),i.origin===Kt.LOCAL){t("DID_LOAD_LOCAL_ITEM",{id:i.id});return}if(i.origin===Kt.LIMBO){t("DID_COMPLETE_ITEM_PROCESSING",{id:i.id,error:null,serverFileReference:o}),t("DID_DEFINE_VALUE",{id:i.id,value:i.serverId||o});return}e("IS_ASYNC")&&s.options.instantUpload&&t("REQUEST_ITEM_PROCESSING",{query:i.id})},RETRY_ITEM_LOAD:Es(s,i=>{i.retryLoad()}),REQUEST_ITEM_PREPARE:Es(s,(i,n,a)=>{t("REQUEST_PREPARE_OUTPUT",{query:i.id,item:i,success:o=>{t("DID_PREPARE_OUTPUT",{id:i.id,file:o}),n({file:i,output:o})},failure:a},!0)}),REQUEST_ITEM_PROCESSING:Es(s,(i,n,a)=>{if(!(i.status===it.IDLE||i.status===it.PROCESSING_ERROR)){const h=()=>t("REQUEST_ITEM_PROCESSING",{query:i,success:n,failure:a}),c=()=>document.hidden?h():setTimeout(h,32);i.status===it.PROCESSING_COMPLETE||i.status===it.PROCESSING_REVERT_ERROR?i.revert(To(s.options.server.url,s.options.server.revert),e("GET_FORCE_REVERT")).then(c).catch(()=>{}):i.status===it.PROCESSING&&i.abortProcessing().then(c);return}i.status!==it.PROCESSING_QUEUED&&(i.requestProcessing(),t("DID_REQUEST_ITEM_PROCESSING",{id:i.id}),t("PROCESS_ITEM",{query:i,success:n,failure:a},!0))}),PROCESS_ITEM:Es(s,(i,n,a)=>{const o=e("GET_MAX_PARALLEL_UPLOADS");if(e("GET_ITEMS_BY_STATUS",it.PROCESSING).length===o){s.processingQueue.push({id:i.id,success:n,failure:a});return}if(i.status===it.PROCESSING)return;const c=()=>{const u=s.processingQueue.shift();if(!u)return;const{id:f,success:E,failure:g}=u,b=dr(s.items,f);if(!b||b.archived){c();return}t("PROCESS_ITEM",{query:f,success:E,failure:g},!0)};i.onOnce("process-complete",()=>{n(Je(i)),c();const u=s.options.server;if(s.options.instantUpload&&i.origin===Kt.LOCAL&&hr(u.remove)){const g=()=>{};i.origin=Kt.LIMBO,s.options.server.remove(i.source,g,g)}e("GET_ITEMS_BY_STATUS",it.PROCESSING_COMPLETE).length===s.items.length&&t("DID_COMPLETE_ITEM_PROCESSING_ALL")}),i.onOnce("process-error",u=>{a({error:u,file:Je(i)}),c()});const d=s.options;i.process(y_(C_(d.server.url,d.server.process,d.name,{chunkTransferId:i.transferId,chunkServer:d.server.patch,chunkUploads:d.chunkUploads,chunkForce:d.chunkForce,chunkSize:d.chunkSize,chunkRetryDelays:d.chunkRetryDelays}),{allowMinimumUploadDuration:e("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(u,f,E)=>{Ks("PREPARE_OUTPUT",u,{query:e,item:i}).then(g=>{t("DID_PREPARE_OUTPUT",{id:i.id,file:g}),f(g)}).catch(E)})}),RETRY_ITEM_PROCESSING:Es(s,i=>{t("REQUEST_ITEM_PROCESSING",{query:i})}),REQUEST_REMOVE_ITEM:Es(s,i=>{tm(e("GET_BEFORE_REMOVE_FILE"),Je(i)).then(n=>{n&&t("REMOVE_ITEM",{query:i})})}),RELEASE_ITEM:Es(s,i=>{i.release()}),REMOVE_ITEM:Es(s,(i,n,a,o)=>{const h=()=>{const d=i.id;Qf(s.items,d).archive(),t("DID_REMOVE_ITEM",{error:null,id:d,item:i}),Nu(t,s),n(Je(i))},c=s.options.server;i.origin===Kt.LOCAL&&c&&hr(c.remove)&&o.remove!==!1?(t("DID_START_ITEM_REMOVE",{id:i.id}),c.remove(i.source,()=>h(),d=>{t("DID_THROW_ITEM_REMOVE_ERROR",{id:i.id,error:Pt("error",0,d,null),status:{main:$c(s.options.labelFileRemoveError)(d),sub:s.options.labelTapToRetry}})})):((o.revert&&i.origin!==Kt.LOCAL&&i.serverId!==null||s.options.chunkUploads&&i.file.size>s.options.chunkSize||s.options.chunkUploads&&s.options.chunkForce)&&i.revert(To(s.options.server.url,s.options.server.revert),e("GET_FORCE_REVERT")),h())}),ABORT_ITEM_LOAD:Es(s,i=>{i.abortLoad()}),ABORT_ITEM_PROCESSING:Es(s,i=>{if(i.serverId){t("REVERT_ITEM_PROCESSING",{id:i.id});return}i.abortProcessing().then(()=>{s.options.instantUpload&&t("REMOVE_ITEM",{query:i.id})})}),REQUEST_REVERT_ITEM_PROCESSING:Es(s,i=>{if(!s.options.instantUpload){t("REVERT_ITEM_PROCESSING",{query:i});return}const n=h=>{h&&t("REVERT_ITEM_PROCESSING",{query:i})},a=e("GET_BEFORE_REMOVE_FILE");if(!a)return n(!0);const o=a(Je(i));if(o==null)return n(!0);if(typeof o=="boolean")return n(o);typeof o.then=="function"&&o.then(n)}),REVERT_ITEM_PROCESSING:Es(s,i=>{i.revert(To(s.options.server.url,s.options.server.revert),e("GET_FORCE_REVERT")).then(()=>{(s.options.instantUpload||N_(i))&&t("REMOVE_ITEM",{query:i.id})}).catch(()=>{})}),SET_OPTIONS:({options:i})=>{const n=Object.keys(i),a=D_.filter(h=>n.includes(h));[...a,...Object.keys(i).filter(h=>!a.includes(h))].forEach(h=>{t(`SET_${Su(h,"_").toUpperCase()}`,{value:i[h]})})}}),D_=["server"],ff=t=>t,ln=t=>document.createElement(t),Dt=(t,e)=>{let s=t.childNodes[0];s?e!==s.nodeValue&&(s.nodeValue=e):(s=document.createTextNode(e),t.appendChild(s))},em=(t,e,s,i)=>{const n=(i%360-90)*Math.PI/180;return{x:t+s*Math.cos(n),y:e+s*Math.sin(n)}},F_=(t,e,s,i,n,a)=>{const o=em(t,e,s,n),h=em(t,e,s,i);return["M",o.x,o.y,"A",s,s,0,a,0,h.x,h.y].join(" ")},G_=(t,e,s,i,n)=>{let a=1;return n>i&&n-i<=.5&&(a=0),i>n&&i-n>=.5&&(a=0),F_(t,e,s,Math.min(.9999,i)*360,Math.min(.9999,n)*360,a)},B_=({root:t,props:e})=>{e.spin=!1,e.progress=0,e.opacity=0;const s=bh("svg");t.ref.path=bh("path",{"stroke-width":2,"stroke-linecap":"round"}),s.appendChild(t.ref.path),t.ref.svg=s,t.appendChild(s)},k_=({root:t,props:e})=>{if(e.opacity===0)return;e.align&&(t.element.dataset.align=e.align);const s=parseInt(kt(t.ref.path,"stroke-width"),10),i=t.rect.element.width*.5;let n=0,a=0;e.spin?(n=0,a=.5):(n=0,a=e.progress);const o=G_(i,i,i-s,n,a);kt(t.ref.path,"d",o),kt(t.ref.path,"stroke-opacity",e.spin||e.progress>0?1:0)},sm=jt({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:B_,write:k_,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),j_=({root:t,props:e})=>{t.element.innerHTML=(e.icon||"")+`<span>${e.label}</span>`,e.isDisabled=!1},U_=({root:t,props:e})=>{const{isDisabled:s}=e,i=t.query("GET_DISABLED")||e.opacity===0;i&&!s?(e.isDisabled=!0,kt(t.element,"disabled","disabled")):!i&&s&&(e.isDisabled=!1,t.element.removeAttribute("disabled"))},Lg=jt({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:j_,write:U_}),Ag=(t,e=".",s=1e3,i={})=>{const{labelBytes:n="bytes",labelKilobytes:a="KB",labelMegabytes:o="MB",labelGigabytes:h="GB"}=i;t=Math.round(Math.abs(t));const c=s,d=s*s,u=s*s*s;return t<c?`${t} ${n}`:t<d?`${Math.floor(t/c)} ${a}`:t<u?`${im(t/d,1,e)} ${o}`:`${im(t/u,2,e)} ${h}`},im=(t,e,s)=>t.toFixed(e).split(".").filter(i=>i!=="0").join(s),V_=({root:t,props:e})=>{const s=ln("span");s.className="filepond--file-info-main",kt(s,"aria-hidden","true"),t.appendChild(s),t.ref.fileName=s;const i=ln("span");i.className="filepond--file-info-sub",t.appendChild(i),t.ref.fileSize=i,Dt(i,t.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),Dt(s,ff(t.query("GET_ITEM_NAME",e.id)))},Wu=({root:t,props:e})=>{Dt(t.ref.fileSize,Ag(t.query("GET_ITEM_SIZE",e.id),".",t.query("GET_FILE_SIZE_BASE"),t.query("GET_FILE_SIZE_LABELS",t.query))),Dt(t.ref.fileName,ff(t.query("GET_ITEM_NAME",e.id)))},nm=({root:t,props:e})=>{if(go(t.query("GET_ITEM_SIZE",e.id))){Wu({root:t,props:e});return}Dt(t.ref.fileSize,t.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},z_=jt({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:Ue({DID_LOAD_ITEM:Wu,DID_UPDATE_ITEM_META:Wu,DID_THROW_ITEM_LOAD_ERROR:nm,DID_THROW_ITEM_INVALID:nm}),didCreateView:t=>{jr("CREATE_VIEW",A(_({},t),{view:t}))},create:V_,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Mg=t=>Math.round(t*100),W_=({root:t})=>{const e=ln("span");e.className="filepond--file-status-main",t.appendChild(e),t.ref.main=e;const s=ln("span");s.className="filepond--file-status-sub",t.appendChild(s),t.ref.sub=s,$g({root:t,action:{progress:null}})},$g=({root:t,action:e})=>{const s=e.progress===null?t.query("GET_LABEL_FILE_LOADING"):`${t.query("GET_LABEL_FILE_LOADING")} ${Mg(e.progress)}%`;Dt(t.ref.main,s),Dt(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},H_=({root:t,action:e})=>{const s=e.progress===null?t.query("GET_LABEL_FILE_PROCESSING"):`${t.query("GET_LABEL_FILE_PROCESSING")} ${Mg(e.progress)}%`;Dt(t.ref.main,s),Dt(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},q_=({root:t})=>{Dt(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING")),Dt(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},Y_=({root:t})=>{Dt(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_ABORTED")),Dt(t.ref.sub,t.query("GET_LABEL_TAP_TO_RETRY"))},X_=({root:t})=>{Dt(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),Dt(t.ref.sub,t.query("GET_LABEL_TAP_TO_UNDO"))},rm=({root:t})=>{Dt(t.ref.main,""),Dt(t.ref.sub,"")},xo=({root:t,action:e})=>{Dt(t.ref.main,e.status.main),Dt(t.ref.sub,e.status.sub)},Z_=jt({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:Ue({DID_LOAD_ITEM:rm,DID_REVERT_ITEM_PROCESSING:rm,DID_REQUEST_ITEM_PROCESSING:q_,DID_ABORT_ITEM_PROCESSING:Y_,DID_COMPLETE_ITEM_PROCESSING:X_,DID_UPDATE_ITEM_PROCESS_PROGRESS:H_,DID_UPDATE_ITEM_LOAD_PROGRESS:$g,DID_THROW_ITEM_LOAD_ERROR:xo,DID_THROW_ITEM_INVALID:xo,DID_THROW_ITEM_PROCESSING_ERROR:xo,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:xo,DID_THROW_ITEM_REMOVE_ERROR:xo}),didCreateView:t=>{jr("CREATE_VIEW",A(_({},t),{view:t}))},create:W_,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),Hu={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},qu=[];Lt(Hu,t=>{qu.push(t)});const rs=t=>{if(Yu(t)==="right")return 0;const e=t.ref.buttonRemoveItem.rect.element;return e.hidden?null:e.width+e.left},Q_=t=>t.ref.buttonAbortItemLoad.rect.element.width,Nc=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.height/4),J_=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.left/2),K_=t=>t.query("GET_STYLE_LOAD_INDICATOR_POSITION"),tw=t=>t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),Yu=t=>t.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),ew={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:K_},processProgressIndicator:{opacity:0,align:tw},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},am={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:rs},status:{translateX:rs}},Du={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},la={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:rs},status:{translateX:rs,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:rs},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:Yu},info:{translateX:rs},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:Yu},buttonRemoveItem:{opacity:1},info:{translateX:rs},status:{opacity:1,translateX:rs}},DID_LOAD_ITEM:am,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:rs},status:{translateX:rs}},DID_START_ITEM_PROCESSING:Du,DID_REQUEST_ITEM_PROCESSING:Du,DID_UPDATE_ITEM_PROCESS_PROGRESS:Du,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:rs}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:rs},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:am},sw=jt({create:({root:t})=>{t.element.innerHTML=t.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),iw=({root:t,props:e})=>{const s=Object.keys(Hu).reduce((b,I)=>(b[I]=_({},Hu[I]),b),{}),{id:i}=e,n=t.query("GET_ALLOW_REVERT"),a=t.query("GET_ALLOW_REMOVE"),o=t.query("GET_ALLOW_PROCESS"),h=t.query("GET_INSTANT_UPLOAD"),c=t.query("IS_ASYNC"),d=t.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let u;c?o&&!n?u=b=>!/RevertItemProcessing/.test(b):!o&&n?u=b=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(b):!o&&!n&&(u=b=>!/Process/.test(b)):u=b=>!/Process/.test(b);const f=u?qu.filter(u):qu.concat();if(h&&n&&(s.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",s.RevertItemProcessing.icon="GET_ICON_REMOVE"),c&&!n){const b=la.DID_COMPLETE_ITEM_PROCESSING;b.info.translateX=J_,b.info.translateY=Nc,b.status.translateY=Nc,b.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(c&&!o&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(b=>{la[b].status.translateY=Nc}),la.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Q_),d&&n){s.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const b=la.DID_COMPLETE_ITEM_PROCESSING;b.info.translateX=rs,b.status.translateY=Nc,b.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}a||(s.RemoveItem.disabled=!0),Lt(s,(b,I)=>{const v=t.createChildView(Lg,{label:t.query(I.label),icon:t.query(I.icon),opacity:0});f.includes(b)&&t.appendChildView(v),I.disabled&&(v.element.setAttribute("disabled","disabled"),v.element.setAttribute("hidden","hidden")),v.element.dataset.align=t.query(`GET_STYLE_${I.align}`),v.element.classList.add(I.className),v.on("click",C=>{C.stopPropagation(),!I.disabled&&t.dispatch(I.action,{query:i})}),t.ref[`button${b}`]=v}),t.ref.processingCompleteIndicator=t.appendChildView(t.createChildView(sw)),t.ref.processingCompleteIndicator.element.dataset.align=t.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),t.ref.info=t.appendChildView(t.createChildView(z_,{id:i})),t.ref.status=t.appendChildView(t.createChildView(Z_,{id:i}));const E=t.appendChildView(t.createChildView(sm,{opacity:0,align:t.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));E.element.classList.add("filepond--load-indicator"),t.ref.loadProgressIndicator=E;const g=t.appendChildView(t.createChildView(sm,{opacity:0,align:t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));g.element.classList.add("filepond--process-indicator"),t.ref.processProgressIndicator=g,t.ref.activeStyles=[]},nw=({root:t,actions:e,props:s})=>{rw({root:t,actions:e,props:s});let i=e.concat().filter(n=>/^DID_/.test(n.type)).reverse().find(n=>la[n.type]);if(i){t.ref.activeStyles=[];const n=la[i.type];Lt(ew,(a,o)=>{const h=t.ref[a];Lt(o,(c,d)=>{const u=n[a]&&typeof n[a][c]!="undefined"?n[a][c]:d;t.ref.activeStyles.push({control:h,key:c,value:u})})})}t.ref.activeStyles.forEach(({control:n,key:a,value:o})=>{n[a]=typeof o=="function"?o(t):o})},rw=Ue({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:t,action:e})=>{t.ref.buttonAbortItemProcessing.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:t,action:e})=>{t.ref.buttonAbortItemLoad.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:t,action:e})=>{t.ref.buttonAbortItemRemoval.label=e.value},DID_REQUEST_ITEM_PROCESSING:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:t})=>{t.ref.loadProgressIndicator.spin=!0,t.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:t,action:e})=>{t.ref.loadProgressIndicator.spin=!1,t.ref.loadProgressIndicator.progress=e.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:t,action:e})=>{t.ref.processProgressIndicator.spin=!1,t.ref.processProgressIndicator.progress=e.progress}}),aw=jt({create:iw,write:nw,didCreateView:t=>{jr("CREATE_VIEW",A(_({},t),{view:t}))},name:"file"}),ow=({root:t,props:e})=>{t.ref.fileName=ln("legend"),t.appendChild(t.ref.fileName),t.ref.file=t.appendChildView(t.createChildView(aw,{id:e.id})),t.ref.data=!1},lw=({root:t,props:e})=>{Dt(t.ref.fileName,ff(t.query("GET_ITEM_NAME",e.id)))},cw=jt({create:ow,ignoreRect:!0,write:Ue({DID_LOAD_ITEM:lw}),didCreateView:t=>{jr("CREATE_VIEW",A(_({},t),{view:t}))},tag:"fieldset",name:"file-wrapper"}),om={type:"spring",damping:.6,mass:7},hw=({root:t,props:e})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:om},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:om},styles:["translateY"]}}].forEach(s=>{dw(t,s,e.name)}),t.element.classList.add(`filepond--${e.name}`),t.ref.scalable=null},dw=(t,e,s)=>{const i=jt({name:`panel-${e.name} filepond--${s}`,mixins:e.mixins,ignoreRectUpdate:!0}),n=t.createChildView(i,e.props);t.ref[e.name]=t.appendChildView(n)},uw=({root:t,props:e})=>{if((t.ref.scalable===null||e.scalable!==t.ref.scalable)&&(t.ref.scalable=fg(e.scalable)?e.scalable:!0,t.element.dataset.scalable=t.ref.scalable),!e.height)return;const s=t.ref.top.rect.element,i=t.ref.bottom.rect.element,n=Math.max(s.height+i.height,e.height);t.ref.center.translateY=s.height,t.ref.center.scaleY=(n-s.height-i.height)/100,t.ref.bottom.translateY=n-i.height},Ng=jt({name:"panel",read:({root:t,props:e})=>e.heightCurrent=t.ref.bottom.translateY,write:uw,create:hw,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),pw=t=>{const e=t.map(i=>i.id);let s;return{setIndex:i=>{s=i},getIndex:()=>s,getItemIndex:i=>e.indexOf(i.id)}},lm={type:"spring",stiffness:.75,damping:.45,mass:10},cm="spring",hm={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},fw=({root:t,props:e})=>{if(t.ref.handleClick=i=>t.dispatch("DID_ACTIVATE_ITEM",{id:e.id}),t.element.id=`filepond--item-${e.id}`,t.element.addEventListener("click",t.ref.handleClick),t.ref.container=t.appendChildView(t.createChildView(cw,{id:e.id})),t.ref.panel=t.appendChildView(t.createChildView(Ng,{name:"item-panel"})),t.ref.panel.height=null,e.markedForRemoval=!1,!t.query("GET_ALLOW_REORDER"))return;t.element.dataset.dragState="idle";const s=i=>{if(!i.isPrimary)return;let n=!1;const a={x:i.pageX,y:i.pageY};e.dragOrigin={x:t.translateX,y:t.translateY},e.dragCenter={x:i.offsetX,y:i.offsetY};const o=pw(t.query("GET_ACTIVE_ITEMS"));t.dispatch("DID_GRAB_ITEM",{id:e.id,dragState:o});const h=d=>{if(!d.isPrimary)return;d.stopPropagation(),d.preventDefault(),e.dragOffset={x:d.pageX-a.x,y:d.pageY-a.y},e.dragOffset.x*e.dragOffset.x+e.dragOffset.y*e.dragOffset.y>16&&!n&&(n=!0,t.element.removeEventListener("click",t.ref.handleClick)),t.dispatch("DID_DRAG_ITEM",{id:e.id,dragState:o})},c=d=>{d.isPrimary&&(document.removeEventListener("pointermove",h),document.removeEventListener("pointerup",c),e.dragOffset={x:d.pageX-a.x,y:d.pageY-a.y},t.dispatch("DID_DROP_ITEM",{id:e.id,dragState:o}),n&&setTimeout(()=>t.element.addEventListener("click",t.ref.handleClick),0))};document.addEventListener("pointermove",h),document.addEventListener("pointerup",c)};t.element.addEventListener("pointerdown",s)},mw=Ue({DID_UPDATE_PANEL_HEIGHT:({root:t,action:e})=>{t.height=e.height}}),gw=Ue({DID_GRAB_ITEM:({root:t,props:e})=>{e.dragOrigin={x:t.translateX,y:t.translateY}},DID_DRAG_ITEM:({root:t})=>{t.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:t,props:e})=>{e.dragOffset=null,e.dragOrigin=null,t.element.dataset.dragState="drop"}},({root:t,actions:e,props:s,shouldOptimize:i})=>{t.element.dataset.dragState==="drop"&&t.scaleX<=1&&(t.element.dataset.dragState="idle");let n=e.concat().filter(o=>/^DID_/.test(o.type)).reverse().find(o=>hm[o.type]);n&&n.type!==s.currentState&&(s.currentState=n.type,t.element.dataset.filepondItemState=hm[s.currentState]||"");const a=t.query("GET_ITEM_PANEL_ASPECT_RATIO")||t.query("GET_PANEL_ASPECT_RATIO");a?i||(t.height=t.rect.element.width*a):(mw({root:t,actions:e,props:s}),!t.height&&t.ref.container.rect.element.height>0&&(t.height=t.ref.container.rect.element.height)),i&&(t.ref.panel.height=null),t.ref.panel.height=t.height}),Ew=jt({create:fw,write:gw,destroy:({root:t,props:e})=>{t.element.removeEventListener("click",t.ref.handleClick),t.dispatch("RELEASE_ITEM",{query:e.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:cm,scaleY:cm,translateX:lm,translateY:lm,opacity:{type:"tween",duration:150}}}});var mf=(t,e)=>Math.max(1,Math.floor((t+1)/e));const gf=(t,e,s)=>{if(!s)return;const i=t.rect.element.width,n=e.length;let a=null;if(n===0||s.top<e[0].rect.element.top)return-1;const h=e[0].rect.element,c=h.marginLeft+h.marginRight,d=h.width+c,u=mf(i,d);if(u===1){for(let g=0;g<n;g++){const b=e[g],I=b.rect.outer.top+b.rect.element.height*.5;if(s.top<I)return g}return n}const f=h.marginTop+h.marginBottom,E=h.height+f;for(let g=0;g<n;g++){const b=g%u,I=Math.floor(g/u),v=b*d,C=I*E,w=C-h.marginTop,x=v+d,R=C+E+h.marginBottom;if(s.top<R&&s.top>w){if(s.left<x)return g;g!==n-1?a=g:a=null}}return a!==null?a:n},Pc={height:0,width:0,get getHeight(){return this.height},set setHeight(t){(this.height===0||t===0)&&(this.height=t)},get getWidth(){return this.width},set setWidth(t){(this.width===0||t===0)&&(this.width=t)},setDimensions:function(t,e){(this.height===0||t===0)&&(this.height=t),(this.width===0||e===0)&&(this.width=e)}},bw=({root:t})=>{kt(t.element,"role","list"),t.ref.lastItemSpanwDate=Date.now()},Iw=({root:t,action:e})=>{const{id:s,index:i,interactionMethod:n}=e;t.ref.addIndex=i;const a=Date.now();let o=a,h=1;if(n!==Ds.NONE){h=0;const c=t.query("GET_ITEM_INSERT_INTERVAL"),d=a-t.ref.lastItemSpanwDate;o=d<c?a+(c-d):a}t.ref.lastItemSpanwDate=o,t.appendChildView(t.createChildView(Ew,{spawnDate:o,id:s,opacity:h,interactionMethod:n}),i)},dm=(t,e,s,i=0,n=1)=>{t.dragOffset?(t.translateX=null,t.translateY=null,t.translateX=t.dragOrigin.x+t.dragOffset.x,t.translateY=t.dragOrigin.y+t.dragOffset.y,t.scaleX=1.025,t.scaleY=1.025):(t.translateX=e,t.translateY=s,Date.now()>t.spawnDate&&(t.opacity===0&&_w(t,e,s,i,n),t.scaleX=1,t.scaleY=1,t.opacity=1))},_w=(t,e,s,i,n)=>{t.interactionMethod===Ds.NONE?(t.translateX=null,t.translateX=e,t.translateY=null,t.translateY=s):t.interactionMethod===Ds.DROP?(t.translateX=null,t.translateX=e-i*20,t.translateY=null,t.translateY=s-n*10,t.scaleX=.8,t.scaleY=.8):t.interactionMethod===Ds.BROWSE?(t.translateY=null,t.translateY=s-30):t.interactionMethod===Ds.API&&(t.translateX=null,t.translateX=e-30,t.translateY=null)},ww=({root:t,action:e})=>{const{id:s}=e,i=t.childViews.find(n=>n.id===s);i&&(i.scaleX=.9,i.scaleY=.9,i.opacity=0,i.markedForRemoval=!0)},Fu=t=>t.rect.element.height+t.rect.element.marginBottom*.5+t.rect.element.marginTop*.5,vw=t=>t.rect.element.width+t.rect.element.marginLeft*.5+t.rect.element.marginRight*.5,Tw=({root:t,action:e})=>{const{id:s,dragState:i}=e,n=t.query("GET_ITEM",{id:s}),a=t.childViews.find(v=>v.id===s),o=t.childViews.length,h=i.getItemIndex(n);if(!a)return;const c={x:a.dragOrigin.x+a.dragOffset.x+a.dragCenter.x,y:a.dragOrigin.y+a.dragOffset.y+a.dragCenter.y},d=Fu(a),u=vw(a);let f=Math.floor(t.rect.outer.width/u);f>o&&(f=o);const E=Math.floor(o/f+1);Pc.setHeight=d*E,Pc.setWidth=u*f;var g={y:Math.floor(c.y/d),x:Math.floor(c.x/u),getGridIndex:function(){return c.y>Pc.getHeight||c.y<0||c.x>Pc.getWidth||c.x<0?h:this.y*f+this.x},getColIndex:function(){const C=t.query("GET_ACTIVE_ITEMS"),w=t.childViews.filter(k=>k.rect.element.height),x=C.map(k=>w.find(B=>B.id===k.id)),R=x.findIndex(k=>k===a),O=Fu(a),L=x.length;let P=L,y=0,D=0,V=0;for(let k=0;k<L;k++)if(y=Fu(x[k]),V=D,D=V+y,c.y<D){if(R>k){if(c.y<V+O){P=k;break}continue}P=k;break}return P}};const b=f>1?g.getGridIndex():g.getColIndex();t.dispatch("MOVE_ITEM",{query:a,index:b});const I=i.getIndex();if(I===void 0||I!==b){if(i.setIndex(b),I===void 0)return;t.dispatch("DID_REORDER_ITEMS",{items:t.query("GET_ACTIVE_ITEMS"),origin:h,target:b})}},xw=Ue({DID_ADD_ITEM:Iw,DID_REMOVE_ITEM:ww,DID_DRAG_ITEM:Tw}),Sw=({root:t,props:e,actions:s,shouldOptimize:i})=>{xw({root:t,props:e,actions:s});const{dragCoordinates:n}=e,a=t.rect.element.width,o=t.childViews.filter(x=>x.rect.element.height),h=t.query("GET_ACTIVE_ITEMS").map(x=>o.find(R=>R.id===x.id)).filter(x=>x),c=n?gf(t,h,n):null,d=t.ref.addIndex||null;t.ref.addIndex=null;let u=0,f=0,E=0;if(h.length===0)return;const g=h[0].rect.element,b=g.marginTop+g.marginBottom,I=g.marginLeft+g.marginRight,v=g.width+I,C=g.height+b,w=mf(a,v);if(w===1){let x=0,R=0;h.forEach((O,L)=>{if(c){let D=L-c;D===-2?R=-b*.25:D===-1?R=-b*.75:D===0?R=b*.75:D===1?R=b*.25:R=0}i&&(O.translateX=null,O.translateY=null),O.markedForRemoval||dm(O,0,x+R);let y=(O.rect.element.height+b)*(O.markedForRemoval?O.opacity:1);x+=y})}else{let x=0,R=0;h.forEach((O,L)=>{L===c&&(u=1),L===d&&(E+=1),O.markedForRemoval&&O.opacity<.5&&(f-=1);const P=L+E+u+f,y=P%w,D=Math.floor(P/w),V=y*v,k=D*C,B=Math.sign(V-x),X=Math.sign(k-R);x=V,R=k,!O.markedForRemoval&&(i&&(O.translateX=null,O.translateY=null),dm(O,V,k,B,X))})}},Rw=(t,e)=>e.filter(s=>s.data&&s.data.id?t.id===s.data.id:!0),Cw=jt({create:bw,write:Sw,tag:"ul",name:"list",didWriteView:({root:t})=>{t.childViews.filter(e=>e.markedForRemoval&&e.opacity===0&&e.resting).forEach(e=>{e._destroy(),t.removeChildView(e)})},filterFrameActionsForChild:Rw,mixins:{apis:["dragCoordinates"]}}),Ow=({root:t,props:e})=>{t.ref.list=t.appendChildView(t.createChildView(Cw)),e.dragCoordinates=null,e.overflowing=!1},yw=({root:t,props:e,action:s})=>{t.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(e.dragCoordinates={left:s.position.scopeLeft-t.ref.list.rect.element.left,top:s.position.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},Lw=({props:t})=>{t.dragCoordinates=null},Aw=Ue({DID_DRAG:yw,DID_END_DRAG:Lw}),Mw=({root:t,props:e,actions:s})=>{if(Aw({root:t,props:e,actions:s}),t.ref.list.dragCoordinates=e.dragCoordinates,e.overflowing&&!e.overflow&&(e.overflowing=!1,t.element.dataset.state="",t.height=null),e.overflow){const i=Math.round(e.overflow);i!==t.height&&(e.overflowing=!0,t.element.dataset.state="overflow",t.height=i)}},$w=jt({create:Ow,write:Mw,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),ei=(t,e,s,i="")=>{s?kt(t,e,i):t.removeAttribute(e)},Nw=t=>{if(!(!t||t.value==="")){try{t.value=""}catch(e){}if(t.value){const e=ln("form"),s=t.parentNode,i=t.nextSibling;e.appendChild(t),e.reset(),i?s.insertBefore(t,i):s.appendChild(t)}}},Pw=({root:t,props:e})=>{t.element.id=`filepond--browser-${e.id}`,kt(t.element,"name",t.query("GET_NAME")),kt(t.element,"aria-controls",`filepond--assistant-${e.id}`),kt(t.element,"aria-labelledby",`filepond--drop-label-${e.id}`),Pg({root:t,action:{value:t.query("GET_ACCEPTED_FILE_TYPES")}}),Dg({root:t,action:{value:t.query("GET_ALLOW_MULTIPLE")}}),Fg({root:t,action:{value:t.query("GET_ALLOW_DIRECTORIES_ONLY")}}),Xu({root:t}),Gg({root:t,action:{value:t.query("GET_REQUIRED")}}),Bg({root:t,action:{value:t.query("GET_CAPTURE_METHOD")}}),t.ref.handleChange=s=>{if(!t.element.value)return;const i=Array.from(t.element.files).map(n=>(n._relativePath=n.webkitRelativePath,n));setTimeout(()=>{e.onload(i),Nw(t.element)},250)},t.element.addEventListener("change",t.ref.handleChange)},Pg=({root:t,action:e})=>{t.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&ei(t.element,"accept",!!e.value,e.value?e.value.join(","):"")},Dg=({root:t,action:e})=>{ei(t.element,"multiple",e.value)},Fg=({root:t,action:e})=>{ei(t.element,"webkitdirectory",e.value)},Xu=({root:t})=>{const e=t.query("GET_DISABLED"),s=t.query("GET_ALLOW_BROWSE"),i=e||!s;ei(t.element,"disabled",i)},Gg=({root:t,action:e})=>{e.value?t.query("GET_TOTAL_ITEMS")===0&&ei(t.element,"required",!0):ei(t.element,"required",!1)},Bg=({root:t,action:e})=>{ei(t.element,"capture",!!e.value,e.value===!0?"":e.value)},um=({root:t})=>{const{element:e}=t;t.query("GET_TOTAL_ITEMS")>0?(ei(e,"required",!1),ei(e,"name",!1)):(ei(e,"name",!0,t.query("GET_NAME")),t.query("GET_CHECK_VALIDITY")&&e.setCustomValidity(""),t.query("GET_REQUIRED")&&ei(e,"required",!0))},Dw=({root:t})=>{t.query("GET_CHECK_VALIDITY")&&t.element.setCustomValidity(t.query("GET_LABEL_INVALID_FIELD"))},Fw=jt({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:Pw,destroy:({root:t})=>{t.element.removeEventListener("change",t.ref.handleChange)},write:Ue({DID_LOAD_ITEM:um,DID_REMOVE_ITEM:um,DID_THROW_ITEM_INVALID:Dw,DID_SET_DISABLED:Xu,DID_SET_ALLOW_BROWSE:Xu,DID_SET_ALLOW_DIRECTORIES_ONLY:Fg,DID_SET_ALLOW_MULTIPLE:Dg,DID_SET_ACCEPTED_FILE_TYPES:Pg,DID_SET_CAPTURE_METHOD:Bg,DID_SET_REQUIRED:Gg})}),pm={ENTER:13,SPACE:32},Gw=({root:t,props:e})=>{const s=ln("label");kt(s,"for",`filepond--browser-${e.id}`),kt(s,"id",`filepond--drop-label-${e.id}`),kt(s,"aria-hidden","true"),t.ref.handleKeyDown=i=>{(i.keyCode===pm.ENTER||i.keyCode===pm.SPACE)&&(i.preventDefault(),t.ref.label.click())},t.ref.handleClick=i=>{i.target===s||s.contains(i.target)||t.ref.label.click()},s.addEventListener("keydown",t.ref.handleKeyDown),t.element.addEventListener("click",t.ref.handleClick),kg(s,e.caption),t.appendChild(s),t.ref.label=s},kg=(t,e)=>{t.innerHTML=e;const s=t.querySelector(".filepond--label-action");return s&&kt(s,"tabindex","0"),e},Bw=jt({name:"drop-label",ignoreRect:!0,create:Gw,destroy:({root:t})=>{t.ref.label.addEventListener("keydown",t.ref.handleKeyDown),t.element.removeEventListener("click",t.ref.handleClick)},write:Ue({DID_SET_LABEL_IDLE:({root:t,action:e})=>{kg(t.ref.label,e.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),kw=jt({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),jw=({root:t})=>{const e=t.rect.element.width*.5,s=t.rect.element.height*.5;t.ref.blob=t.appendChildView(t.createChildView(kw,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:e,translateY:s}))},Uw=({root:t,action:e})=>{if(!t.ref.blob){jw({root:t});return}t.ref.blob.translateX=e.position.scopeLeft,t.ref.blob.translateY=e.position.scopeTop,t.ref.blob.scaleX=1,t.ref.blob.scaleY=1,t.ref.blob.opacity=1},Vw=({root:t})=>{t.ref.blob&&(t.ref.blob.opacity=0)},zw=({root:t})=>{t.ref.blob&&(t.ref.blob.scaleX=2.5,t.ref.blob.scaleY=2.5,t.ref.blob.opacity=0)},Ww=({root:t,props:e,actions:s})=>{Hw({root:t,props:e,actions:s});const{blob:i}=t.ref;s.length===0&&i&&i.opacity===0&&(t.removeChildView(i),t.ref.blob=null)},Hw=Ue({DID_DRAG:Uw,DID_DROP:zw,DID_END_DRAG:Vw}),qw=jt({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:Ww}),jg=(t,e)=>{try{const s=new DataTransfer;e.forEach(i=>{i instanceof File?s.items.add(i):s.items.add(new File([i],i.name,{type:i.type}))}),t.files=s.files}catch(s){return!1}return!0},Yw=({root:t})=>t.ref.fields={},Ou=(t,e)=>t.ref.fields[e],Ef=t=>{t.query("GET_ACTIVE_ITEMS").forEach(e=>{t.ref.fields[e.id]&&t.element.appendChild(t.ref.fields[e.id])})},fm=({root:t})=>Ef(t),Xw=({root:t,action:e})=>{const n=!(t.query("GET_ITEM",e.id).origin===Kt.LOCAL)&&t.query("SHOULD_UPDATE_FILE_INPUT"),a=ln("input");a.type=n?"file":"hidden",a.name=t.query("GET_NAME"),a.disabled=t.query("GET_DISABLED"),t.ref.fields[e.id]=a,Ef(t)},Zw=({root:t,action:e})=>{const s=Ou(t,e.id);if(!s||(e.serverFileReference!==null&&(s.value=e.serverFileReference),!t.query("SHOULD_UPDATE_FILE_INPUT")))return;const i=t.query("GET_ITEM",e.id);jg(s,[i.file])},Qw=({root:t,action:e})=>{t.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const s=Ou(t,e.id);s&&jg(s,[e.file])},0)},Jw=({root:t})=>{t.element.disabled=t.query("GET_DISABLED")},Kw=({root:t,action:e})=>{const s=Ou(t,e.id);s&&(s.parentNode&&s.parentNode.removeChild(s),delete t.ref.fields[e.id])},tv=({root:t,action:e})=>{const s=Ou(t,e.id);s&&(e.value===null?s.removeAttribute("value"):s.value=e.value,Ef(t))},ev=Ue({DID_SET_DISABLED:Jw,DID_ADD_ITEM:Xw,DID_LOAD_ITEM:Zw,DID_REMOVE_ITEM:Kw,DID_DEFINE_VALUE:tv,DID_PREPARE_OUTPUT:Qw,DID_REORDER_ITEMS:fm,DID_SORT_ITEMS:fm}),sv=jt({tag:"fieldset",name:"data",create:Yw,write:ev,ignoreRect:!0}),iv=t=>"getRootNode"in t?t.getRootNode():document,nv=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],rv=["css","csv","html","txt"],av={zip:"zip|compressed",epub:"application/epub+zip"},Ug=(t="")=>(t=t.toLowerCase(),nv.includes(t)?"image/"+(t==="jpg"?"jpeg":t==="svg"?"svg+xml":t):rv.includes(t)?"text/"+t:av[t]||""),bf=t=>new Promise((e,s)=>{const i=fv(t);if(i.length&&!ov(t))return e(i);lv(t).then(e)}),ov=t=>t.files?t.files.length>0:!1,lv=t=>new Promise((e,s)=>{const i=(t.items?Array.from(t.items):[]).filter(n=>cv(n)).map(n=>hv(n));if(!i.length){e(t.files?Array.from(t.files):[]);return}Promise.all(i).then(n=>{const a=[];n.forEach(o=>{a.push.apply(a,o)}),e(a.filter(o=>o).map(o=>(o._relativePath||(o._relativePath=o.webkitRelativePath),o)))}).catch(console.error)}),cv=t=>{if(Vg(t)){const e=If(t);if(e)return e.isFile||e.isDirectory}return t.kind==="file"},hv=t=>new Promise((e,s)=>{if(pv(t)){dv(If(t)).then(e).catch(s);return}e([t.getAsFile()])}),dv=t=>new Promise((e,s)=>{const i=[];let n=0,a=0;const o=()=>{a===0&&n===0&&e(i)},h=c=>{n++;const d=c.createReader(),u=()=>{d.readEntries(f=>{if(f.length===0){n--,o();return}f.forEach(E=>{E.isDirectory?h(E):(a++,E.file(g=>{const b=uv(g);E.fullPath&&(b._relativePath=E.fullPath),i.push(b),a--,o()}))}),u()},s)};u()};h(t)}),uv=t=>{if(t.type.length)return t;const e=t.lastModifiedDate,s=t.name,i=Ug(Cu(t.name));return i.length&&(t=t.slice(0,t.size,i),t.name=s,t.lastModifiedDate=e),t},pv=t=>Vg(t)&&(If(t)||{}).isDirectory,Vg=t=>"webkitGetAsEntry"in t,If=t=>t.webkitGetAsEntry(),fv=t=>{let e=[];try{if(e=gv(t),e.length)return e;e=mv(t)}catch(s){}return e},mv=t=>{let e=t.getData("url");return typeof e=="string"&&e.length?[e]:[]},gv=t=>{let e=t.getData("text/html");if(typeof e=="string"&&e.length){const s=e.match(/src\s*=\s*"(.+?)"/);if(s)return[s[1]]}return[]},_h=[],Br=t=>({pageLeft:t.pageX,pageTop:t.pageY,scopeLeft:t.offsetX||t.layerX,scopeTop:t.offsetY||t.layerY}),Ev=(t,e,s)=>{const i=bv(e),n={element:t,filterElement:s,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return n.destroy=i.addListener(n),n},bv=t=>{const e=_h.find(i=>i.element===t);if(e)return e;const s=Iv(t);return _h.push(s),s},Iv=t=>{const e=[],s={dragenter:wv,dragover:vv,dragleave:xv,drop:Tv},i={};Lt(s,(a,o)=>{i[a]=o(t,e),t.addEventListener(a,i[a],!1)});const n={element:t,addListener:a=>(e.push(a),()=>{e.splice(e.indexOf(a),1),e.length===0&&(_h.splice(_h.indexOf(n),1),Lt(s,o=>{t.removeEventListener(o,i[o],!1)}))})};return n},_v=(t,e)=>("elementFromPoint"in t||(t=document),t.elementFromPoint(e.x,e.y)),_f=(t,e)=>{const s=iv(e),i=_v(s,{x:t.pageX-window.pageXOffset,y:t.pageY-window.pageYOffset});return i===e||e.contains(i)};let zg=null;const Dc=(t,e)=>{try{t.dropEffect=e}catch(s){}},wv=(t,e)=>s=>{s.preventDefault(),zg=s.target,e.forEach(i=>{const{element:n,onenter:a}=i;_f(s,n)&&(i.state="enter",a(Br(s)))})},vv=(t,e)=>s=>{s.preventDefault();const i=s.dataTransfer;bf(i).then(n=>{let a=!1;e.some(o=>{const{filterElement:h,element:c,onenter:d,onexit:u,ondrag:f,allowdrop:E}=o;Dc(i,"copy");const g=E(n);if(!g){Dc(i,"none");return}if(_f(s,c)){if(a=!0,o.state===null){o.state="enter",d(Br(s));return}if(o.state="over",h&&!g){Dc(i,"none");return}f(Br(s))}else h&&!a&&Dc(i,"none"),o.state&&(o.state=null,u(Br(s)))})})},Tv=(t,e)=>s=>{s.preventDefault();const i=s.dataTransfer;bf(i).then(n=>{e.forEach(a=>{const{filterElement:o,element:h,ondrop:c,onexit:d,allowdrop:u}=a;if(a.state=null,!(o&&!_f(s,h))){if(!u(n))return d(Br(s));c(Br(s),n)}})})},xv=(t,e)=>s=>{zg===s.target&&e.forEach(i=>{const{onexit:n}=i;i.state=null,n(Br(s))})},Sv=(t,e,s)=>{t.classList.add("filepond--hopper");const{catchesDropsOnPage:i,requiresDropOnElement:n,filterItems:a=u=>u}=s,o=Ev(t,i?document.documentElement:t,n);let h="",c="";o.allowdrop=u=>e(a(u)),o.ondrop=(u,f)=>{const E=a(f);if(!e(E)){d.ondragend(u);return}c="drag-drop",d.onload(E,u)},o.ondrag=u=>{d.ondrag(u)},o.onenter=u=>{c="drag-over",d.ondragstart(u)},o.onexit=u=>{c="drag-exit",d.ondragend(u)};const d={updateHopperState:()=>{h!==c&&(t.dataset.hopperState=c,h=c)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{o.destroy()}};return d};let Zu=!1;const ua=[],Wg=t=>{const e=document.activeElement;if(e&&/textarea|input/i.test(e.nodeName)){let s=!1,i=e;for(;i!==document.body;){if(i.classList.contains("filepond--root")){s=!0;break}i=i.parentNode}if(!s)return}bf(t.clipboardData).then(s=>{s.length&&ua.forEach(i=>i(s))})},Rv=t=>{ua.includes(t)||(ua.push(t),!Zu&&(Zu=!0,document.addEventListener("paste",Wg)))},Cv=t=>{df(ua,ua.indexOf(t)),ua.length===0&&(document.removeEventListener("paste",Wg),Zu=!1)},Ov=()=>{const t=s=>{e.onload(s)},e={destroy:()=>{Cv(t)},onload:()=>{}};return Rv(t),e},yv=({root:t,props:e})=>{t.element.id=`filepond--assistant-${e.id}`,kt(t.element,"role","status"),kt(t.element,"aria-live","polite"),kt(t.element,"aria-relevant","additions")};let mm=null,gm=null;const Gu=[],yu=(t,e)=>{t.element.textContent=e},Lv=t=>{t.element.textContent=""},Hg=(t,e,s)=>{const i=t.query("GET_TOTAL_ITEMS");yu(t,`${s} ${e}, ${i} ${i===1?t.query("GET_LABEL_FILE_COUNT_SINGULAR"):t.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(gm),gm=setTimeout(()=>{Lv(t)},1500)},qg=t=>t.element.parentNode.contains(document.activeElement),Av=({root:t,action:e})=>{if(!qg(t))return;t.element.textContent="";const s=t.query("GET_ITEM",e.id);Gu.push(s.filename),clearTimeout(mm),mm=setTimeout(()=>{Hg(t,Gu.join(", "),t.query("GET_LABEL_FILE_ADDED")),Gu.length=0},750)},Mv=({root:t,action:e})=>{if(!qg(t))return;const s=e.item;Hg(t,s.filename,t.query("GET_LABEL_FILE_REMOVED"))},$v=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename,n=t.query("GET_LABEL_FILE_PROCESSING_COMPLETE");yu(t,`${i} ${n}`)},Em=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename,n=t.query("GET_LABEL_FILE_PROCESSING_ABORTED");yu(t,`${i} ${n}`)},Fc=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename;yu(t,`${e.status.main} ${i} ${e.status.sub}`)},Nv=jt({create:yv,ignoreRect:!0,ignoreRectUpdate:!0,write:Ue({DID_LOAD_ITEM:Av,DID_REMOVE_ITEM:Mv,DID_COMPLETE_ITEM_PROCESSING:$v,DID_ABORT_ITEM_PROCESSING:Em,DID_REVERT_ITEM_PROCESSING:Em,DID_THROW_ITEM_REMOVE_ERROR:Fc,DID_THROW_ITEM_LOAD_ERROR:Fc,DID_THROW_ITEM_INVALID:Fc,DID_THROW_ITEM_PROCESSING_ERROR:Fc}),tag:"span",name:"assistant"}),Yg=(t,e="-")=>t.replace(new RegExp(`${e}.`,"g"),s=>s.charAt(1).toUpperCase()),Xg=(t,e=16,s=!0)=>{let i=Date.now(),n=null;return(...a)=>{clearTimeout(n);const o=Date.now()-i,h=()=>{i=Date.now(),t(...a)};o<e?s||(n=setTimeout(h,e-o)):h()}},Pv=1e6,wh=t=>t.preventDefault(),Dv=({root:t,props:e})=>{const s=t.query("GET_ID");s&&(t.element.id=s);const i=t.query("GET_CLASS_NAME");i&&i.split(" ").filter(c=>c.length).forEach(c=>{t.element.classList.add(c)}),t.ref.label=t.appendChildView(t.createChildView(Bw,A(_({},e),{translateY:null,caption:t.query("GET_LABEL_IDLE")}))),t.ref.list=t.appendChildView(t.createChildView($w,{translateY:null})),t.ref.panel=t.appendChildView(t.createChildView(Ng,{name:"panel-root"})),t.ref.assistant=t.appendChildView(t.createChildView(Nv,_({},e))),t.ref.data=t.appendChildView(t.createChildView(sv,_({},e))),t.ref.measure=ln("div"),t.ref.measure.style.height="100%",t.element.appendChild(t.ref.measure),t.ref.bounds=null,t.query("GET_STYLES").filter(c=>!on(c.value)).map(({name:c,value:d})=>{t.element.dataset[c]=d}),t.ref.widthPrevious=null,t.ref.widthUpdated=Xg(()=>{t.ref.updateHistory=[],t.dispatch("DID_RESIZE_ROOT")},250),t.ref.previousAspectRatio=null,t.ref.updateHistory=[];const n=window.matchMedia("(pointer: fine) and (hover: hover)").matches,a="PointerEvent"in window;t.query("GET_ALLOW_REORDER")&&a&&!n&&(t.element.addEventListener("touchmove",wh,{passive:!1}),t.element.addEventListener("gesturestart",wh));const o=t.query("GET_CREDITS");if(o.length===2){const c=document.createElement("a");c.className="filepond--credits",c.setAttribute("aria-hidden","true"),c.href=o[0],c.tabindex=-1,c.target="_blank",c.rel="noopener noreferrer",c.textContent=o[1],t.element.appendChild(c),t.ref.credits=c}},Fv=({root:t,props:e,actions:s})=>{if(Uv({root:t,props:e,actions:s}),s.filter(L=>/^DID_SET_STYLE_/.test(L.type)).filter(L=>!on(L.data.value)).map(({type:L,data:P})=>{const y=Yg(L.substring(8).toLowerCase(),"_");t.element.dataset[y]=P.value,t.invalidateLayout()}),t.rect.element.hidden)return;t.rect.element.width!==t.ref.widthPrevious&&(t.ref.widthPrevious=t.rect.element.width,t.ref.widthUpdated());let i=t.ref.bounds;i||(i=t.ref.bounds=kv(t),t.element.removeChild(t.ref.measure),t.ref.measure=null);const{hopper:n,label:a,list:o,panel:h}=t.ref;n&&n.updateHopperState();const c=t.query("GET_PANEL_ASPECT_RATIO"),d=t.query("GET_ALLOW_MULTIPLE"),u=t.query("GET_TOTAL_ITEMS"),f=d?t.query("GET_MAX_FILES")||Pv:1,E=u===f,g=s.find(L=>L.type==="DID_ADD_ITEM");if(E&&g){const L=g.data.interactionMethod;a.opacity=0,d?a.translateY=-40:L===Ds.API?a.translateX=40:L===Ds.BROWSE?a.translateY=40:a.translateY=30}else E||(a.opacity=1,a.translateX=0,a.translateY=0);const b=Gv(t),I=Bv(t),v=a.rect.element.height,C=!d||E?0:v,w=E?o.rect.element.marginTop:0,x=u===0?0:o.rect.element.marginBottom,R=C+w+I.visual+x,O=C+w+I.bounds+x;if(o.translateY=Math.max(0,C-o.rect.element.marginTop)-b.top,c){const L=t.rect.element.width,P=L*c;c!==t.ref.previousAspectRatio&&(t.ref.previousAspectRatio=c,t.ref.updateHistory=[]);const y=t.ref.updateHistory;y.push(L);const D=2;if(y.length>D*2){const k=y.length,B=k-10;let X=0;for(let N=k;N>=B;N--)if(y[N]===y[N-2]&&X++,X>=D)return}h.scalable=!1,h.height=P;const V=P-C-(x-b.bottom)-(E?w:0);I.visual>V?o.overflow=V:o.overflow=null,t.height=P}else if(i.fixedHeight){h.scalable=!1;const L=i.fixedHeight-C-(x-b.bottom)-(E?w:0);I.visual>L?o.overflow=L:o.overflow=null}else if(i.cappedHeight){const L=R>=i.cappedHeight,P=Math.min(i.cappedHeight,R);h.scalable=!0,h.height=L?P:P-b.top-b.bottom;const y=P-C-(x-b.bottom)-(E?w:0);R>i.cappedHeight&&I.visual>y?o.overflow=y:o.overflow=null,t.height=Math.min(i.cappedHeight,O-b.top-b.bottom)}else{const L=u>0?b.top+b.bottom:0;h.scalable=!0,h.height=Math.max(v,R-L),t.height=Math.max(v,O-L)}t.ref.credits&&h.heightCurrent&&(t.ref.credits.style.transform=`translateY(${h.heightCurrent}px)`)},Gv=t=>{const e=t.ref.list.childViews[0].childViews[0];return e?{top:e.rect.element.marginTop,bottom:e.rect.element.marginBottom}:{top:0,bottom:0}},Bv=t=>{let e=0,s=0;const i=t.ref.list,n=i.childViews[0],a=n.childViews.filter(w=>w.rect.element.height),o=t.query("GET_ACTIVE_ITEMS").map(w=>a.find(x=>x.id===w.id)).filter(w=>w);if(o.length===0)return{visual:e,bounds:s};const h=n.rect.element.width,c=gf(n,o,i.dragCoordinates),d=o[0].rect.element,u=d.marginTop+d.marginBottom,f=d.marginLeft+d.marginRight,E=d.width+f,g=d.height+u,b=typeof c!="undefined"&&c>=0?1:0,I=o.find(w=>w.markedForRemoval&&w.opacity<.45)?-1:0,v=o.length+b+I,C=mf(h,E);return C===1?o.forEach(w=>{const x=w.rect.element.height+u;s+=x,e+=x*w.opacity}):(s=Math.ceil(v/C)*g,e=s),{visual:e,bounds:s}},kv=t=>{const e=t.ref.measureHeight||null;return{cappedHeight:parseInt(t.style.maxHeight,10)||null,fixedHeight:e===0?null:e}},wf=(t,e)=>{const s=t.query("GET_ALLOW_REPLACE"),i=t.query("GET_ALLOW_MULTIPLE"),n=t.query("GET_TOTAL_ITEMS");let a=t.query("GET_MAX_FILES");const o=e.length;return!i&&o>1?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:Pt("warning",0,"Max files")}),!0):(a=i?a:1,!i&&s?!1:go(a)&&n+o>a?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:Pt("warning",0,"Max files")}),!0):!1)},jv=(t,e,s)=>{const i=t.childViews[0];return gf(i,e,{left:s.scopeLeft-i.rect.element.left,top:s.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},bm=t=>{const e=t.query("GET_ALLOW_DROP"),s=t.query("GET_DISABLED"),i=e&&!s;if(i&&!t.ref.hopper){const n=Sv(t.element,a=>{const o=t.query("GET_BEFORE_DROP_FILE")||(()=>!0);return t.query("GET_DROP_VALIDATION")?a.every(c=>jr("ALLOW_HOPPER_ITEM",c,{query:t.query}).every(d=>d===!0)&&o(c)):!0},{filterItems:a=>{const o=t.query("GET_IGNORED_FILES");return a.filter(h=>po(h)?!o.includes(h.name.toLowerCase()):!0)},catchesDropsOnPage:t.query("GET_DROP_ON_PAGE"),requiresDropOnElement:t.query("GET_DROP_ON_ELEMENT")});n.onload=(a,o)=>{const c=t.ref.list.childViews[0].childViews.filter(u=>u.rect.element.height),d=t.query("GET_ACTIVE_ITEMS").map(u=>c.find(f=>f.id===u.id)).filter(u=>u);Ks("ADD_ITEMS",a,{dispatch:t.dispatch}).then(u=>{if(wf(t,u))return!1;t.dispatch("ADD_ITEMS",{items:u,index:jv(t.ref.list,d,o),interactionMethod:Ds.DROP})}),t.dispatch("DID_DROP",{position:o}),t.dispatch("DID_END_DRAG",{position:o})},n.ondragstart=a=>{t.dispatch("DID_START_DRAG",{position:a})},n.ondrag=Xg(a=>{t.dispatch("DID_DRAG",{position:a})}),n.ondragend=a=>{t.dispatch("DID_END_DRAG",{position:a})},t.ref.hopper=n,t.ref.drip=t.appendChildView(t.createChildView(qw))}else!i&&t.ref.hopper&&(t.ref.hopper.destroy(),t.ref.hopper=null,t.removeChildView(t.ref.drip))},Im=(t,e)=>{const s=t.query("GET_ALLOW_BROWSE"),i=t.query("GET_DISABLED"),n=s&&!i;n&&!t.ref.browser?t.ref.browser=t.appendChildView(t.createChildView(Fw,A(_({},e),{onload:a=>{Ks("ADD_ITEMS",a,{dispatch:t.dispatch}).then(o=>{if(wf(t,o))return!1;t.dispatch("ADD_ITEMS",{items:o,index:-1,interactionMethod:Ds.BROWSE})})}})),0):!n&&t.ref.browser&&(t.removeChildView(t.ref.browser),t.ref.browser=null)},_m=t=>{const e=t.query("GET_ALLOW_PASTE"),s=t.query("GET_DISABLED"),i=e&&!s;i&&!t.ref.paster?(t.ref.paster=Ov(),t.ref.paster.onload=n=>{Ks("ADD_ITEMS",n,{dispatch:t.dispatch}).then(a=>{if(wf(t,a))return!1;t.dispatch("ADD_ITEMS",{items:a,index:-1,interactionMethod:Ds.PASTE})})}):!i&&t.ref.paster&&(t.ref.paster.destroy(),t.ref.paster=null)},Uv=Ue({DID_SET_ALLOW_BROWSE:({root:t,props:e})=>{Im(t,e)},DID_SET_ALLOW_DROP:({root:t})=>{bm(t)},DID_SET_ALLOW_PASTE:({root:t})=>{_m(t)},DID_SET_DISABLED:({root:t,props:e})=>{bm(t),_m(t),Im(t,e),t.query("GET_DISABLED")?t.element.dataset.disabled="disabled":t.element.removeAttribute("data-disabled")}}),Vv=jt({name:"root",read:({root:t})=>{t.ref.measure&&(t.ref.measureHeight=t.ref.measure.offsetHeight)},create:Dv,write:Fv,destroy:({root:t})=>{t.ref.paster&&t.ref.paster.destroy(),t.ref.hopper&&t.ref.hopper.destroy(),t.element.removeEventListener("touchmove",wh),t.element.removeEventListener("gesturestart",wh)},mixins:{styles:["height"]}}),zv=(t={})=>{let e=null;const s=Ih(),i=oI(HI(s),[h_,XI(s)],[P_,YI(s)]);i.dispatch("SET_OPTIONS",{options:t});const n=()=>{document.hidden||i.dispatch("KICK")};document.addEventListener("visibilitychange",n);let a=null,o=!1,h=!1,c=null,d=null;const u=()=>{o||(o=!0),clearTimeout(a),a=setTimeout(()=>{o=!1,c=null,d=null,h&&(h=!1,i.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",u);const f=Vv(i,{id:hf()});let E=!1,g=!1;const b={_read:()=>{o&&(d=window.innerWidth,c||(c=d),!h&&d!==c&&(i.dispatch("DID_START_RESIZE"),h=!0)),g&&E&&(E=f.element.offsetParent===null),!E&&(f._read(),g=f.rect.element.hidden)},_write:F=>{const $=i.processActionQueue().filter(G=>!/^SET_/.test(G.type));E&&!$.length||(w($),E=f._write(F,$,h),JI(i.query("GET_ITEMS")),E&&i.processDispatchQueue())}},I=F=>$=>{const G={type:F};if(!$)return G;if($.hasOwnProperty("error")&&(G.error=$.error?_({},$.error):null),$.status&&(G.status=_({},$.status)),$.file&&(G.output=$.file),$.source)G.file=$.source;else if($.item||$.id){const U=$.item?$.item:i.query("GET_ITEM",$.id);G.file=U?Je(U):null}return $.items&&(G.items=$.items.map(Je)),/progress/.test(F)&&(G.progress=$.progress),$.hasOwnProperty("origin")&&$.hasOwnProperty("target")&&(G.origin=$.origin,G.target=$.target),G},v={DID_DESTROY:I("destroy"),DID_INIT:I("init"),DID_THROW_MAX_FILES:I("warning"),DID_INIT_ITEM:I("initfile"),DID_START_ITEM_LOAD:I("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:I("addfileprogress"),DID_LOAD_ITEM:I("addfile"),DID_THROW_ITEM_INVALID:[I("error"),I("addfile")],DID_THROW_ITEM_LOAD_ERROR:[I("error"),I("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[I("error"),I("removefile")],DID_PREPARE_OUTPUT:I("preparefile"),DID_START_ITEM_PROCESSING:I("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:I("processfileprogress"),DID_ABORT_ITEM_PROCESSING:I("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:I("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:I("processfiles"),DID_REVERT_ITEM_PROCESSING:I("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[I("error"),I("processfile")],DID_REMOVE_ITEM:I("removefile"),DID_UPDATE_ITEMS:I("updatefiles"),DID_ACTIVATE_ITEM:I("activatefile"),DID_REORDER_ITEMS:I("reorderfiles")},C=F=>{const $=_({pond:W},F);delete $.type,f.element.dispatchEvent(new CustomEvent(`FilePond:${F.type}`,{detail:$,bubbles:!0,cancelable:!0,composed:!0}));const G=[];F.hasOwnProperty("error")&&G.push(F.error),F.hasOwnProperty("file")&&G.push(F.file);const U=["type","error","file"];Object.keys(F).filter(Y=>!U.includes(Y)).forEach(Y=>G.push(F[Y])),W.fire(F.type,...G);const H=i.query(`GET_ON${F.type.toUpperCase()}`);H&&H(...G)},w=F=>{F.length&&F.filter($=>v[$.type]).forEach($=>{const G=v[$.type];(Array.isArray(G)?G:[G]).forEach(U=>{$.type==="DID_INIT_ITEM"?C(U($.data)):setTimeout(()=>{C(U($.data))},0)})})},x=F=>i.dispatch("SET_OPTIONS",{options:F}),R=F=>i.query("GET_ACTIVE_ITEM",F),O=F=>new Promise(($,G)=>{i.dispatch("REQUEST_ITEM_PREPARE",{query:F,success:U=>{$(U)},failure:U=>{G(U)}})}),L=(F,$={})=>new Promise((G,U)=>{D([{source:F,options:$}],{index:$.index}).then(H=>G(H&&H[0])).catch(U)}),P=F=>F.file&&F.id,y=(F,$)=>(typeof F=="object"&&!P(F)&&!$&&($=F,F=void 0),i.dispatch("REMOVE_ITEM",A(_({},$),{query:F})),i.query("GET_ACTIVE_ITEM",F)===null),D=(...F)=>new Promise(($,G)=>{const U=[],H={};if(Tu(F[0]))U.push.apply(U,F[0]),Object.assign(H,F[1]||{});else{const Y=F[F.length-1];typeof Y=="object"&&!(Y instanceof Blob)&&Object.assign(H,F.pop()),U.push(...F)}i.dispatch("ADD_ITEMS",{items:U,index:H.index,interactionMethod:Ds.API,success:$,failure:G})}),V=()=>i.query("GET_ACTIVE_ITEMS"),k=F=>new Promise(($,G)=>{i.dispatch("REQUEST_ITEM_PROCESSING",{query:F,success:U=>{$(U)},failure:U=>{G(U)}})}),B=(...F)=>{const $=Array.isArray(F[0])?F[0]:F,G=$.length?$:V();return Promise.all(G.map(O))},X=(...F)=>{const $=Array.isArray(F[0])?F[0]:F;if(!$.length){const G=V().filter(U=>!(U.status===it.IDLE&&U.origin===Kt.LOCAL)&&U.status!==it.PROCESSING&&U.status!==it.PROCESSING_COMPLETE&&U.status!==it.PROCESSING_REVERT_ERROR);return Promise.all(G.map(k))}return Promise.all($.map(k))},N=(...F)=>{const $=Array.isArray(F[0])?F[0]:F;let G;typeof $[$.length-1]=="object"?G=$.pop():Array.isArray(F[0])&&(G=F[1]);const U=V();return $.length?$.map(Y=>cr(Y)?U[Y]?U[Y].id:null:Y).filter(Y=>Y).map(Y=>y(Y,G)):Promise.all(U.map(Y=>y(Y,G)))},W=A(_(_(_({},Ru()),b),qI(i,s)),{setOptions:x,addFile:L,addFiles:D,getFile:R,processFile:k,prepareFile:O,removeFile:y,moveFile:(F,$)=>i.dispatch("MOVE_ITEM",{query:F,index:$}),getFiles:V,processFiles:X,removeFiles:N,prepareFiles:B,sort:F=>i.dispatch("SORT",{compare:F}),browse:()=>{var F=f.element.querySelector("input[type=file]");F&&F.click()},destroy:()=>{W.fire("destroy",f.element),i.dispatch("ABORT_ALL"),f._destroy(),window.removeEventListener("resize",u),document.removeEventListener("visibilitychange",n),i.dispatch("DID_DESTROY")},insertBefore:F=>Vf(f.element,F),insertAfter:F=>zf(f.element,F),appendTo:F=>F.appendChild(f.element),replaceElement:F=>{Vf(f.element,F),F.parentNode.removeChild(F),e=F},restoreElement:()=>{e&&(zf(e,f.element),f.element.parentNode.removeChild(f.element),e=null)},isAttachedTo:F=>f.element===F||e===F,element:{get:()=>f.element},status:{get:()=>i.query("GET_STATUS")}});return i.dispatch("DID_INIT"),qn(W)},Zg=(t={})=>{const e={};return Lt(Ih(),(i,n)=>{e[i]=n[0]}),zv(_(_({},e),t))},Wv=t=>t.charAt(0).toLowerCase()+t.slice(1),Hv=t=>Yg(t.replace(/^data-/,"")),Qg=(t,e)=>{Lt(e,(s,i)=>{Lt(t,(n,a)=>{const o=new RegExp(s);if(!o.test(n)||(delete t[n],i===!1))return;if(je(i)){t[i]=a;return}const c=i.group;ae(i)&&!t[c]&&(t[c]={}),t[c][Wv(n.replace(o,""))]=a}),i.mapping&&Qg(t[i.group],i.mapping)})},qv=(t,e={})=>{const s=[];Lt(t.attributes,n=>{s.push(t.attributes[n])});const i=s.filter(n=>n.name).reduce((n,a)=>{const o=kt(t,a.name);return n[Hv(a.name)]=o===a.name?!0:o,n},{});return Qg(i,e),i},Yv=(t,e={})=>{const s={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};jr("SET_ATTRIBUTE_TO_OPTION_MAP",s);const i=_({},e),n=qv(t.nodeName==="FIELDSET"?t.querySelector("input[type=file]"):t,s);Object.keys(n).forEach(o=>{ae(n[o])?(ae(i[o])||(i[o]={}),Object.assign(i[o],n[o])):i[o]=n[o]}),i.files=(e.files||[]).concat(Array.from(t.querySelectorAll("input:not([type=file])")).map(o=>({source:o.value,options:{type:o.dataset.type}})));const a=Zg(i);return t.files&&Array.from(t.files).forEach(o=>{a.addFile(o)}),a.replaceElement(t),a},Xv=(...t)=>aI(t[0])?Yv(...t):Zg(...t),Zv=["fire","_read","_write"],wm=t=>{const e={};return bg(t,e,Zv),e},Qv=(t,e)=>t.replace(/(?:{([a-zA-Z]+)})/g,(s,i)=>e[i]),Jv=t=>{const e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),s=URL.createObjectURL(e),i=new Worker(s);return{transfer:(n,a)=>{},post:(n,a,o)=>{const h=hf();i.onmessage=c=>{c.data.id===h&&a(c.data.message)},i.postMessage({id:h,message:n},o)},terminate:()=>{i.terminate(),URL.revokeObjectURL(s)}}},Kv=t=>new Promise((e,s)=>{const i=new Image;i.onload=()=>{e(i)},i.onerror=n=>{s(n)},i.src=t}),Jg=(t,e)=>{const s=t.slice(0,t.size,t.type);return s.lastModifiedDate=t.lastModifiedDate,s.name=e,s},tT=t=>Jg(t,t.name),vm=[],eT=t=>{if(vm.includes(t))return;vm.push(t);const e=t({addFilter:t_,utils:{Type:z,forin:Lt,isString:je,isFile:po,toNaturalFileSize:Ag,replaceInString:Qv,getExtensionFromFilename:Cu,getFilenameWithoutExtension:Og,guesstimateMimeType:Ug,getFileFromBlob:uo,getFilenameFromURL:Oc,createRoute:Ue,createWorker:Jv,createView:jt,createItemAPI:Je,loadImage:Kv,copyFile:tT,renameFile:Jg,createBlob:Sg,applyFilterChain:Ks,text:Dt,getNumericAspectRatioFromString:wg},views:{fileActionButton:Lg}});e_(e.options)},sT=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",iT=()=>"Promise"in window,nT=()=>"slice"in Blob.prototype,rT=()=>"URL"in window&&"createObjectURL"in window.URL,aT=()=>"visibilityState"in document,oT=()=>"performance"in window,lT=()=>"supports"in(window.CSS||{}),cT=()=>/MSIE|Trident/.test(window.navigator.userAgent),Qu=(()=>{const t=ug()&&!sT()&&aT()&&iT()&&nT()&&rT()&&oT()&&(lT()||cT());return()=>t})(),dn={apps:[]},hT="filepond",Ur=()=>{};let Kg={},tE={},eE={},Ju={},Yc=Ur,Xc=Ur,Ku=Ur,tp=Ur,ep=Ur,sp=Ur,ip=Ur;if(Qu()){MI(()=>{dn.apps.forEach(s=>s._read())},s=>{dn.apps.forEach(i=>i._write(s))});const t=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Qu,create:Yc,destroy:Xc,parse:Ku,find:tp,registerPlugin:ep,setOptions:ip}})),document.removeEventListener("DOMContentLoaded",t)};document.readyState!=="loading"?setTimeout(()=>t(),0):document.addEventListener("DOMContentLoaded",t);const e=()=>Lt(Ih(),(s,i)=>{Ju[s]=i[1]});Kg=_({},vg),eE=_({},Kt),tE=_({},it),Ju={},e(),Yc=(...s)=>{const i=Xv(...s);return i.on("destroy",Xc),dn.apps.push(i),wm(i)},Xc=s=>{const i=dn.apps.findIndex(n=>n.isAttachedTo(s));return i>=0?(dn.apps.splice(i,1)[0].restoreElement(),!0):!1},Ku=s=>Array.from(s.querySelectorAll(`.${hT}`)).filter(a=>!dn.apps.find(o=>o.isAttachedTo(a))).map(a=>Yc(a)),tp=s=>{const i=dn.apps.find(n=>n.isAttachedTo(s));return i?wm(i):null},ep=(...s)=>{s.forEach(eT),e()},sp=()=>{const s={};return Lt(Ih(),(i,n)=>{s[i]=n[0]}),s},ip=s=>(ae(s)&&(dn.apps.forEach(i=>{i.setOptions(s)}),s_(s)),sp())}var Tm=Object.freeze({__proto__:null,get FileOrigin(){return eE},get FileStatus(){return tE},get OptionTypes(){return Ju},get Status(){return Kg},get create(){return Yc},get destroy(){return Xc},get find(){return tp},get getOptions(){return sp},get parse(){return Ku},get registerPlugin(){return ep},get setOptions(){return ip},supported:Qu});/*!
* FilePondPluginFileValidateSize 2.2.7
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const sE=({addFilter:t,utils:e})=>{const{Type:s,replaceInString:i,toNaturalFileSize:n}=e;return t("ALLOW_HOPPER_ITEM",(a,{query:o})=>{if(!o("GET_ALLOW_FILE_SIZE_VALIDATION"))return!0;const h=o("GET_MAX_FILE_SIZE");if(h!==null&&a.size>h)return!1;const c=o("GET_MIN_FILE_SIZE");return!(c!==null&&a.size<c)}),t("LOAD_FILE",(a,{query:o})=>new Promise((h,c)=>{if(!o("GET_ALLOW_FILE_SIZE_VALIDATION"))return h(a);const d=o("GET_FILE_VALIDATE_SIZE_FILTER");if(d&&!d(a))return h(a);const u=o("GET_MAX_FILE_SIZE");if(u!==null&&a.size>u){c({status:{main:o("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:i(o("GET_LABEL_MAX_FILE_SIZE"),{filesize:n(u,".",o("GET_FILE_SIZE_BASE"),o("GET_FILE_SIZE_LABELS",o))})}});return}const f=o("GET_MIN_FILE_SIZE");if(f!==null&&a.size<f){c({status:{main:o("GET_LABEL_MIN_FILE_SIZE_EXCEEDED"),sub:i(o("GET_LABEL_MIN_FILE_SIZE"),{filesize:n(f,".",o("GET_FILE_SIZE_BASE"),o("GET_FILE_SIZE_LABELS",o))})}});return}const E=o("GET_MAX_TOTAL_FILE_SIZE");if(E!==null&&o("GET_ACTIVE_ITEMS").reduce((b,I)=>b+I.fileSize,0)>E){c({status:{main:o("GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED"),sub:i(o("GET_LABEL_MAX_TOTAL_FILE_SIZE"),{filesize:n(E,".",o("GET_FILE_SIZE_BASE"),o("GET_FILE_SIZE_LABELS",o))})}});return}h(a)})),{options:{allowFileSizeValidation:[!0,s.BOOLEAN],maxFileSize:[null,s.INT],minFileSize:[null,s.INT],maxTotalFileSize:[null,s.INT],fileValidateSizeFilter:[null,s.FUNCTION],labelMinFileSizeExceeded:["File is too small",s.STRING],labelMinFileSize:["Minimum file size is {filesize}",s.STRING],labelMaxFileSizeExceeded:["File is too large",s.STRING],labelMaxFileSize:["Maximum file size is {filesize}",s.STRING],labelMaxTotalFileSizeExceeded:["Maximum total size exceeded",s.STRING],labelMaxTotalFileSize:["Maximum total file size is {filesize}",s.STRING]}}},dT=typeof window!="undefined"&&typeof window.document!="undefined";dT&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:sE}));/*!
* FilePondPluginFileValidateType 1.2.8
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const iE=({addFilter:t,utils:e})=>{const{Type:s,isString:i,replaceInString:n,guesstimateMimeType:a,getExtensionFromFilename:o,getFilenameFromURL:h}=e,c=(g,b)=>{const I=(/^[^/]+/.exec(g)||[]).pop(),v=b.slice(0,-2);return I===v},d=(g,b)=>g.some(I=>/\*$/.test(I)?c(b,I):I===b),u=g=>{let b="";if(i(g)){const I=h(g),v=o(I);v&&(b=a(v))}else b=g.type;return b},f=(g,b,I)=>{if(b.length===0)return!0;const v=u(g);return I?new Promise((C,w)=>{I(g,v).then(x=>{d(b,x)?C():w()}).catch(w)}):d(b,v)},E=g=>b=>g[b]===null?!1:g[b]||b;return t("SET_ATTRIBUTE_TO_OPTION_MAP",g=>Object.assign(g,{accept:"acceptedFileTypes"})),t("ALLOW_HOPPER_ITEM",(g,{query:b})=>b("GET_ALLOW_FILE_TYPE_VALIDATION")?f(g,b("GET_ACCEPTED_FILE_TYPES")):!0),t("LOAD_FILE",(g,{query:b})=>new Promise((I,v)=>{if(!b("GET_ALLOW_FILE_TYPE_VALIDATION")){I(g);return}const C=b("GET_ACCEPTED_FILE_TYPES"),w=b("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),x=f(g,C,w),R=()=>{const O=C.map(E(b("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter(P=>P!==!1),L=O.filter(function(P,y){return O.indexOf(P)===y});v({status:{main:b("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:n(b("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:L.join(", "),allButLastType:L.slice(0,-1).join(", "),lastType:L[O.length-1]})}})};if(typeof x=="boolean")return x?I(g):R();x.then(()=>{I(g)}).catch(R)})),{options:{allowFileTypeValidation:[!0,s.BOOLEAN],acceptedFileTypes:[[],s.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",s.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",s.STRING],fileValidateTypeLabelExpectedTypesMap:[{},s.OBJECT],fileValidateTypeDetectType:[null,s.FUNCTION]}}},uT=typeof window!="undefined"&&typeof window.document!="undefined";uT&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:iE}));/*!
* FilePondPluginImageCrop 2.0.6
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const xm=t=>/^image/.test(t.type),nE=({addFilter:t,utils:e})=>{const{Type:s,isFile:i,getNumericAspectRatioFromString:n}=e,a=(d,u)=>!(!xm(d.file)||!u("GET_ALLOW_IMAGE_CROP")),o=d=>typeof d=="object",h=d=>typeof d=="number",c=(d,u)=>d.setMetadata("crop",Object.assign({},d.getMetadata("crop"),u));return t("DID_CREATE_ITEM",(d,{query:u})=>{d.extend("setImageCrop",f=>{if(!(!a(d,u)||!o(center)))return d.setMetadata("crop",f),f}),d.extend("setImageCropCenter",f=>{if(!(!a(d,u)||!o(f)))return c(d,{center:f})}),d.extend("setImageCropZoom",f=>{if(!(!a(d,u)||!h(f)))return c(d,{zoom:Math.max(1,f)})}),d.extend("setImageCropRotation",f=>{if(!(!a(d,u)||!h(f)))return c(d,{rotation:f})}),d.extend("setImageCropFlip",f=>{if(!(!a(d,u)||!o(f)))return c(d,{flip:f})}),d.extend("setImageCropAspectRatio",f=>{if(!a(d,u)||typeof f=="undefined")return;const E=d.getMetadata("crop"),g=n(f),b={center:{x:.5,y:.5},flip:E?Object.assign({},E.flip):{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:g};return d.setMetadata("crop",b),b})}),t("DID_LOAD_ITEM",(d,{query:u})=>new Promise((f,E)=>{const g=d.file;if(!i(g)||!xm(g)||!u("GET_ALLOW_IMAGE_CROP")||d.getMetadata("crop"))return f(d);const I=u("GET_IMAGE_CROP_ASPECT_RATIO");d.setMetadata("crop",{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:I?n(I):null}),f(d)})),{options:{allowImageCrop:[!0,s.BOOLEAN],imageCropAspectRatio:[null,s.STRING]}}},pT=typeof window!="undefined"&&typeof window.document!="undefined";pT&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:nE}));/*!
* FilePondPluginImagePreview 4.6.11
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const fT=t=>/^image/.test(t.type),Sm=(t,e)=>qo(t.x*e,t.y*e),Rm=(t,e)=>qo(t.x+e.x,t.y+e.y),mT=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return e===0?{x:0,y:0}:qo(t.x/e,t.y/e)},Gc=(t,e,s)=>{const i=Math.cos(e),n=Math.sin(e),a=qo(t.x-s.x,t.y-s.y);return qo(s.x+i*a.x-n*a.y,s.y+n*a.x+i*a.y)},qo=(t=0,e=0)=>({x:t,y:e}),Ke=(t,e,s=1,i)=>{if(typeof t=="string")return parseFloat(t)*s;if(typeof t=="number")return t*(i?e[i]:Math.min(e.width,e.height))},gT=(t,e,s)=>{const i=t.borderStyle||t.lineStyle||"solid",n=t.backgroundColor||t.fontColor||"transparent",a=t.borderColor||t.lineColor||"transparent",o=Ke(t.borderWidth||t.lineWidth,e,s),h=t.lineCap||"round",c=t.lineJoin||"round",d=typeof i=="string"?"":i.map(f=>Ke(f,e,s)).join(","),u=t.opacity||1;return{"stroke-linecap":h,"stroke-linejoin":c,"stroke-width":o||0,"stroke-dasharray":d,stroke:a,fill:n,opacity:u}},bs=t=>t!=null,ET=(t,e,s=1)=>{let i=Ke(t.x,e,s,"width")||Ke(t.left,e,s,"width"),n=Ke(t.y,e,s,"height")||Ke(t.top,e,s,"height"),a=Ke(t.width,e,s,"width"),o=Ke(t.height,e,s,"height"),h=Ke(t.right,e,s,"width"),c=Ke(t.bottom,e,s,"height");return bs(n)||(bs(o)&&bs(c)?n=e.height-o-c:n=c),bs(i)||(bs(a)&&bs(h)?i=e.width-a-h:i=h),bs(a)||(bs(i)&&bs(h)?a=e.width-i-h:a=0),bs(o)||(bs(n)&&bs(c)?o=e.height-n-c:o=0),{x:i||0,y:n||0,width:a||0,height:o||0}},bT=t=>t.map((e,s)=>`${s===0?"M":"L"} ${e.x} ${e.y}`).join(" "),Ri=(t,e)=>Object.keys(e).forEach(s=>t.setAttribute(s,e[s])),IT="http://www.w3.org/2000/svg",ca=(t,e)=>{const s=document.createElementNS(IT,t);return e&&Ri(s,e),s},_T=t=>Ri(t,_(_({},t.rect),t.styles)),wT=t=>{const e=t.rect.x+t.rect.width*.5,s=t.rect.y+t.rect.height*.5,i=t.rect.width*.5,n=t.rect.height*.5;return Ri(t,_({cx:e,cy:s,rx:i,ry:n},t.styles))},vT={contain:"xMidYMid meet",cover:"xMidYMid slice"},TT=(t,e)=>{Ri(t,A(_(_({},t.rect),t.styles),{preserveAspectRatio:vT[e.fit]||"none"}))},xT={left:"start",center:"middle",right:"end"},ST=(t,e,s,i)=>{const n=Ke(e.fontSize,s,i),a=e.fontFamily||"sans-serif",o=e.fontWeight||"normal",h=xT[e.textAlign]||"start";Ri(t,A(_(_({},t.rect),t.styles),{"stroke-width":0,"font-weight":o,"font-size":n,"font-family":a,"text-anchor":h})),t.text!==e.text&&(t.text=e.text,t.textContent=e.text.length?e.text:" ")},RT=(t,e,s,i)=>{Ri(t,A(_(_({},t.rect),t.styles),{fill:"none"}));const n=t.childNodes[0],a=t.childNodes[1],o=t.childNodes[2],h=t.rect,c={x:t.rect.x+t.rect.width,y:t.rect.y+t.rect.height};if(Ri(n,{x1:h.x,y1:h.y,x2:c.x,y2:c.y}),!e.lineDecoration)return;a.style.display="none",o.style.display="none";const d=mT({x:c.x-h.x,y:c.y-h.y}),u=Ke(.05,s,i);if(e.lineDecoration.indexOf("arrow-begin")!==-1){const f=Sm(d,u),E=Rm(h,f),g=Gc(h,2,E),b=Gc(h,-2,E);Ri(a,{style:"display:block;",d:`M${g.x},${g.y} L${h.x},${h.y} L${b.x},${b.y}`})}if(e.lineDecoration.indexOf("arrow-end")!==-1){const f=Sm(d,-u),E=Rm(c,f),g=Gc(c,2,E),b=Gc(c,-2,E);Ri(o,{style:"display:block;",d:`M${g.x},${g.y} L${c.x},${c.y} L${b.x},${b.y}`})}},CT=(t,e,s,i)=>{Ri(t,A(_({},t.styles),{fill:"none",d:bT(e.points.map(n=>({x:Ke(n.x,s,i,"width"),y:Ke(n.y,s,i,"height")})))}))},Bc=t=>e=>ca(t,{id:e.id}),OT=t=>{const e=ca("image",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return e.onload=()=>{e.setAttribute("opacity",t.opacity||1)},e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.src),e},yT=t=>{const e=ca("g",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round"}),s=ca("line");e.appendChild(s);const i=ca("path");e.appendChild(i);const n=ca("path");return e.appendChild(n),e},LT={image:OT,rect:Bc("rect"),ellipse:Bc("ellipse"),text:Bc("text"),path:Bc("path"),line:yT},AT={rect:_T,ellipse:wT,image:TT,text:ST,path:CT,line:RT},MT=(t,e)=>LT[t](e),$T=(t,e,s,i,n)=>{e!=="path"&&(t.rect=ET(s,i,n)),t.styles=gT(s,i,n),AT[e](t,s,i,n)},NT=["x","y","left","top","right","bottom","width","height"],PT=t=>typeof t=="string"&&/%/.test(t)?parseFloat(t)/100:t,DT=t=>{const[e,s]=t,i=s.points?{}:NT.reduce((n,a)=>(n[a]=PT(s[a]),n),{});return[e,_(_({zIndex:0},s),i)]},FT=(t,e)=>t[1].zIndex>e[1].zIndex?1:t[1].zIndex<e[1].zIndex?-1:0,GT=t=>t.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:e,props:s})=>{if(!s.dirty)return;const{crop:i,resize:n,markup:a}=s,o=s.width,h=s.height;let c=i.width,d=i.height;if(n){const{size:g}=n;let b=g&&g.width,I=g&&g.height;const v=n.mode,C=n.upscale;b&&!I&&(I=b),I&&!b&&(b=I);const w=c<b&&d<I;if(!w||w&&C){let x=b/c,R=I/d;if(v==="force")c=b,d=I;else{let O;v==="cover"?O=Math.max(x,R):v==="contain"&&(O=Math.min(x,R)),c=c*O,d=d*O}}}const u={width:o,height:h};e.element.setAttribute("width",u.width),e.element.setAttribute("height",u.height);const f=Math.min(o/c,h/d);e.element.innerHTML="";const E=e.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");a.filter(E).map(DT).sort(FT).forEach(g=>{const[b,I]=g,v=MT(b,I);$T(v,b,I,u,f),e.element.appendChild(v)})}}),Vo=(t,e)=>({x:t,y:e}),BT=(t,e)=>t.x*e.x+t.y*e.y,Cm=(t,e)=>Vo(t.x-e.x,t.y-e.y),kT=(t,e)=>BT(Cm(t,e),Cm(t,e)),Om=(t,e)=>Math.sqrt(kT(t,e)),ym=(t,e)=>{const s=t,i=1.5707963267948966,n=e,a=1.5707963267948966-e,o=Math.sin(i),h=Math.sin(n),c=Math.sin(a),d=Math.cos(a),u=s/o,f=u*h,E=u*c;return Vo(d*f,d*E)},jT=(t,e)=>{const s=t.width,i=t.height,n=ym(s,e),a=ym(i,e),o=Vo(t.x+Math.abs(n.x),t.y-Math.abs(n.y)),h=Vo(t.x+t.width+Math.abs(a.y),t.y+Math.abs(a.x)),c=Vo(t.x-Math.abs(a.y),t.y+t.height-Math.abs(a.x));return{width:Om(o,h),height:Om(o,c)}},UT=(t,e,s=1)=>{const i=t.height/t.width;let n=1,a=e,o=1,h=i;h>a&&(h=a,o=h/i);const c=Math.max(n/o,a/h),d=t.width/(s*c*o),u=d*e;return{width:d,height:u}},rE=(t,e,s,i)=>{const n=i.x>.5?1-i.x:i.x,a=i.y>.5?1-i.y:i.y,o=n*2*t.width,h=a*2*t.height,c=jT(e,s);return Math.max(c.width/o,c.height/h)},aE=(t,e)=>{let s=t.width,i=s*e;i>t.height&&(i=t.height,s=i/e);const n=(t.width-s)*.5,a=(t.height-i)*.5;return{x:n,y:a,width:s,height:i}},VT=(t,e={})=>{let{zoom:s,rotation:i,center:n,aspectRatio:a}=e;a||(a=t.height/t.width);const o=UT(t,a,s),h={x:o.width*.5,y:o.height*.5},c={x:0,y:0,width:o.width,height:o.height,center:h},d=typeof e.scaleToFit=="undefined"||e.scaleToFit,u=rE(t,aE(c,a),i,d?n:{x:.5,y:.5}),f=s*u;return{widthFloat:o.width/f,heightFloat:o.height/f,width:Math.round(o.width/f),height:Math.round(o.height/f)}},li={type:"spring",stiffness:.5,damping:.45,mass:10},zT=t=>t.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:e,props:s})=>{e.appendChild(s.image)}}),WT=t=>t.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:li,originY:li,scaleX:li,scaleY:li,translateX:li,translateY:li,rotateZ:li}},create:({root:e,props:s})=>{s.width=s.image.width,s.height=s.image.height,e.ref.bitmap=e.appendChildView(e.createChildView(zT(t),{image:s.image}))},write:({root:e,props:s})=>{const{flip:i}=s.crop,{bitmap:n}=e.ref;n.scaleX=i.horizontal?-1:1,n.scaleY=i.vertical?-1:1}}),HT=t=>t.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:e,props:s}){s.background&&(e.element.style.backgroundColor=s.background)},create:({root:e,props:s})=>{e.ref.image=e.appendChildView(e.createChildView(WT(t),Object.assign({},s))),e.ref.createMarkup=()=>{e.ref.markup||(e.ref.markup=e.appendChildView(e.createChildView(GT(t),Object.assign({},s))))},e.ref.destroyMarkup=()=>{e.ref.markup&&(e.removeChildView(e.ref.markup),e.ref.markup=null)};const i=e.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");i!==null&&(i==="grid"?e.element.dataset.transparencyIndicator=i:e.element.dataset.transparencyIndicator="color")},write:({root:e,props:s,shouldOptimize:i})=>{const{crop:n,markup:a,resize:o,dirty:h,width:c,height:d}=s;e.ref.image.crop=n;const u={x:0,y:0,width:c,height:d,center:{x:c*.5,y:d*.5}},f={width:e.ref.image.width,height:e.ref.image.height},E={x:n.center.x*f.width,y:n.center.y*f.height},g={x:u.center.x-f.width*n.center.x,y:u.center.y-f.height*n.center.y},b=Math.PI*2+n.rotation%(Math.PI*2),I=n.aspectRatio||f.height/f.width,v=typeof n.scaleToFit=="undefined"||n.scaleToFit,C=rE(f,aE(u,I),b,v?n.center:{x:.5,y:.5}),w=n.zoom*C;a&&a.length?(e.ref.createMarkup(),e.ref.markup.width=c,e.ref.markup.height=d,e.ref.markup.resize=o,e.ref.markup.dirty=h,e.ref.markup.markup=a,e.ref.markup.crop=VT(f,n)):e.ref.markup&&e.ref.destroyMarkup();const x=e.ref.image;if(i){x.originX=null,x.originY=null,x.translateX=null,x.translateY=null,x.rotateZ=null,x.scaleX=null,x.scaleY=null;return}x.originX=E.x,x.originY=E.y,x.translateX=g.x,x.translateY=g.y,x.rotateZ=b,x.scaleX=w,x.scaleY=w}}),qT=t=>t.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:li,scaleY:li,translateY:li,opacity:{type:"tween",duration:400}}},create:({root:e,props:s})=>{e.ref.clip=e.appendChildView(e.createChildView(HT(t),{id:s.id,image:s.image,crop:s.crop,markup:s.markup,resize:s.resize,dirty:s.dirty,background:s.background}))},write:({root:e,props:s,shouldOptimize:i})=>{const{clip:n}=e.ref,{image:a,crop:o,markup:h,resize:c,dirty:d}=s;if(n.crop=o,n.markup=h,n.resize=c,n.dirty=d,n.opacity=i?0:1,i||e.rect.element.hidden)return;const u=a.height/a.width;let f=o.aspectRatio||u;const E=e.rect.inner.width,g=e.rect.inner.height;let b=e.query("GET_IMAGE_PREVIEW_HEIGHT");const I=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),v=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),C=e.query("GET_PANEL_ASPECT_RATIO"),w=e.query("GET_ALLOW_MULTIPLE");C&&!w&&(b=E*C,f=C);let x=b!==null?b:Math.max(I,Math.min(E*f,v)),R=x/f;R>E&&(R=E,x=R*f),x>g&&(x=g,R=g/f),n.width=R,n.height=x}});let YT=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,Lm=0;const XT=t=>t.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:e,props:s})=>{let i=YT;if(document.querySelector("base")){const n=new URL(window.location.href.replace(window.location.hash,"")).href;i=i.replace(/url\(\#/g,"url("+n+"#")}Lm++,e.element.classList.add(`filepond--image-preview-overlay-${s.status}`),e.element.innerHTML=i.replace(/__UID__/g,Lm)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),ZT=function(){self.onmessage=t=>{createImageBitmap(t.data.message.file).then(e=>{self.postMessage({id:t.data.id,message:e},[e])})}},QT=function(){self.onmessage=t=>{const e=t.data.message.imageData,s=t.data.message.colorMatrix,i=e.data,n=i.length,a=s[0],o=s[1],h=s[2],c=s[3],d=s[4],u=s[5],f=s[6],E=s[7],g=s[8],b=s[9],I=s[10],v=s[11],C=s[12],w=s[13],x=s[14],R=s[15],O=s[16],L=s[17],P=s[18],y=s[19];let D=0,V=0,k=0,B=0,X=0;for(;D<n;D+=4)V=i[D]/255,k=i[D+1]/255,B=i[D+2]/255,X=i[D+3]/255,i[D]=Math.max(0,Math.min((V*a+k*o+B*h+X*c+d)*255,255)),i[D+1]=Math.max(0,Math.min((V*u+k*f+B*E+X*g+b)*255,255)),i[D+2]=Math.max(0,Math.min((V*I+k*v+B*C+X*w+x)*255,255)),i[D+3]=Math.max(0,Math.min((V*R+k*O+B*L+X*P+y)*255,255));self.postMessage({id:t.data.id,message:e},[e.data.buffer])}},JT=(t,e)=>{let s=new Image;s.onload=()=>{const i=s.naturalWidth,n=s.naturalHeight;s=null,e(i,n)},s.src=t},KT={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]},tx=(t,e,s,i)=>{i!==-1&&t.transform.apply(t,KT[i](e,s))},ex=(t,e,s,i)=>{e=Math.round(e),s=Math.round(s);const n=document.createElement("canvas");n.width=e,n.height=s;const a=n.getContext("2d");return i>=5&&i<=8&&([e,s]=[s,e]),tx(a,e,s,i),a.drawImage(t,0,0,e,s),n},oE=t=>/^image/.test(t.type)&&!/svg/.test(t.type),sx=10,ix=10,nx=t=>{const e=Math.min(sx/t.width,ix/t.height),s=document.createElement("canvas"),i=s.getContext("2d"),n=s.width=Math.ceil(t.width*e),a=s.height=Math.ceil(t.height*e);i.drawImage(t,0,0,n,a);let o=null;try{o=i.getImageData(0,0,n,a).data}catch(E){return null}const h=o.length;let c=0,d=0,u=0,f=0;for(;f<h;f+=4)c+=o[f]*o[f],d+=o[f+1]*o[f+1],u+=o[f+2]*o[f+2];return c=Bu(c,h),d=Bu(d,h),u=Bu(u,h),{r:c,g:d,b:u}},Bu=(t,e)=>Math.floor(Math.sqrt(t/(e/4))),rx=(t,e)=>(e=e||document.createElement("canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e),ax=t=>{let e;try{e=new ImageData(t.width,t.height)}catch(s){e=document.createElement("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(new Uint8ClampedArray(t.data)),e},ox=t=>new Promise((e,s)=>{const i=new Image;i.crossOrigin="Anonymous",i.onload=()=>{e(i)},i.onerror=n=>{s(n)},i.src=t}),lx=t=>{const e=XT(t),s=qT(t),{createWorker:i}=t.utils,n=(w,x,R)=>new Promise(O=>{w.ref.imageData||(w.ref.imageData=R.getContext("2d").getImageData(0,0,R.width,R.height));const L=ax(w.ref.imageData);if(!x||x.length!==20)return R.getContext("2d").putImageData(L,0,0),O();const P=i(QT);P.post({imageData:L,colorMatrix:x},y=>{R.getContext("2d").putImageData(y,0,0),P.terminate(),O()},[L.data.buffer])}),a=(w,x)=>{w.removeChildView(x),x.image.width=1,x.image.height=1,x._destroy()},o=({root:w})=>{const x=w.ref.images.shift();return x.opacity=0,x.translateY=-15,w.ref.imageViewBin.push(x),x},h=({root:w,props:x,image:R})=>{const O=x.id,L=w.query("GET_ITEM",{id:O});if(!L)return;const P=L.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},y=w.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let D,V,k=!1;w.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(D=L.getMetadata("markup")||[],V=L.getMetadata("resize"),k=!0);const B=w.appendChildView(w.createChildView(s,{id:O,image:R,crop:P,resize:V,markup:D,dirty:k,background:y,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),w.childViews.length);w.ref.images.push(B),B.opacity=1,B.scaleX=1,B.scaleY=1,B.translateY=0,setTimeout(()=>{w.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:O})},250)},c=({root:w,props:x})=>{const R=w.query("GET_ITEM",{id:x.id});if(!R)return;const O=w.ref.images[w.ref.images.length-1];O.crop=R.getMetadata("crop"),O.background=w.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),w.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(O.dirty=!0,O.resize=R.getMetadata("resize"),O.markup=R.getMetadata("markup"))},d=({root:w,props:x,action:R})=>{if(!/crop|filter|markup|resize/.test(R.change.key)||!w.ref.images.length)return;const O=w.query("GET_ITEM",{id:x.id});if(O){if(/filter/.test(R.change.key)){const L=w.ref.images[w.ref.images.length-1];n(w,R.change.value,L.image);return}if(/crop|markup|resize/.test(R.change.key)){const L=O.getMetadata("crop"),P=w.ref.images[w.ref.images.length-1];if(L&&L.aspectRatio&&P.crop&&P.crop.aspectRatio&&Math.abs(L.aspectRatio-P.crop.aspectRatio)>1e-5){const y=o({root:w});h({root:w,props:x,image:rx(y.image)})}else c({root:w,props:x})}}},u=w=>{const R=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return(R?parseInt(R[1]):null)<=58?!1:"createImageBitmap"in window&&oE(w)},f=({root:w,props:x})=>{const{id:R}=x,O=w.query("GET_ITEM",R);if(!O)return;const L=URL.createObjectURL(O.file);JT(L,(P,y)=>{w.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:R,width:P,height:y})})},E=({root:w,props:x})=>{const{id:R}=x,O=w.query("GET_ITEM",R);if(!O)return;const L=URL.createObjectURL(O.file),P=()=>{ox(L).then(y)},y=D=>{URL.revokeObjectURL(L);const k=(O.getMetadata("exif")||{}).orientation||-1;let{width:B,height:X}=D;if(!B||!X)return;k>=5&&k<=8&&([B,X]=[X,B]);const N=Math.max(1,window.devicePixelRatio*.75),F=w.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*N,$=X/B,G=w.rect.element.width,U=w.rect.element.height;let H=G,Y=H*$;$>1?(H=Math.min(B,G*F),Y=H*$):(Y=Math.min(X,U*F),H=Y/$);const ot=ex(D,H,Y,k),rt=()=>{const bt=w.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?nx(data):null;O.setMetadata("color",bt,!0),"close"in D&&D.close(),w.ref.overlayShadow.opacity=1,h({root:w,props:x,image:ot})},lt=O.getMetadata("filter");lt?n(w,lt,ot).then(rt):rt()};if(u(O.file)){const D=i(ZT);D.post({file:O.file},V=>{if(D.terminate(),!V){P();return}y(V)})}else P()},g=({root:w})=>{const x=w.ref.images[w.ref.images.length-1];x.translateY=0,x.scaleX=1,x.scaleY=1,x.opacity=1},b=({root:w})=>{w.ref.overlayShadow.opacity=1,w.ref.overlayError.opacity=0,w.ref.overlaySuccess.opacity=0},I=({root:w})=>{w.ref.overlayShadow.opacity=.25,w.ref.overlayError.opacity=1},v=({root:w})=>{w.ref.overlayShadow.opacity=.25,w.ref.overlaySuccess.opacity=1},C=({root:w})=>{w.ref.images=[],w.ref.imageData=null,w.ref.imageViewBin=[],w.ref.overlayShadow=w.appendChildView(w.createChildView(e,{opacity:0,status:"idle"})),w.ref.overlaySuccess=w.appendChildView(w.createChildView(e,{opacity:0,status:"success"})),w.ref.overlayError=w.appendChildView(w.createChildView(e,{opacity:0,status:"failure"}))};return t.utils.createView({name:"image-preview-wrapper",create:C,styles:["height"],apis:["height"],destroy:({root:w})=>{w.ref.images.forEach(x=>{x.image.width=1,x.image.height=1})},didWriteView:({root:w})=>{w.ref.images.forEach(x=>{x.dirty=!1})},write:t.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:g,DID_IMAGE_PREVIEW_CONTAINER_CREATE:f,DID_FINISH_CALCULATE_PREVIEWSIZE:E,DID_UPDATE_ITEM_METADATA:d,DID_THROW_ITEM_LOAD_ERROR:I,DID_THROW_ITEM_PROCESSING_ERROR:I,DID_THROW_ITEM_INVALID:I,DID_COMPLETE_ITEM_PROCESSING:v,DID_START_ITEM_PROCESSING:b,DID_REVERT_ITEM_PROCESSING:b},({root:w})=>{const x=w.ref.imageViewBin.filter(R=>R.opacity===0);w.ref.imageViewBin=w.ref.imageViewBin.filter(R=>R.opacity>0),x.forEach(R=>a(w,R)),x.length=0})})},lE=t=>{const{addFilter:e,utils:s}=t,{Type:i,createRoute:n,isFile:a}=s,o=lx(t);return e("CREATE_VIEW",h=>{const{is:c,view:d,query:u}=h;if(!c("file")||!u("GET_ALLOW_IMAGE_PREVIEW"))return;const f=({root:v,props:C})=>{const{id:w}=C,x=u("GET_ITEM",w);if(!x||!a(x.file)||x.archived)return;const R=x.file;if(!fT(R)||!u("GET_IMAGE_PREVIEW_FILTER_ITEM")(x))return;const O="createImageBitmap"in(window||{}),L=u("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!O&&L&&R.size>L)return;v.ref.imagePreview=d.appendChildView(d.createChildView(o,{id:w}));const P=v.query("GET_IMAGE_PREVIEW_HEIGHT");P&&v.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:x.id,height:P});const y=!O&&R.size>u("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");v.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:w},y)},E=(v,C)=>{if(!v.ref.imagePreview)return;let{id:w}=C;const x=v.query("GET_ITEM",{id:w});if(!x)return;const R=v.query("GET_PANEL_ASPECT_RATIO"),O=v.query("GET_ITEM_PANEL_ASPECT_RATIO"),L=v.query("GET_IMAGE_PREVIEW_HEIGHT");if(R||O||L)return;let{imageWidth:P,imageHeight:y}=v.ref;if(!P||!y)return;const D=v.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),V=v.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),B=(x.getMetadata("exif")||{}).orientation||-1;if(B>=5&&B<=8&&([P,y]=[y,P]),!oE(x.file)||v.query("GET_IMAGE_PREVIEW_UPSCALE")){const G=2048/P;P*=G,y*=G}const X=y/P,N=(x.getMetadata("crop")||{}).aspectRatio||X;let W=Math.max(D,Math.min(y,V));const F=v.rect.element.width,$=Math.min(F*N,W);v.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:x.id,height:$})},g=({root:v})=>{v.ref.shouldRescale=!0},b=({root:v,action:C})=>{C.change.key==="crop"&&(v.ref.shouldRescale=!0)},I=({root:v,action:C})=>{v.ref.imageWidth=C.width,v.ref.imageHeight=C.height,v.ref.shouldRescale=!0,v.ref.shouldDrawPreview=!0,v.dispatch("KICK")};d.registerWriter(n({DID_RESIZE_ROOT:g,DID_STOP_RESIZE:g,DID_LOAD_ITEM:f,DID_IMAGE_PREVIEW_CALCULATE_SIZE:I,DID_UPDATE_ITEM_METADATA:b},({root:v,props:C})=>{v.ref.imagePreview&&(v.rect.element.hidden||(v.ref.shouldRescale&&(E(v,C),v.ref.shouldRescale=!1),v.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{v.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:C.id})})}),v.ref.shouldDrawPreview=!1)))}))}),{options:{allowImagePreview:[!0,i.BOOLEAN],imagePreviewFilterItem:[()=>!0,i.FUNCTION],imagePreviewHeight:[null,i.INT],imagePreviewMinHeight:[44,i.INT],imagePreviewMaxHeight:[256,i.INT],imagePreviewMaxFileSize:[null,i.INT],imagePreviewZoomFactor:[2,i.INT],imagePreviewUpscale:[!1,i.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,i.INT],imagePreviewTransparencyIndicator:[null,i.STRING],imagePreviewCalculateAverageImageColor:[!1,i.BOOLEAN],imagePreviewMarkupShow:[!0,i.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,i.FUNCTION]}}},cx=typeof window!="undefined"&&typeof window.document!="undefined";cx&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:lE}));/*!
* FilePondPluginImageResize 2.0.10
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const hx=t=>/^image/.test(t.type),dx=(t,e)=>{let s=new Image;s.onload=()=>{const i=s.naturalWidth,n=s.naturalHeight;s=null,e({width:i,height:n})},s.onerror=()=>e(null),s.src=t},cE=({addFilter:t,utils:e})=>{const{Type:s}=e;return t("DID_LOAD_ITEM",(i,{query:n})=>new Promise((a,o)=>{const h=i.file;if(!hx(h)||!n("GET_ALLOW_IMAGE_RESIZE"))return a(i);const c=n("GET_IMAGE_RESIZE_MODE"),d=n("GET_IMAGE_RESIZE_TARGET_WIDTH"),u=n("GET_IMAGE_RESIZE_TARGET_HEIGHT"),f=n("GET_IMAGE_RESIZE_UPSCALE");if(d===null&&u===null)return a(i);const E=d===null?u:d,g=u===null?E:u,b=URL.createObjectURL(h);dx(b,I=>{if(URL.revokeObjectURL(b),!I)return a(i);let{width:v,height:C}=I;const w=(i.getMetadata("exif")||{}).orientation||-1;if(w>=5&&w<=8&&([v,C]=[C,v]),v===E&&C===g)return a(i);if(!f){if(c==="cover"){if(v<=E||C<=g)return a(i)}else if(v<=E&&C<=E)return a(i)}i.setMetadata("resize",{mode:c,upscale:f,size:{width:E,height:g}}),a(i)})})),{options:{allowImageResize:[!0,s.BOOLEAN],imageResizeMode:["cover",s.STRING],imageResizeUpscale:[!0,s.BOOLEAN],imageResizeTargetWidth:[null,s.INT],imageResizeTargetHeight:[null,s.INT]}}},ux=typeof window!="undefined"&&typeof window.document!="undefined";ux&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:cE}));/*!
* FilePondPluginImageTransform 3.8.7
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const px=t=>/^image/.test(t.type),fx=t=>t.substr(0,t.lastIndexOf("."))||t,mx={jpeg:"jpg","svg+xml":"svg"},gx=(t,e)=>{const s=fx(t),i=e.split("/")[1],n=mx[i]||i;return`${s}.${n}`},Ex=t=>/jpeg|png|svg\+xml/.test(t)?t:"image/jpeg",bx=t=>/^image/.test(t.type),Ix={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]},_x=(t,e,s)=>(s===-1&&(s=1),Ix[s](t,e)),zo=(t,e)=>({x:t,y:e}),wx=(t,e)=>t.x*e.x+t.y*e.y,Am=(t,e)=>zo(t.x-e.x,t.y-e.y),vx=(t,e)=>wx(Am(t,e),Am(t,e)),Mm=(t,e)=>Math.sqrt(vx(t,e)),$m=(t,e)=>{const s=t,i=1.5707963267948966,n=e,a=1.5707963267948966-e,o=Math.sin(i),h=Math.sin(n),c=Math.sin(a),d=Math.cos(a),u=s/o,f=u*h,E=u*c;return zo(d*f,d*E)},Tx=(t,e)=>{const s=t.width,i=t.height,n=$m(s,e),a=$m(i,e),o=zo(t.x+Math.abs(n.x),t.y-Math.abs(n.y)),h=zo(t.x+t.width+Math.abs(a.y),t.y+Math.abs(a.x)),c=zo(t.x-Math.abs(a.y),t.y+t.height-Math.abs(a.x));return{width:Mm(o,h),height:Mm(o,c)}},hE=(t,e,s=0,i={x:.5,y:.5})=>{const n=i.x>.5?1-i.x:i.x,a=i.y>.5?1-i.y:i.y,o=n*2*t.width,h=a*2*t.height,c=Tx(e,s);return Math.max(c.width/o,c.height/h)},dE=(t,e)=>{let s=t.width,i=s*e;i>t.height&&(i=t.height,s=i/e);const n=(t.width-s)*.5,a=(t.height-i)*.5;return{x:n,y:a,width:s,height:i}},Nm=(t,e,s=1)=>{const i=t.height/t.width;let n=1,a=e,o=1,h=i;h>a&&(h=a,o=h/i);const c=Math.max(n/o,a/h),d=t.width/(s*c*o),u=d*e;return{width:d,height:u}},uE=t=>{t.width=1,t.height=1,t.getContext("2d").clearRect(0,0,1,1)},Pm=t=>t&&(t.horizontal||t.vertical),xx=(t,e,s)=>{if(e<=1&&!Pm(s))return t.width=t.naturalWidth,t.height=t.naturalHeight,t;const i=document.createElement("canvas"),n=t.naturalWidth,a=t.naturalHeight,o=e>=5&&e<=8;o?(i.width=a,i.height=n):(i.width=n,i.height=a);const h=i.getContext("2d");if(e&&h.transform.apply(h,_x(n,a,e)),Pm(s)){const c=[1,0,0,1,0,0];(!o&&s.horizontal||o&s.vertical)&&(c[0]=-1,c[4]=n),(!o&&s.vertical||o&&s.horizontal)&&(c[3]=-1,c[5]=a),h.transform(...c)}return h.drawImage(t,0,0,n,a),i},Sx=(t,e,s={},i={})=>{const{canvasMemoryLimit:n,background:a=null}=i,o=s.zoom||1,h=xx(t,e,s.flip),c={width:h.width,height:h.height},d=s.aspectRatio||c.height/c.width;let u=Nm(c,d,o);if(n){const x=u.width*u.height;if(x>n){const R=Math.sqrt(n)/Math.sqrt(x);c.width=Math.floor(c.width*R),c.height=Math.floor(c.height*R),u=Nm(c,d,o)}}const f=document.createElement("canvas"),E={x:u.width*.5,y:u.height*.5},g={x:0,y:0,width:u.width,height:u.height,center:E},b=typeof s.scaleToFit=="undefined"||s.scaleToFit,I=o*hE(c,dE(g,d),s.rotation,b?s.center:{x:.5,y:.5});f.width=Math.round(u.width/I),f.height=Math.round(u.height/I),E.x/=I,E.y/=I;const v={x:E.x-c.width*(s.center?s.center.x:.5),y:E.y-c.height*(s.center?s.center.y:.5)},C=f.getContext("2d");a&&(C.fillStyle=a,C.fillRect(0,0,f.width,f.height)),C.translate(E.x,E.y),C.rotate(s.rotation||0),C.drawImage(h,v.x-E.x,v.y-E.y,c.width,c.height);const w=C.getImageData(0,0,f.width,f.height);return uE(f),w},Rx=(()=>typeof window!="undefined"&&typeof window.document!="undefined")();Rx&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,s){var i=this.toDataURL(e,s).split(",")[1];setTimeout(function(){for(var n=atob(i),a=n.length,o=new Uint8Array(a),h=0;h<a;h++)o[h]=n.charCodeAt(h);t(new Blob([o],{type:e||"image/png"}))})}}));const Cx=(t,e,s=null)=>new Promise(i=>{const n=s?s(t):t;Promise.resolve(n).then(a=>{a.toBlob(i,e.type,e.quality)})}),vh=(t,e)=>Yo(t.x*e,t.y*e),Th=(t,e)=>Yo(t.x+e.x,t.y+e.y),pE=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return e===0?{x:0,y:0}:Yo(t.x/e,t.y/e)},Hn=(t,e,s)=>{const i=Math.cos(e),n=Math.sin(e),a=Yo(t.x-s.x,t.y-s.y);return Yo(s.x+i*a.x-n*a.y,s.y+n*a.x+i*a.y)},Yo=(t=0,e=0)=>({x:t,y:e}),Ee=(t,e,s=1,i)=>{if(typeof t=="string")return parseFloat(t)*s;if(typeof t=="number")return t*(i?e[i]:Math.min(e.width,e.height))},Vr=(t,e,s)=>{const i=t.borderStyle||t.lineStyle||"solid",n=t.backgroundColor||t.fontColor||"transparent",a=t.borderColor||t.lineColor||"transparent",o=Ee(t.borderWidth||t.lineWidth,e,s),h=t.lineCap||"round",c=t.lineJoin||"round",d=typeof i=="string"?"":i.map(f=>Ee(f,e,s)).join(","),u=t.opacity||1;return{"stroke-linecap":h,"stroke-linejoin":c,"stroke-width":o||0,"stroke-dasharray":d,stroke:a,fill:n,opacity:u}},Is=t=>t!=null,Eo=(t,e,s=1)=>{let i=Ee(t.x,e,s,"width")||Ee(t.left,e,s,"width"),n=Ee(t.y,e,s,"height")||Ee(t.top,e,s,"height"),a=Ee(t.width,e,s,"width"),o=Ee(t.height,e,s,"height"),h=Ee(t.right,e,s,"width"),c=Ee(t.bottom,e,s,"height");return Is(n)||(Is(o)&&Is(c)?n=e.height-o-c:n=c),Is(i)||(Is(a)&&Is(h)?i=e.width-a-h:i=h),Is(a)||(Is(i)&&Is(h)?a=e.width-i-h:a=0),Is(o)||(Is(n)&&Is(c)?o=e.height-n-c:o=0),{x:i||0,y:n||0,width:a||0,height:o||0}},Ox=t=>t.map((e,s)=>`${s===0?"M":"L"} ${e.x} ${e.y}`).join(" "),Ci=(t,e)=>Object.keys(e).forEach(s=>t.setAttribute(s,e[s])),yx="http://www.w3.org/2000/svg",ha=(t,e)=>{const s=document.createElementNS(yx,t);return e&&Ci(s,e),s},Lx=t=>Ci(t,_(_({},t.rect),t.styles)),Ax=t=>{const e=t.rect.x+t.rect.width*.5,s=t.rect.y+t.rect.height*.5,i=t.rect.width*.5,n=t.rect.height*.5;return Ci(t,_({cx:e,cy:s,rx:i,ry:n},t.styles))},Mx={contain:"xMidYMid meet",cover:"xMidYMid slice"},$x=(t,e)=>{Ci(t,A(_(_({},t.rect),t.styles),{preserveAspectRatio:Mx[e.fit]||"none"}))},Nx={left:"start",center:"middle",right:"end"},Px=(t,e,s,i)=>{const n=Ee(e.fontSize,s,i),a=e.fontFamily||"sans-serif",o=e.fontWeight||"normal",h=Nx[e.textAlign]||"start";Ci(t,A(_(_({},t.rect),t.styles),{"stroke-width":0,"font-weight":o,"font-size":n,"font-family":a,"text-anchor":h})),t.text!==e.text&&(t.text=e.text,t.textContent=e.text.length?e.text:" ")},Dx=(t,e,s,i)=>{Ci(t,A(_(_({},t.rect),t.styles),{fill:"none"}));const n=t.childNodes[0],a=t.childNodes[1],o=t.childNodes[2],h=t.rect,c={x:t.rect.x+t.rect.width,y:t.rect.y+t.rect.height};if(Ci(n,{x1:h.x,y1:h.y,x2:c.x,y2:c.y}),!e.lineDecoration)return;a.style.display="none",o.style.display="none";const d=pE({x:c.x-h.x,y:c.y-h.y}),u=Ee(.05,s,i);if(e.lineDecoration.indexOf("arrow-begin")!==-1){const f=vh(d,u),E=Th(h,f),g=Hn(h,2,E),b=Hn(h,-2,E);Ci(a,{style:"display:block;",d:`M${g.x},${g.y} L${h.x},${h.y} L${b.x},${b.y}`})}if(e.lineDecoration.indexOf("arrow-end")!==-1){const f=vh(d,-u),E=Th(c,f),g=Hn(c,2,E),b=Hn(c,-2,E);Ci(o,{style:"display:block;",d:`M${g.x},${g.y} L${c.x},${c.y} L${b.x},${b.y}`})}},Fx=(t,e,s,i)=>{Ci(t,A(_({},t.styles),{fill:"none",d:Ox(e.points.map(n=>({x:Ee(n.x,s,i,"width"),y:Ee(n.y,s,i,"height")})))}))},kc=t=>e=>ha(t,{id:e.id}),Gx=t=>{const e=ha("image",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return e.onload=()=>{e.setAttribute("opacity",t.opacity||1)},e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.src),e},Bx=t=>{const e=ha("g",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round"}),s=ha("line");e.appendChild(s);const i=ha("path");e.appendChild(i);const n=ha("path");return e.appendChild(n),e},kx={image:Gx,rect:kc("rect"),ellipse:kc("ellipse"),text:kc("text"),path:kc("path"),line:Bx},jx={rect:Lx,ellipse:Ax,image:$x,text:Px,path:Fx,line:Dx},Ux=(t,e)=>kx[t](e),Vx=(t,e,s,i,n)=>{e!=="path"&&(t.rect=Eo(s,i,n)),t.styles=Vr(s,i,n),jx[e](t,s,i,n)},fE=(t,e)=>t[1].zIndex>e[1].zIndex?1:t[1].zIndex<e[1].zIndex?-1:0,zx=(t,e={},s,i)=>new Promise(n=>{const{background:a=null}=i,o=new FileReader;o.onloadend=()=>{const h=o.result,c=document.createElement("div");c.style.cssText="position:absolute;pointer-events:none;width:0;height:0;visibility:hidden;",c.innerHTML=h;const d=c.querySelector("svg");document.body.appendChild(c);const u=d.getBBox();c.parentNode.removeChild(c);const f=c.querySelector("title"),E=d.getAttribute("viewBox")||"",g=d.getAttribute("width")||"",b=d.getAttribute("height")||"";let I=parseFloat(g)||null,v=parseFloat(b)||null;const C=(g.match(/[a-z]+/)||[])[0]||"",w=(b.match(/[a-z]+/)||[])[0]||"",x=E.split(" ").map(parseFloat),R=x.length?{x:x[0],y:x[1],width:x[2],height:x[3]}:u;let O=I!=null?I:R.width,L=v!=null?v:R.height;d.style.overflow="visible",d.setAttribute("width",O),d.setAttribute("height",L);let P="";if(s&&s.length){const lt={width:O,height:L};P=s.sort(fE).reduce((bt,J)=>{const st=Ux(J[0],J[1]);return Vx(st,J[0],J[1],lt),st.removeAttribute("id"),st.getAttribute("opacity")===1&&st.removeAttribute("opacity"),bt+`
`+st.outerHTML+`
`},""),P=`

<g>${P.replace(/&nbsp;/g," ")}</g>

`}const y=e.aspectRatio||L/O,D=O,V=D*y,k=typeof e.scaleToFit=="undefined"||e.scaleToFit,B=e.center?e.center.x:.5,X=e.center?e.center.y:.5,N=hE({width:O,height:L},dE({width:D,height:V},y),e.rotation,k?{x:B,y:X}:{x:.5,y:.5}),W=e.zoom*N,F=e.rotation*(180/Math.PI),$={x:D*.5,y:V*.5},G={x:$.x-O*B,y:$.y-L*X},U=[`rotate(${F} ${$.x} ${$.y})`,`translate(${$.x} ${$.y})`,`scale(${W})`,`translate(${-$.x} ${-$.y})`,`translate(${G.x} ${G.y})`],H=e.flip&&e.flip.horizontal,Y=e.flip&&e.flip.vertical,ot=[`scale(${H?-1:1} ${Y?-1:1})`,`translate(${H?-O:0} ${Y?-L:0})`],rt=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="${D}${C}" height="${V}${w}" 
viewBox="0 0 ${D} ${V}" ${a?'style="background:'+a+'" ':""}
preserveAspectRatio="xMinYMin"
xmlns:xlink="http://www.w3.org/1999/xlink"
xmlns="http://www.w3.org/2000/svg">
<!-- Generated by PQINA - https://pqina.nl/ -->
<title>${f?f.textContent:""}</title>
<g transform="${U.join(" ")}">
<g transform="${ot.join(" ")}">
${d.outerHTML}${P}
</g>
</g>
</svg>`;n(rt)},o.readAsText(t)}),Wx=t=>{let e;try{e=new ImageData(t.width,t.height)}catch(s){e=document.createElement("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(t.data),e},Hx=()=>{const t={resize:u,filter:d},e=(f,E)=>(f.forEach(g=>{E=t[g.type](E,g.data)}),E),s=(f,E)=>{let g=f.transforms,b=null;if(g.forEach(I=>{I.type==="filter"&&(b=I)}),b){let I=null;g.forEach(v=>{v.type==="resize"&&(I=v)}),I&&(I.data.matrix=b.data,g=g.filter(v=>v.type!=="filter"))}E(e(g,f.imageData))};self.onmessage=f=>{s(f.data.message,E=>{self.postMessage({id:f.data.id,message:E},[E.data.buffer])})};const i=1,n=1,a=1;function o(f,E,g){const b=E[f]/255,I=E[f+1]/255,v=E[f+2]/255,C=E[f+3]/255,w=b*g[0]+I*g[1]+v*g[2]+C*g[3]+g[4],x=b*g[5]+I*g[6]+v*g[7]+C*g[8]+g[9],R=b*g[10]+I*g[11]+v*g[12]+C*g[13]+g[14],O=b*g[15]+I*g[16]+v*g[17]+C*g[18]+g[19],L=Math.max(0,w*O)+i*(1-O),P=Math.max(0,x*O)+n*(1-O),y=Math.max(0,R*O)+a*(1-O);E[f]=Math.max(0,Math.min(1,L))*255,E[f+1]=Math.max(0,Math.min(1,P))*255,E[f+2]=Math.max(0,Math.min(1,y))*255}const h=self.JSON.stringify([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]);function c(f){return self.JSON.stringify(f||[])===h}function d(f,E){if(!E||c(E))return f;const g=f.data,b=g.length,I=E[0],v=E[1],C=E[2],w=E[3],x=E[4],R=E[5],O=E[6],L=E[7],P=E[8],y=E[9],D=E[10],V=E[11],k=E[12],B=E[13],X=E[14],N=E[15],W=E[16],F=E[17],$=E[18],G=E[19];let U=0,H=0,Y=0,ot=0,rt=0,lt=0,bt=0,J=0,st=0,ct=0,mt=0,dt=0;for(;U<b;U+=4)H=g[U]/255,Y=g[U+1]/255,ot=g[U+2]/255,rt=g[U+3]/255,lt=H*I+Y*v+ot*C+rt*w+x,bt=H*R+Y*O+ot*L+rt*P+y,J=H*D+Y*V+ot*k+rt*B+X,st=H*N+Y*W+ot*F+rt*$+G,ct=Math.max(0,lt*st)+i*(1-st),mt=Math.max(0,bt*st)+n*(1-st),dt=Math.max(0,J*st)+a*(1-st),g[U]=Math.max(0,Math.min(1,ct))*255,g[U+1]=Math.max(0,Math.min(1,mt))*255,g[U+2]=Math.max(0,Math.min(1,dt))*255;return f}function u(f,E){let{mode:g="contain",upscale:b=!1,width:I,height:v,matrix:C}=E;if(C=!C||c(C)?null:C,!I&&!v)return d(f,C);if(I===null?I=v:v===null&&(v=I),g!=="force"){let B=I/f.width,X=v/f.height,N=1;if(g==="cover"?N=Math.max(B,X):g==="contain"&&(N=Math.min(B,X)),N>1&&b===!1)return d(f,C);I=f.width*N,v=f.height*N}const w=f.width,x=f.height,R=Math.round(I),O=Math.round(v),L=f.data,P=new Uint8ClampedArray(R*O*4),y=w/R,D=x/O,V=Math.ceil(y*.5),k=Math.ceil(D*.5);for(let B=0;B<O;B++)for(let X=0;X<R;X++){let N=(X+B*R)*4,W=0,F=0,$=0,G=0,U=0,H=0,Y=0,ot=(B+.5)*D;for(let rt=Math.floor(B*D);rt<(B+1)*D;rt++){let lt=Math.abs(ot-(rt+.5))/k,bt=(X+.5)*y,J=lt*lt;for(let st=Math.floor(X*y);st<(X+1)*y;st++){let ct=Math.abs(bt-(st+.5))/V,mt=Math.sqrt(J+ct*ct);if(mt>=-1&&mt<=1&&(W=2*mt*mt*mt-3*mt*mt+1,W>0)){ct=4*(st+rt*w);let dt=L[ct+3];Y+=W*dt,$+=W,dt<255&&(W=W*dt/250),G+=W*L[ct],U+=W*L[ct+1],H+=W*L[ct+2],F+=W}}}P[N]=G/F,P[N+1]=U/F,P[N+2]=H/F,P[N+3]=Y/$,C&&o(N,P,C)}return{data:P,width:R,height:O}}},qx=(t,e)=>{if(t.getUint32(e+4,!1)!==1165519206)return;e+=4;const s=t.getUint16(e+=6,!1)===18761;e+=t.getUint32(e+4,s);const i=t.getUint16(e,s);e+=2;for(let n=0;n<i;n++)if(t.getUint16(e+n*12,s)===274)return t.setUint16(e+n*12+8,1,s),!0;return!1},Yx=t=>{const e=new DataView(t);if(e.getUint16(0)!==65496)return null;let s=2,i,n,a=!1;for(;s<e.byteLength&&(i=e.getUint16(s,!1),n=e.getUint16(s+2,!1)+2,!(!(i>=65504&&i<=65519||i===65534)||(a||(a=qx(e,s)),s+n>e.byteLength)));)s+=n;return t.slice(0,s)},Xx=t=>new Promise(e=>{const s=new FileReader;s.onload=()=>e(Yx(s.result)||null),s.readAsArrayBuffer(t.slice(0,256*1024))}),Zx=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Qx=(t,e)=>{const s=Zx();if(s){const i=new s;return i.append(t),i.getBlob(e)}return new Blob([t],{type:e})},Jx=()=>Math.random().toString(36).substr(2,9),Kx=t=>{const e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),s=URL.createObjectURL(e),i=new Worker(s),n=[];return{transfer:()=>{},post:(a,o,h)=>{const c=Jx();n[c]=o,i.onmessage=d=>{const u=n[d.data.id];u&&(u(d.data.message),delete n[d.data.id])},i.postMessage({id:c,message:a},h)},terminate:()=>{i.terminate(),URL.revokeObjectURL(s)}}},t0=t=>new Promise((e,s)=>{const i=new Image;i.onload=()=>{e(i)},i.onerror=n=>{s(n)},i.src=t}),e0=t=>t.reduce((e,s)=>e.then(i=>s().then(Array.prototype.concat.bind(i))),Promise.resolve([])),s0=(t,e)=>new Promise(s=>{const i={width:t.width,height:t.height},n=t.getContext("2d"),a=e.sort(fE).map(o=>()=>new Promise(h=>{c0[o[0]](n,i,o[1],h)&&h()}));e0(a).then(()=>s(t))}),bo=(t,e)=>{t.beginPath(),t.lineCap=e["stroke-linecap"],t.lineJoin=e["stroke-linejoin"],t.lineWidth=e["stroke-width"],e["stroke-dasharray"].length&&t.setLineDash(e["stroke-dasharray"].split(",")),t.fillStyle=e.fill,t.strokeStyle=e.stroke,t.globalAlpha=e.opacity||1},Io=t=>{t.fill(),t.stroke(),t.globalAlpha=1},i0=(t,e,s)=>{const i=Eo(s,e),n=Vr(s,e);return bo(t,n),t.rect(i.x,i.y,i.width,i.height),Io(t),!0},n0=(t,e,s)=>{const i=Eo(s,e),n=Vr(s,e);bo(t,n);const a=i.x,o=i.y,h=i.width,c=i.height,d=.5522848,u=h/2*d,f=c/2*d,E=a+h,g=o+c,b=a+h/2,I=o+c/2;return t.moveTo(a,I),t.bezierCurveTo(a,I-f,b-u,o,b,o),t.bezierCurveTo(b+u,o,E,I-f,E,I),t.bezierCurveTo(E,I+f,b+u,g,b,g),t.bezierCurveTo(b-u,g,a,I+f,a,I),Io(t),!0},r0=(t,e,s,i)=>{const n=Eo(s,e),a=Vr(s,e);bo(t,a);const o=new Image;new URL(s.src,window.location.href).origin!==window.location.origin&&(o.crossOrigin=""),o.onload=()=>{if(s.fit==="cover"){const c=n.width/n.height,d=c>1?o.width:o.height*c,u=c>1?o.width/c:o.height,f=o.width*.5-d*.5,E=o.height*.5-u*.5;t.drawImage(o,f,E,d,u,n.x,n.y,n.width,n.height)}else if(s.fit==="contain"){const c=Math.min(n.width/o.width,n.height/o.height),d=c*o.width,u=c*o.height,f=n.x+n.width*.5-d*.5,E=n.y+n.height*.5-u*.5;t.drawImage(o,0,0,o.width,o.height,f,E,d,u)}else t.drawImage(o,0,0,o.width,o.height,n.x,n.y,n.width,n.height);Io(t),i()},o.src=s.src},a0=(t,e,s)=>{const i=Eo(s,e),n=Vr(s,e);bo(t,n);const a=Ee(s.fontSize,e),o=s.fontFamily||"sans-serif",h=s.fontWeight||"normal",c=s.textAlign||"left";return t.font=`${h} ${a}px ${o}`,t.textAlign=c,t.fillText(s.text,i.x,i.y),Io(t),!0},o0=(t,e,s)=>{const i=Vr(s,e);bo(t,i),t.beginPath();const n=s.points.map(o=>({x:Ee(o.x,e,1,"width"),y:Ee(o.y,e,1,"height")}));t.moveTo(n[0].x,n[0].y);const a=n.length;for(let o=1;o<a;o++)t.lineTo(n[o].x,n[o].y);return Io(t),!0},l0=(t,e,s)=>{const i=Eo(s,e),n=Vr(s,e);bo(t,n),t.beginPath();const a={x:i.x,y:i.y},o={x:i.x+i.width,y:i.y+i.height};t.moveTo(a.x,a.y),t.lineTo(o.x,o.y);const h=pE({x:o.x-a.x,y:o.y-a.y}),c=.04*Math.min(e.width,e.height);if(s.lineDecoration.indexOf("arrow-begin")!==-1){const d=vh(h,c),u=Th(a,d),f=Hn(a,2,u),E=Hn(a,-2,u);t.moveTo(f.x,f.y),t.lineTo(a.x,a.y),t.lineTo(E.x,E.y)}if(s.lineDecoration.indexOf("arrow-end")!==-1){const d=vh(h,-c),u=Th(o,d),f=Hn(o,2,u),E=Hn(o,-2,u);t.moveTo(f.x,f.y),t.lineTo(o.x,o.y),t.lineTo(E.x,E.y)}return Io(t),!0},c0={rect:i0,ellipse:n0,image:r0,text:a0,line:l0,path:o0},h0=t=>{const e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t,0,0),e},d0=(t,e,s={})=>new Promise((i,n)=>{if(!t||!bx(t))return n({status:"not an image file",file:t});const{stripImageHead:a,beforeCreateBlob:o,afterCreateBlob:h,canvasMemoryLimit:c}=s,{crop:d,size:u,filter:f,markup:E,output:g}=e,b=e.image&&e.image.orientation?Math.max(1,Math.min(8,e.image.orientation)):null,I=g&&g.quality,v=I===null?null:I/100,C=g&&g.type||null,w=g&&g.background||null,x=[];u&&(typeof u.width=="number"||typeof u.height=="number")&&x.push({type:"resize",data:u}),f&&f.length===20&&x.push({type:"filter",data:f});const R=P=>{const y=h?h(P):P;Promise.resolve(y).then(i)},O=(P,y)=>{const D=h0(P),V=E.length?s0(D,E):D;Promise.resolve(V).then(k=>{Cx(k,y,o).then(B=>{if(uE(k),a)return R(B);Xx(t).then(X=>{X!==null&&(B=new Blob([X,B.slice(20)],{type:B.type})),R(B)})}).catch(n)})};if(/svg/.test(t.type)&&C===null)return zx(t,d,E,{background:w}).then(P=>{i(Qx(P,"image/svg+xml"))});const L=URL.createObjectURL(t);t0(L).then(P=>{URL.revokeObjectURL(L);const y=Sx(P,b,d,{canvasMemoryLimit:c,background:w}),D={quality:v,type:C||t.type};if(!x.length)return O(y,D);const V=Kx(Hx);V.post({transforms:x,imageData:y},k=>{O(Wx(k),D),V.terminate()},[y.data.buffer])}).catch(n)}),u0=["x","y","left","top","right","bottom","width","height"],p0=t=>typeof t=="string"&&/%/.test(t)?parseFloat(t)/100:t,f0=t=>{const[e,s]=t,i=s.points?{}:u0.reduce((n,a)=>(n[a]=p0(s[a]),n),{});return[e,_(_({zIndex:0},s),i)]},m0=t=>new Promise((e,s)=>{const i=new Image;i.src=URL.createObjectURL(t);const n=()=>{const o=i.naturalWidth,h=i.naturalHeight;o&&h&&(URL.revokeObjectURL(i.src),clearInterval(a),e({width:o,height:h}))};i.onerror=o=>{URL.revokeObjectURL(i.src),clearInterval(a),s(o)};const a=setInterval(n,1);n()});typeof window!="undefined"&&typeof window.document!="undefined"&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,s){const i=this;setTimeout(()=>{const n=i.toDataURL(e,s).split(",")[1],a=atob(n);let o=a.length;const h=new Uint8Array(o);for(;o--;)h[o]=a.charCodeAt(o);t(new Blob([h],{type:e||"image/png"}))})}}));const vf=typeof window!="undefined"&&typeof window.document!="undefined",g0=vf&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,mE=({addFilter:t,utils:e})=>{const{Type:s,forin:i,getFileFromBlob:n,isFile:a}=e,o=["crop","resize","filter","markup","output"],h=u=>(f,E,g)=>f(E,u?u(g):g),c=u=>u.aspectRatio===null&&u.rotation===0&&u.zoom===1&&u.center&&u.center.x===.5&&u.center.y===.5&&u.flip&&u.flip.horizontal===!1&&u.flip.vertical===!1;t("SHOULD_PREPARE_OUTPUT",(u,{query:f})=>new Promise(E=>{E(!f("IS_ASYNC"))}));const d=(u,f,E)=>new Promise(g=>{if(!u("GET_ALLOW_IMAGE_TRANSFORM")||E.archived||!a(f)||!px(f))return g(!1);m0(f).then(()=>{const b=u("GET_IMAGE_TRANSFORM_IMAGE_FILTER");if(b){const I=b(f);if(I==null)return handleRevert(!0);if(typeof I=="boolean")return g(I);if(typeof I.then=="function")return I.then(g)}g(!0)}).catch(b=>{g(!1)})});return t("DID_CREATE_ITEM",(u,{query:f,dispatch:E})=>{f("GET_ALLOW_IMAGE_TRANSFORM")&&u.extend("requestPrepare",()=>new Promise((g,b)=>{E("REQUEST_PREPARE_OUTPUT",{query:u.id,item:u,success:g,failure:b},!0)}))}),t("PREPARE_OUTPUT",(u,{query:f,item:E})=>new Promise(g=>{d(f,u,E).then(b=>{if(!b)return g(u);const I=[];f("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_ORIGINAL")&&I.push(()=>new Promise(y=>{y({name:f("GET_IMAGE_TRANSFORM_VARIANTS_ORIGINAL_NAME"),file:u})})),f("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_DEFAULT")&&I.push((y,D,V)=>new Promise(k=>{y(D,V).then(B=>k({name:f("GET_IMAGE_TRANSFORM_VARIANTS_DEFAULT_NAME"),file:B}))}));const v=f("GET_IMAGE_TRANSFORM_VARIANTS")||{};i(v,(y,D)=>{const V=h(D);I.push((k,B,X)=>new Promise(N=>{V(k,B,X).then(W=>N({name:y,file:W}))}))});const C=f("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY"),w=f("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY_MODE"),x=C===null?null:C/100,R=f("GET_IMAGE_TRANSFORM_OUTPUT_MIME_TYPE"),O=f("GET_IMAGE_TRANSFORM_CLIENT_TRANSFORMS")||o;E.setMetadata("output",{type:R,quality:x,client:O},!0);const L=(y,D)=>new Promise((V,k)=>{const B=_({},D);Object.keys(B).filter(Y=>Y!=="exif").forEach(Y=>{O.indexOf(Y)===-1&&delete B[Y]});const{resize:X,exif:N,output:W,crop:F,filter:$,markup:G}=B,U={image:{orientation:N?N.orientation:null},output:W&&(W.type||typeof W.quality=="number"||W.background)?{type:W.type,quality:typeof W.quality=="number"?W.quality*100:null,background:W.background||f("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR")||null}:void 0,size:X&&(X.size.width||X.size.height)?_({mode:X.mode,upscale:X.upscale},X.size):void 0,crop:F&&!c(F)?_({},F):void 0,markup:G&&G.length?G.map(f0):[],filter:$};if(U.output){const Y=W.type?W.type!==y.type:!1,ot=/\/jpe?g$/.test(y.type),rt=W.quality!==null?ot&&w==="always":!1;if(!!!(U.size||U.crop||U.filter||Y||rt))return V(y)}const H={beforeCreateBlob:f("GET_IMAGE_TRANSFORM_BEFORE_CREATE_BLOB"),afterCreateBlob:f("GET_IMAGE_TRANSFORM_AFTER_CREATE_BLOB"),canvasMemoryLimit:f("GET_IMAGE_TRANSFORM_CANVAS_MEMORY_LIMIT"),stripImageHead:f("GET_IMAGE_TRANSFORM_OUTPUT_STRIP_IMAGE_HEAD")};d0(y,U,H).then(Y=>{const ot=n(Y,gx(y.name,Ex(Y.type)));V(ot)}).catch(k)}),P=I.map(y=>y(L,u,E.getMetadata()));Promise.all(P).then(y=>{g(y.length===1&&y[0].name===null?y[0].file:y)})})})),{options:{allowImageTransform:[!0,s.BOOLEAN],imageTransformImageFilter:[null,s.FUNCTION],imageTransformOutputMimeType:[null,s.STRING],imageTransformOutputQuality:[null,s.INT],imageTransformOutputStripImageHead:[!0,s.BOOLEAN],imageTransformClientTransforms:[null,s.ARRAY],imageTransformOutputQualityMode:["always",s.STRING],imageTransformVariants:[null,s.OBJECT],imageTransformVariantsIncludeDefault:[!0,s.BOOLEAN],imageTransformVariantsDefaultName:[null,s.STRING],imageTransformVariantsIncludeOriginal:[!1,s.BOOLEAN],imageTransformVariantsOriginalName:["original_",s.STRING],imageTransformBeforeCreateBlob:[null,s.FUNCTION],imageTransformAfterCreateBlob:[null,s.FUNCTION],imageTransformCanvasMemoryLimit:[vf&&g0?4096*4096:null,s.INT],imageTransformCanvasBackgroundColor:[null,s.STRING]}}};vf&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:mE}));/*!
* FilePondPluginImageValidateSize 1.2.7
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const E0=t=>/^image/.test(t.type),b0=t=>new Promise((e,s)=>{const i=document.createElement("img");i.src=URL.createObjectURL(t),i.onerror=a=>{clearInterval(n),s(a)};const n=setInterval(()=>{i.naturalWidth&&i.naturalHeight&&(clearInterval(n),URL.revokeObjectURL(i.src),e({width:i.naturalWidth,height:i.naturalHeight}))},1)}),gE=({addFilter:t,utils:e})=>{const{Type:s,replaceInString:i,isFile:n}=e,a=(o,h,c)=>new Promise((d,u)=>{const f=({width:E,height:g})=>{const{minWidth:b,minHeight:I,maxWidth:v,maxHeight:C,minResolution:w,maxResolution:x}=h,R=E*g;E<b||g<I?u("TOO_SMALL"):E>v||g>C?u("TOO_BIG"):w!==null&&R<w?u("TOO_LOW_RES"):x!==null&&R>x&&u("TOO_HIGH_RES"),d()};b0(o).then(f).catch(()=>{if(!c){u();return}c(o,h).then(f).catch(()=>u())})});return t("LOAD_FILE",(o,{query:h})=>new Promise((c,d)=>{if(!n(o)||!E0(o)||!h("GET_ALLOW_IMAGE_VALIDATE_SIZE")){c(o);return}const u={minWidth:h("GET_IMAGE_VALIDATE_SIZE_MIN_WIDTH"),minHeight:h("GET_IMAGE_VALIDATE_SIZE_MIN_HEIGHT"),maxWidth:h("GET_IMAGE_VALIDATE_SIZE_MAX_WIDTH"),maxHeight:h("GET_IMAGE_VALIDATE_SIZE_MAX_HEIGHT"),minResolution:h("GET_IMAGE_VALIDATE_SIZE_MIN_RESOLUTION"),maxResolution:h("GET_IMAGE_VALIDATE_SIZE_MAX_RESOLUTION")},f=h("GET_IMAGE_VALIDATE_SIZE_MEASURE");a(o,u,f).then(()=>{c(o)}).catch(E=>{const g=E?{TOO_SMALL:{label:h("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_SIZE_TOO_SMALL"),details:h("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MIN_SIZE")},TOO_BIG:{label:h("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_SIZE_TOO_BIG"),details:h("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MAX_SIZE")},TOO_LOW_RES:{label:h("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_RESOLUTION_TOO_LOW"),details:h("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MIN_RESOLUTION")},TOO_HIGH_RES:{label:h("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_RESOLUTION_TOO_HIGH"),details:h("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MAX_RESOLUTION")}}[E]:{label:h("GET_IMAGE_VALIDATE_SIZE_LABEL_FORMAT_ERROR"),details:o.type};d({status:{main:g.label,sub:E?i(g.details,u):g.details}})})})),{options:{allowImageValidateSize:[!0,s.BOOLEAN],imageValidateSizeLabelFormatError:["Image type not supported",s.STRING],imageValidateSizeMeasure:[null,s.FUNCTION],imageValidateSizeMinResolution:[null,s.INT],imageValidateSizeMaxResolution:[null,s.INT],imageValidateSizeLabelImageResolutionTooLow:["Resolution is too low",s.STRING],imageValidateSizeLabelImageResolutionTooHigh:["Resolution is too high",s.STRING],imageValidateSizeLabelExpectedMinResolution:["Minimum resolution is {minResolution}",s.STRING],imageValidateSizeLabelExpectedMaxResolution:["Maximum resolution is {maxResolution}",s.STRING],imageValidateSizeMinWidth:[1,s.INT],imageValidateSizeMinHeight:[1,s.INT],imageValidateSizeMaxWidth:[65535,s.INT],imageValidateSizeMaxHeight:[65535,s.INT],imageValidateSizeLabelImageSizeTooSmall:["Image is too small",s.STRING],imageValidateSizeLabelImageSizeTooBig:["Image is too big",s.STRING],imageValidateSizeLabelExpectedMinSize:["Minimum size is {minWidth} Ã— {minHeight}",s.STRING],imageValidateSizeLabelExpectedMaxSize:["Maximum size is {maxWidth} Ã— {maxHeight}",s.STRING]}}},I0=typeof window!="undefined"&&typeof window.document!="undefined";I0&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:gE}));/*!
* FilePondPluginMediaPreview 1.0.1
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit undefined for details.
*/const xh=t=>/^video/.test(t.type),da=t=>/^audio/.test(t.type),Wo=t=>/pdf$/.test(t.type);class _0{constructor(e,s){this.mediaEl=e,this.audioElems=s,this.onplayhead=!1,this.duration=0,this.timelineWidth=this.audioElems.timeline.offsetWidth-this.audioElems.playhead.offsetWidth,this.moveplayheadFn=this.moveplayhead.bind(this),this.registerListeners()}registerListeners(){this.mediaEl.addEventListener("timeupdate",this.timeUpdate.bind(this),!1),this.mediaEl.addEventListener("canplaythrough",()=>this.duration=this.mediaEl.duration,!1),this.audioElems.timeline.addEventListener("click",this.timelineClicked.bind(this),!1),this.audioElems.button.addEventListener("click",this.play.bind(this)),this.audioElems.playhead.addEventListener("mousedown",this.mouseDown.bind(this),!1),window.addEventListener("mouseup",this.mouseUp.bind(this),!1)}play(){this.mediaEl.paused?this.mediaEl.play():this.mediaEl.pause(),this.audioElems.button.classList.toggle("play"),this.audioElems.button.classList.toggle("pause")}timeUpdate(){let e=this.mediaEl.currentTime/this.duration*100;this.audioElems.playhead.style.marginLeft=e+"%",this.mediaEl.currentTime===this.duration&&(this.audioElems.button.classList.toggle("play"),this.audioElems.button.classList.toggle("pause"))}moveplayhead(e){let s=e.clientX-this.getPosition(this.audioElems.timeline);s>=0&&s<=this.timelineWidth&&(this.audioElems.playhead.style.marginLeft=s+"px"),s<0&&(this.audioElems.playhead.style.marginLeft="0px"),s>this.timelineWidth&&(this.audioElems.playhead.style.marginLeft=this.timelineWidth-4+"px")}timelineClicked(e){this.moveplayhead(e),this.mediaEl.currentTime=this.duration*this.clickPercent(e)}mouseDown(){this.onplayhead=!0,window.addEventListener("mousemove",this.moveplayheadFn,!0),this.mediaEl.removeEventListener("timeupdate",this.timeUpdate.bind(this),!1)}mouseUp(e){window.removeEventListener("mousemove",this.moveplayheadFn,!0),this.onplayhead==!0&&(this.moveplayhead(e),this.mediaEl.currentTime=this.duration*this.clickPercent(e),this.mediaEl.addEventListener("timeupdate",this.timeUpdate.bind(this),!1)),this.onplayhead=!1}clickPercent(e){return(e.clientX-this.getPosition(this.audioElems.timeline))/this.timelineWidth}getPosition(e){return e.getBoundingClientRect().left}}const w0=t=>t.utils.createView({name:"media-preview",tag:"div",ignoreRect:!0,create:({root:e,props:s})=>{const i=e.query("GET_ITEM",{id:s.id});if(Wo(i.file))e.ref.media=document.createElement("object"),e.ref.media.setAttribute("height",300),e.ref.media.setAttribute("width",320),e.ref.media.setAttribute("style","position:absolute;left:0;right:0;margin:auto;"),e.element.appendChild(e.ref.media);else{let n=da(i.file)?"audio":"video";if(e.ref.media=document.createElement(n),e.ref.media.setAttribute("controls",!0),e.element.appendChild(e.ref.media),da(i.file)){let a=document.createDocumentFragment();e.ref.audio=[],e.ref.audio.container=document.createElement("div"),e.ref.audio.button=document.createElement("span"),e.ref.audio.timeline=document.createElement("div"),e.ref.audio.playhead=document.createElement("div"),e.ref.audio.container.className="audioplayer",e.ref.audio.button.className="playpausebtn play",e.ref.audio.timeline.className="timeline",e.ref.audio.playhead.className="playhead",e.ref.audio.timeline.appendChild(e.ref.audio.playhead),e.ref.audio.container.appendChild(e.ref.audio.button),e.ref.audio.container.appendChild(e.ref.audio.timeline),a.appendChild(e.ref.audio.container),e.element.appendChild(a)}}},write:t.utils.createRoute({DID_MEDIA_PREVIEW_LOAD:({root:e,props:s})=>{const{id:i}=s,n=e.query("GET_ITEM",{id:i});if(!n)return;let a=window.URL||window.webkitURL,o=new Blob([n.file],{type:n.file.type});e.ref.media.type=n.file.type,Wo(n.file)?e.ref.media.data=a.createObjectURL(o):e.ref.media.src=n.file.mock&&n.file.url||a.createObjectURL(o),da(n.file)&&new _0(e.ref.media,e.ref.audio),e.ref.media.addEventListener("loadeddata",()=>{if(xh(n.file)||da(n.file)){let h=75;if(xh(n.file)){let c=e.ref.media.offsetWidth,d=e.ref.media.videoWidth/c;h=e.ref.media.videoHeight/d}e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:i,height:h})}},!1),e.ref.media.addEventListener("load",()=>{Wo(n.file)&&e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:i,height:e.ref.media.scrollHeight})},!1)}})}),v0=t=>{const e=({root:i,props:n})=>{const{id:a}=n;i.query("GET_ITEM",a)&&i.dispatch("DID_MEDIA_PREVIEW_LOAD",{id:a})},s=({root:i,props:n})=>{const a=w0(t);i.ref.media=i.appendChildView(i.createChildView(a,{id:n.id}))};return t.utils.createView({name:"media-preview-wrapper",create:s,write:t.utils.createRoute({DID_MEDIA_PREVIEW_CONTAINER_CREATE:e})})},EE=t=>{const{addFilter:e,utils:s}=t,{Type:i,createRoute:n}=s,a=v0(t);return e("CREATE_VIEW",o=>{const{is:h,view:c,query:d}=o;if(!h("file"))return;const u=({root:f,props:E})=>{const{id:g}=E,b=d("GET_ITEM",g);!b||b.archived||!xh(b.file)&&!Wo(b.file)&&!da(b.file)||(f.ref.mediaPreview=c.appendChildView(c.createChildView(a,{id:g})),f.dispatch("DID_MEDIA_PREVIEW_CONTAINER_CREATE",{id:g}))};c.registerWriter(n({DID_LOAD_ITEM:u},({root:f,props:E})=>{const{id:g}=E,b=d("GET_ITEM",g);!xh(b.file)&&!Wo(b.file)&&!da(b.file)||f.rect.element.hidden}))}),{options:{allowPdfPreview:[!0,i.BOOLEAN],allowVideoPreview:[!0,i.BOOLEAN],allowAudioPreview:[!0,i.BOOLEAN]}}},T0=typeof window!="undefined"&&typeof window.document!="undefined";T0&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:EE}));function Ut({formID:t,fieldKey:e,fieldData:s,children:i,noLabel:n,noErrMsg:a,isBuilder:o}){var R,O,L,P,y,D,V,k,B,X;const{"*":h}=_u(),c=et(qb),d=et(cn),{styleMode:u}=d,[f,E,g]=h.split("/"),b=u&&f==="theme-customize"&&["err-msg","err-txt","err-txt-pre-i","err-txt-suf-i"].indexOf(E)>=0,I=u&&f==="field-theme-customize"&&["err-msg","err-txt","err-txt-pre-i","err-txt-suf-i"].indexOf(E)>=0&&g===e,v=((R=s.valid)==null?void 0:R.hide)||!1,C=((L=(O=s.err)==null?void 0:O.req)==null?void 0:L.dflt)||"",w=j.useRef(null),x=N=>{const W=N.getBoundingClientRect();return W.top>=0&&W.left>=0&&W.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&W.right<=(window.innerWidth||document.documentElement.clientWidth)};if(C&&w.current){const N=w.current,W=document.body.getBoundingClientRect(),$=N.getBoundingClientRect().top-W.top;x(N)||window.scroll({top:$,behavior:"smooth"})}return p.jsxs("div",A(_({ref:w,"data-testid":`${e}-fld-wrp`,"data-dev-fld-wrp":e,className:`${e}-fld-wrp ${S(e,"fld-wrp")} ${u?"":"drag"} ${v?"fld-hide":""}`,style:{direction:c}},M(e,"fld-wrp")),{children:[!n&&p.jsxs("div",A(_({"data-testid":`${e}-lbl-wrp`,"data-dev-lbl-wrp":e,className:`${e}-lbl-wrp ${S(e,"lbl-wrp")}`},M(e,"lbl-wrp")),{children:[!((P=s==null?void 0:s.valid)!=null&&P.hideLbl)&&"lbl"in s&&p.jsxs("label",A(_({"data-testid":`${e}-lbl`,"data-dev-lbl":e,title:s.lbl,className:`${e}-lbl ${S(e,"lbl")}`,htmlFor:e},M(e,"lbl")),{children:[((y=s.valid)==null?void 0:y.req)&&((D=s.valid)==null?void 0:D.reqShow)&&((V=s.valid)==null?void 0:V.reqPos)==="before"&&p.jsx("span",A(_({"data-testid":`${e}-req-smbl`,"data-dev-req-smbl":e,className:`${e}-req-smbl ${S(e,"req-smbl")}`},M(e,"req-smbl")),{children:"*"})),s.lblPreIcn&&p.jsx("img",_({"data-testid":`${e}-lbl-pre-i`,"data-dev-lbl-pre-i":e,className:`${e}-lbl-pre-i ${S(e,"lbl-pre-i")}`,src:s.lblPreIcn,alt:""},M(e,"lbl-pre-i"))),p.jsx(ms,{html:s.lbl.replace(/\$_bf_\$/g,"\\")}),s.lblSufIcn&&p.jsx("img",_({"data-testid":`${e}-lbl-suf-i`,"data-dev-lbl-suf-i":e,className:`${e}-lbl-suf-i ${S(e,"lbl-suf-i")}`,src:s.lblSufIcn,alt:""},M(e,"lbl-suf-i"))),((k=s.valid)==null?void 0:k.req)&&((B=s.valid)==null?void 0:B.reqShow)&&((X=s.valid)==null?void 0:X.reqPos)!=="before"&&p.jsx("span",A(_({"data-testid":`${e}-req-smbl`,"data-dev-req-smbl":e,className:`${e}-req-smbl ${S(e,"req-smbl")}`},M(e,"req-smbl")),{children:"*"}))]})),(s.subtitle||s.subTlePreIcn||s.subTleSufIcn)&&p.jsxs("div",A(_({"data-testid":`${e}-sub-titl`,"data-dev-sub-titl":e,className:`${e}-sub-titl ${S(e,"sub-titl")}`},M(e,"sub-titl")),{children:[s.subTlePreIcn&&p.jsx("img",_({"data-testid":`${e}-sub-titl-pre-i`,"data-dev-sub-titl-pre-i":e,className:`${e}-sub-titl-pre-i ${S(e,"sub-titl-pre-i")}`,src:s.subTlePreIcn,alt:""},M(e,"sub-titl-pre-i"))),p.jsx(ms,{html:s.subtitle||""}),s.subTleSufIcn&&p.jsx("img",_({"data-testid":`${e}-sub-titl-suf-i`,"data-dev-sub-titl-suf-i":e,className:`${e}-sub-titl-suf-i ${S(e,"sub-titl-suf-i")}`,src:s.subTleSufIcn,alt:""},M(e,"sub-titl-suf-i")))]}))]})),p.jsxs("div",A(_({"data-testid":`${e}-inp-wrp`,className:`${e}-inp-wrp ${S(e,"inp-wrp")}`},M(e,"inp-wrp")),{children:[i,(s.helperTxt||s.hlpPreIcn||s.hlpSufIcn)&&p.jsxs("div",A(_({"data-testid":`${e}-hlp-txt`,"data-dev-hlp-txt":e,className:`${e}-hlp-txt ${S(e,"hlp-txt")}`},M(e,"hlp-txt")),{children:[s.hlpPreIcn&&p.jsx("img",_({"data-testid":`${e}-hlp-txt-pre-i`,"data-dev-hlp-txt-pre-i":e,className:`${e}-hlp-txt-pre-i ${S(e,"hlp-txt-pre-i")}`,src:s.hlpPreIcn,alt:""},M(e,"hlp-txt-pre-i"))),p.jsx(ms,{html:s.helperTxt||""}),s.hlpSufIcn&&p.jsx("img",_({"data-testid":`${e}-hlp-txt-suf-i`,"data-dev-hlp-txt-suf-i":e,className:`${e}-hlp-txt-suf-i ${S(e,"hlp-txt-suf-i")}`,src:s.hlpSufIcn,alt:""},M(e,"hlp-txt-suf-i")))]})),!a&&(b||I)&&p.jsxs("div",A(_({"data-testid":`${e}-err-msg`,"data-dev-err-msg":e,className:`${e}-err-msg ${S(e,"err-msg")}`},M(e,"err-msg")),{children:[s.errPreIcn&&p.jsx("img",_({"data-testid":`${e}-err-txt-pre-i`,"data-dev-err-txt-pre-i":e,className:`${e}-err-txt-pre-i ${S(e,"err-txt-pre-i")}`,src:s.errPreIcn,alt:""},M(e,"err-txt-pre-i"))),p.jsx("div",A(_({"data-testid":`${e}-err-txt`,"data-dev-err-txt":e,className:`${e}-err-txt ${S(e,"err-txt")}`},M(e,"err-txt")),{children:p.jsx(ms,{html:`${C||"This is an example of an error message. this message will vary by a condition or validation check."} `})})),s.errSufIcn&&p.jsx("img",_({"data-testid":`${e}-err-txt-suf-i`,"data-dev-err-txt-suf-i":e,className:`${e}-err-txt-suf-i ${S(e,"err-txt-suf-i")}`,src:s.errSufIcn,alt:""},M(e,"err-txt-suf-i")))]}))]}))]}))}function x0({attr:t,formID:e,fieldKey:s,styleClasses:i}){const[n]=rn(oe),a=n[s],{config:o}=a,[h,c]=j.useState(0),d=j.useRef(null),u=j.useRef(null);j.useEffect(()=>{const E=document.getElementById("bit-grid-layout").contentWindow;E.bit_filepond||(E.bit_filepond=Tm),E.bit_filepond_plugin_image_preview||(E.bit_filepond_plugin_image_preview=lE),E.bit_filepond_plugin_file_validate_size||(E.bit_filepond_plugin_file_validate_size=sE),E.bit_filepond_plugin_file_validate_type||(E.bit_filepond_plugin_file_validate_type=iE),E.bit_filepond_plugin_image_crop||(E.bit_filepond_plugin_image_crop=nE),E.bit_filepond_plugin_image_resize||(E.bit_filepond_plugin_image_resize=cE),E.bit_filepond_plugin_image_transform||(E.bit_filepond_plugin_image_transform=mE),E.bit_filepond_plugin_image_validate_size||(E.bit_filepond_plugin_image_validate_size=gE),E.bit_filepond_plugin_media_preview||(E.bit_filepond_plugin_media_preview=EE);const g={configSetting:o,fieldKey:s,window:E,document:document.getElementById("bit-grid-layout").contentDocument,formID:e,ajaxURL:typeof bits=="undefined"?bitFromsFront==null?void 0:bitFromsFront.ajaxURL:bits.ajaxURL,nonce:typeof bits=="undefined"?"":bits.nonce,uploadFileToServer:!0,onFileUpdate:()=>c(v=>v+1)};u!=null&&u.current||(u.current=yt(`#filepond-${s}-container`));const b=d.current,I=u.current;b&&(Tm.destroy(u.current),I.firstChild&&I.removeChild(I.firstChild)),d.current=new rI(I,g),c(v=>v+1)},[a==null?void 0:a.config]);const f=(E,g=!1)=>{var b;if((b=yt(`.${s}-inp-wrp .${E}`))==null||b.setAttribute(`data-dev-${E}`,s),g){const I=Yb(`.${s}-inp-wrp .${E}`);I.length>0&&[...I].map(v=>{v.setAttribute(`data-dev-${E}`,s)})}};return j.useEffect(()=>{f("filepond--root"),f("filepond--drop-label"),f("filepond--label-action"),f("filepond--panel-root"),f("filepond--item-panel",!0),f("filepond--file-action-button",!0),f("filepond--drip-blob"),f("filepond--file")},[h]),p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:i}),p.jsxs(Ut,{formID:e,fieldKey:s,fieldData:t,children:[p.jsx("input",_(_({hidden:!0,id:s,type:"file",className:"filepond",name:"filepond"},"disabled"in a.valid&&{disabled:a.valid.disabled}),"readonly"in a.valid&&{readOnly:a.valid.readonly})),p.jsx("div",{ref:u,id:`filepond-${s}-container`,className:`filepond-${s}-container ${a.valid.disabled?"disabled":""} ${a.valid.readonly?"readonly":""}`})]})]})}var S0=j.memo(x0);function R0({fieldKey:t,attr:e,styleClasses:s,buttonDisabled:i,handleReset:n,formID:a,data:o}){const h=kr(s);return p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:h}),p.jsx(Ut,{formID:a,fieldKey:t,fieldData:e,noLabel:!0,noErrMsg:!0,children:p.jsx("div",A(_({"data-testid":`${t}-inp-fld-wrp`,className:`${t}-inp-fld-wrp ${S(t,"inp-fld-wrp")}`},M(t,"inp-fld-wrp")),{children:p.jsxs("button",A(_(_(A(_({"data-testid":t,"data-dev-btn":t,className:`${t}-btn ${S(t,"btn")}`},M(t,"btn")),{type:e.btnTyp}),e.btnTyp==="reset"&&{onClick:n}),"disabled"in e.valid&&{disabled:e.valid.disabled}),{name:e.fieldName,children:[e.btnPreIcn&&p.jsx("img",_({"data-testid":`${t}-btn-pre-i`,"data-dev-btn-pre-i":t,className:`${t}-btn-pre-i ${S(t,"btn-pre-i")}`,src:e.btnPreIcn,alt:""},M(t,"btn-pre-i"))),p.jsx(ms,{html:e.txt||""}),e.btnSufIcn&&p.jsx("img",_({"data-testid":`${t}-btn-suf-i`,"data-dev-btn-suf-i":t,className:`${t}-btn-suf-i ${S(t,"btn-suf-i")}`,src:e.btnSufIcn,alt:""},M(t,"btn-suf-i")))]}))}))})]})}function C0({attr:t,onBlurHandler:e,resetFieldValue:s,formID:i,fieldKey:n,styleClasses:a}){const o=et(oe),[h,c]=j.useState({checked:[]}),d=kr(o[n]),[u,f]=j.useState(""),E=(g,b)=>{const{checked:I}=g.target;if(I)h.checked.push(b);else{const v=h.checked.indexOf(b);h.checked.splice(v,1),c({checked:h.checked})}Ot(n)};return p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:a}),p.jsx(Ut,{formID:i,fieldKey:n,fieldData:t,children:p.jsxs("div",A(_({"data-testid":`${n}-cc`,"data-dev-cc":n,className:`${n}-cc ${S(n,"cc")}`},M(n,"cc")),{children:[p.jsx("svg",{className:`${n}-cks`,children:p.jsx("symbol",{id:`${n}-ck-svg`,viewBox:"0 0 12 10",children:p.jsx("polyline",{className:`${n}-ck-svgline`,points:"1.5 6 4.5 9 10.5 1"})})}),t.opt.map((g,b)=>p.jsxs("div",A(_({"data-testid":`${n}-cw`,"data-dev-cw":n,className:`${n}-cw ${S(n,"cw")}`},M(n,"cw")),{children:[p.jsx("input",_(A(_(A(_({"data-testid":`${n}-ci`,id:`${n}-chk-${b}`,type:"checkbox",className:`${n}-ci ${S(n,"ci")}`},(t.valid.disabled||g.disabled)&&{disabled:!0}),{defaultValue:g.val||g.lbl}),t.valid.req&&{required:!0}),{name:`${d.lbl}[]`,checked:h.checked.includes(b)||(g==null?void 0:g.check),onChange:I=>E(I,b)}),M(n,"ci"))),p.jsxs("label",A(_({"data-testid":`${n}-cl`,"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-chk-${b}`,className:`${n}-cl ${S(n,"cl")}`},M(n,"cl")),{children:[p.jsx("span",A(_({"data-testid":`${n}-bx`,"data-dev-bx":n,"data-bx":!0,className:`${n}-bx ${S(n,"bx")}`},M(n,"bx")),{children:p.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp ${S(n,"svgwrp")}`,children:p.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn ${S(n,"ck-icn")}`})})})),p.jsx("span",A(_({"data-testid":`${n}-ct`,"data-dev-ct":n,className:`${n}-ct ${S(n,"ct")}`},M(n,"ct")),{children:p.jsx(ms,{html:g.lbl})}))]}))]}),`opt-${b+24}`)),t.addOtherOpt&&p.jsxs("div",A(_({"data-testid":`${n}-cw`,"data-dev-cw":n,className:`${n}-cw ${S(n,"cw")}`},M(n,"cw")),{children:[p.jsx("input",_(A(_({"data-testid":`${n}-ci`,"data-oopt":n,id:`${n}-chk-${t.opt.length}`,type:"checkbox",className:`${n}-ci ${S(n,"ci")}`,disabled:t.valid.disabled,value:u},t.valid.req&&{required:!0}),{name:`${d.lbl}[]`,checked:h.checked.includes(t.opt.length),onChange:g=>E(g,t.opt.length)}),M(n,"ci"))),p.jsxs("label",A(_({"data-testid":`${n}-cl`,"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-chk-${t.opt.length}`,className:`${n}-cl ${S(n,"cl")}`},M(n,"cl")),{children:[p.jsx("span",A(_({"data-testid":`${n}-bx`,"data-dev-ck":n,"data-bx":!0,className:`${n}-bx ${n}-ck ${S(n,"ck")}`},M(n,"ck")),{children:p.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp ${S(n,"svgwrp")}`,children:p.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn ${S(n,"ck-icn")}`})})})),p.jsx("span",A(_({"data-testid":`${n}-ct`,"data-dev-ct":n,className:`${n}-ct ${S(n,"ct")}`},M(n,"ct")),{children:"Other.."}))]})),p.jsx("div",{"data-oinp-wrp":!0,className:`${n}-other-inp-wrp`,children:p.jsx("input",A(_(_(_({"data-testid":`${n}-other-inp`,"data-dev-other-inp":n,type:"text",className:`${n}-other-inp ${S(n,"other-inp")}`},t.valid.otherOptReq&&{required:!0}),"otherInpPh"in t&&{placeholder:t.otherInpPh}),!("otherInpPh"in t)&&{placeholder:"Other..."}),{value:u,onChange:g=>f(g.target.value)}))})]}),`opt-${t.opt.length+24}`)]}))})]})}var qt,ee,At,_n,ma,Vs,$h,Nh,de,ci,tl,hi,Pi,vs,pr,zs,wn,el,sl,il,ga,fr,Ph,nl,Ea,ba,di,ui,ue,Ts,xs,Ia,rl,al,_a,wa,va,Ta,Dh,bE,Fh,IE,ol,np,Gh,_E,Bh,wE,pe,Le,Ss,ii,kh,vE,jh,TE,Uh,xE,mr,Ro,xa,Zc,ll,rp,cl,ap,Sa,Qc,hl,op,dl,lp,gr,Co,Ws,yi,Er,Oo,ht,ut,Ye,_s,ul,cp,br,yo,Ir,Lo,tf,y0,pl,hp,Vh,SE,zh,RE,fl,dp,vn,Hr,Wh,CE,ml,up,Hh,OE;class O0{constructor(e,s){m(this,Dh);m(this,Fh);m(this,ol);m(this,Gh);m(this,Bh);m(this,pe);m(this,Ss);m(this,kh);m(this,jh);m(this,Uh);m(this,mr);m(this,xa);m(this,ll);m(this,cl);m(this,Sa);m(this,hl);m(this,dl);m(this,gr);m(this,Ws);m(this,Er);m(this,ht);m(this,Ye);m(this,ul);m(this,br);m(this,Ir);m(this,tf);m(this,pl);m(this,Vh);m(this,zh);m(this,fl);m(this,vn);m(this,Wh);m(this,ml);m(this,Hh);m(this,qt,void 0);m(this,ee,void 0);m(this,At,void 0);m(this,_n,void 0);m(this,ma,void 0);m(this,Vs,void 0);m(this,$h,"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>");m(this,Nh,void 0);m(this,de,void 0);m(this,ci,void 0);m(this,tl,void 0);m(this,hi,void 0);m(this,Pi,"");m(this,vs,[]);m(this,pr,!0);m(this,zs,!0);m(this,wn,!0);m(this,el,!0);m(this,sl,!1);m(this,il,!1);m(this,ga,"");m(this,fr,"Select a Country");m(this,Ph,"Search Country");m(this,nl,"No Currency Found");m(this,Ea,370);m(this,ba,30);m(this,di,void 0);m(this,ui,{});m(this,ue,[]);m(this,Ts,{});m(this,xs,{});m(this,Ia,"");m(this,rl,"");m(this,al,null);m(this,_a,"");m(this,wa,[]);m(this,va,void 0);m(this,Ta,!1);l(this,Dh,bE).call(this,s),typeof e=="string"?T(this,qt,r(this,di).querySelector(e)):T(this,qt,e),this.fieldKey=r(this,rl),this.init()}init(){var e;T(this,ee,l(this,pe,Le).call(this,`.${this.fieldKey}-country-hidden-input`)),T(this,At,l(this,pe,Le).call(this,`.${this.fieldKey}-dpd-wrp`)),T(this,_n,l(this,pe,Le).call(this,`.${this.fieldKey}-selected-country-img`)),T(this,ma,l(this,pe,Le).call(this,`.${this.fieldKey}-selected-country-lbl`)),T(this,Vs,r(this,zs)?l(this,pe,Le).call(this,`.${this.fieldKey}-inp-clr-btn`):{}),T(this,Nh,l(this,pe,Le).call(this,`.${this.fieldKey}-option-search-wrp`)),T(this,de,l(this,pe,Le).call(this,`.${this.fieldKey}-opt-search-input`)),T(this,ci,l(this,pe,Le).call(this,`.${this.fieldKey}-search-clear-btn`)),T(this,tl,l(this,pe,Le).call(this,`.${this.fieldKey}-option-wrp`)),T(this,hi,l(this,pe,Le).call(this,`.${this.fieldKey}-option-list`)),this.setMenu({open:!1}),r(this,sl)&&l(this,kh,vE).call(this),r(this,il)&&l(this,jh,TE).call(this),r(this,ga)&&l(this,Gh,_E).call(this),l(this,Bh,wE).call(this),l(this,ol,np).call(this),r(this,ui).observeElm(r(this,ee),"value",(s,i)=>{l(this,ll,rp).call(this,s,i)}),r(this,pr)||(e=r(this,_n))==null||e.remove(),r(this,wn)&&(l(this,Ye,_s).call(this,r(this,de),"padding-right","35px"),l(this,Ye,_s).call(this,r(this,ci),"display","none"))}setSelectedCountryItem(e){if(T(this,Pi,e),!r(this,Pi))return;const s=l(this,dl,lp).call(this);s&&(r(this,pr)&&r(this,_n)&&(r(this,_n).src=`${r(this,Ia)}${s.img}`),l(this,Er,Oo).call(this,r(this,ma),s.lbl),this.setMenu({open:!1}),this.value=s.val||s.lbl,r(this,zs)&&(l(this,Ye,_s).call(this,r(this,Vs),"display","grid"),l(this,Ss,ii).call(this,r(this,Vs),"click",i=>{l(this,cl,ap).call(this,i)})),r(this,va)&&r(this,va).call(this,s.val||s.lbl),l(this,ht,ut).call(this,r(this,At),"aria-label",`${s.lbl} selected`),l(this,Sa,Qc).call(this,r(this,ee),"blur"),setTimeout(()=>{l(this,ht,ut).call(this,r(this,At),"aria-label",s.lbl)},100))}searchOptions(e){l(this,zh,RE).call(this,e);let s=[];e?(s=r(this,ue).filter(i=>i.lbl.toLowerCase().includes(e.toLowerCase())),s.length||(s=[{i:0,lbl:r(this,nl)}]),T(this,vs,s),r(this,wn)&&l(this,Ye,_s).call(this,r(this,ci),"display","grid")):(T(this,vs,r(this,ue)),r(this,wn)&&l(this,Ye,_s).call(this,r(this,ci),"display","none")),l(this,ul,cp).call(this)}setMenu({open:e}){l(this,Ye,_s).call(this,r(this,tl),"max-height",`${e?r(this,Ea):0}px`),e?(l(this,Wh,CE).call(this),r(this,qt).classList.add("menu-open"),l(this,Ss,ii).call(this,r(this,di),"click",s=>l(this,fl,dp).call(this,s)),r(this,de).tabIndex="0",r(this,ci).tabIndex="0",r(this,At).setAttribute("aria-expanded","true"),l(this,ht,ut).call(this,r(this,hi),"aria-hidden",!1),l(this,ht,ut).call(this,r(this,de),"aria-hidden",!1),l(this,ul,cp).call(this)):(r(this,qt).classList.remove("menu-open"),r(this,di).removeEventListener("click",l(this,fl,dp)),setTimeout(()=>{this.searchOptions("")},100),r(this,de).blur(),r(this,de).tabIndex="-1",r(this,ci).tabIndex="-1",r(this,At).setAttribute("aria-expanded","false"),l(this,ht,ut).call(this,r(this,hi),"aria-hidden",!0),l(this,ht,ut).call(this,r(this,de),"aria-hidden",!0))}set disabled(e){String(e).toLowerCase()==="true"?(r(this,qt).classList.add("disabled"),r(this,ee).disabled=!0,r(this,zs)&&l(this,ht,ut).call(this,r(this,Vs),"tabindex","-1"),l(this,ht,ut).call(this,r(this,At),"aria-label","Country Field disabled"),l(this,ht,ut).call(this,r(this,At),"tabindex","-1"),this.setMenu({open:!1}),r(this,wa).forEach(({selector:s,eventType:i,cb:n})=>{s.removeEventListener(i,n)})):String(e).toLowerCase()==="false"&&(r(this,qt).classList.remove("disabled"),r(this,ee).removeAttribute("disabled"),l(this,ht,ut).call(this,r(this,At),"tabindex","0"),r(this,zs)&&l(this,ht,ut).call(this,r(this,Vs),"tabindex","0"),l(this,ht,ut).call(this,r(this,At),"aria-label",r(this,fr)),l(this,ol,np).call(this))}get disabled(){return r(this,ee).disabled}set readonly(e){String(e).toLowerCase()==="true"?(r(this,qt).classList.add("disabled"),r(this,ee).readOnly=!0,l(this,ht,ut).call(this,r(this,At),"tabindex","-1"),r(this,zs)&&l(this,ht,ut).call(this,r(this,Vs),"tabindex","-1"),this.setMenu({open:!1})):String(e).toLowerCase()==="false"&&(r(this,qt).classList.remove("disabled"),r(this,ee).removeAttribute("readonly"),r(this,zs)&&l(this,ht,ut).call(this,r(this,At),"tabindex","0"),l(this,ht,ut).call(this,r(this,Vs),"tabindex","0"))}get readonly(){return r(this,ee).readOnly}set value(e){r(this,ee).value=e,l(this,ht,ut).call(this,r(this,ee),"value",e)}get value(){const e=l(this,dl,lp).call(this);return e.val||e.lbl}destroy(){r(this,hi).innerHTML="",this.value="",l(this,Hh,OE).call(this)}reset(e){T(this,Ta,!0),l(this,cl,ap).call(this),this.destroy(),this.init(),this.setSelectedCountryItem(e),T(this,Ta,!1)}}qt=new WeakMap,ee=new WeakMap,At=new WeakMap,_n=new WeakMap,ma=new WeakMap,Vs=new WeakMap,$h=new WeakMap,Nh=new WeakMap,de=new WeakMap,ci=new WeakMap,tl=new WeakMap,hi=new WeakMap,Pi=new WeakMap,vs=new WeakMap,pr=new WeakMap,zs=new WeakMap,wn=new WeakMap,el=new WeakMap,sl=new WeakMap,il=new WeakMap,ga=new WeakMap,fr=new WeakMap,Ph=new WeakMap,nl=new WeakMap,Ea=new WeakMap,ba=new WeakMap,di=new WeakMap,ui=new WeakMap,ue=new WeakMap,Ts=new WeakMap,xs=new WeakMap,Ia=new WeakMap,rl=new WeakMap,al=new WeakMap,_a=new WeakMap,wa=new WeakMap,va=new WeakMap,Ta=new WeakMap,Dh=new WeakSet,bE=function(e){T(this,di,e.document||document),T(this,ui,e.window||window),T(this,rl,e.fieldKey),T(this,ga,e.defaultValue),T(this,fr,e.placeholder),T(this,Ph,e.searchPlaceholder||"Search Country"),T(this,nl,e.noCountryFoundText||"No Country Found"),T(this,ba,e.rowHeight||30),T(this,Ea,e.maxHeight||370),T(this,pr,e.selectedFlagImage),T(this,zs,e.selectedCountryClearable),T(this,wn,e.searchClearable),T(this,el,e.optionFlagImage),T(this,sl,e.detectCountryByIp),T(this,il,e.detectCountryByGeo),T(this,Ia,e.assetsURL),T(this,va,e.onChange),T(this,Ts,e.attributes||{}),T(this,xs,e.classNames||{}),typeof e.options=="string"&&(e.options=l(this,Fh,IE).call(this,e.options)),T(this,ue,e.options.filter(s=>!s.hide)),T(this,vs,r(this,ue))},Fh=new WeakSet,IE=function(e){const s=e.split("->");let i=r(this,ui);return s.forEach(n=>{i=i[n]}),i},ol=new WeakSet,np=function(){l(this,Ss,ii).call(this,r(this,At),"click",e=>{l(this,ml,up).call(this,e)}),l(this,Ss,ii).call(this,r(this,At),"keyup",e=>{l(this,ml,up).call(this,e)}),l(this,Ss,ii).call(this,r(this,qt),"keydown",e=>{l(this,Uh,xE).call(this,e)}),r(this,wn)&&l(this,Ss,ii).call(this,r(this,ci),"click",()=>{this.searchOptions("")}),l(this,Ss,ii).call(this,r(this,de),"keyup",e=>{l(this,Vh,SE).call(this,e)})},Gh=new WeakSet,_E=function(){const e=r(this,ue).find(s=>{const i=r(this,ga);return s.i===i?!0:s.val?s.val===i:s.lbl===i});e&&this.setSelectedCountryItem(e.i)},Bh=new WeakSet,wE=function(){const e=r(this,ee).name,i=decodeURIComponent(`${r(this,di).URL}`.replace(/\+/g,"%20")).replace(new RegExp(`.*${e}=([^&]*).*|(.*)`),"$1");i&&l(this,ll,rp).call(this,"",i)},pe=new WeakSet,Le=function(e){return r(this,qt).querySelector(e)},Ss=new WeakSet,ii=function(e,s,i){e.addEventListener(s,i),r(this,wa).push({selector:e,eventType:s,cb:i})},kh=new WeakSet,vE=function(){const{protocol:e}=r(this,ui).location;fetch(`${e}//www.cloudflare.com/cdn-cgi/trace`).then(s=>s.text()).then(s=>{const i=s.trim().split(`
`).reduce((n,a)=>{const[o,h]=a.split("=");return n[o]=h,n},{});this.setSelectedCountryItem(i==null?void 0:i.loc)})},jh=new WeakSet,TE=function(){navigator.geolocation.getCurrentPosition(e=>{const{latitude:s,longitude:i}=e.coords,{protocol:n}=r(this,ui).location;fetch(`${n}//api.geonames.org/countryCodeJSON?username=bitcodezoho1&lat=${s}&lng=${i}`).then(a=>a.json()).then(a=>{this.setSelectedCountryItem(a.countryCode)})})},Uh=new WeakSet,xE=function(e){var a,o;e.stopPropagation();const s=r(this,di).activeElement;let i=null;if(l(this,vn,Hr).call(this)){const h=Number(s.dataset.index||-1);if(e.key==="ArrowDown"||!e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,de))i=l(this,pe,Le).call(this,".option:not(.disabled-opt)");else if(s.classList.contains("option")){const c=l(this,xa,Zc).call(this,h,"next"),d=l(this,mr,Ro).call(this,c);d?i=d:c+1<r(this,vs).length&&((a=this.virtualOptionList)==null||a.scrollToIndex(c),setTimeout(()=>{const u=l(this,mr,Ro).call(this,c);u&&u.focus()},50))}}else if(e.key==="ArrowUp"||e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,de))i=r(this,At),l(this,vn,Hr).call(this)&&this.setMenu({open:!1});else if(s.classList.contains("option")){const c=l(this,xa,Zc).call(this,h,"previous"),d=l(this,mr,Ro).call(this,c);d?i=d:c>0?((o=this.virtualOptionList)==null||o.scrollToIndex(c),setTimeout(()=>{const u=l(this,mr,Ro).call(this,c);u&&u.focus()},50)):d||(i=r(this,de))}}else e.key==="Escape"&&this.setMenu({open:!1})}else if(e.key>="a"&&e.key<="z"){clearTimeout(r(this,al)),T(this,_a,r(this,_a)+e.key),T(this,al,setTimeout(()=>{T(this,_a,"")},300));const h=r(this,ue).find(c=>!c.disabled&&c.lbl.toLowerCase().startsWith(r(this,_a)));h&&this.setSelectedCountryItem(h.i)}else if(e.key==="ArrowDown"||e.key==="ArrowUp"){e.preventDefault();const h=l(this,hl,op).call(this),c=e.key==="ArrowDown"?"next":"previous",d=l(this,xa,Zc).call(this,h,c);d>-1&&d<r(this,ue).length&&(this.value=r(this,ue)[d].val||r(this,ue)[d].lbl,l(this,Sa,Qc).call(this,r(this,ee),"blur"))}i&&i.focus()},mr=new WeakSet,Ro=function(e){return l(this,pe,Le).call(this,`.${this.fieldKey}-option-list .option[data-index="${e}"]`)},xa=new WeakSet,Zc=function(e=-1,s){if(s==="next"){const i=r(this,ue).length;for(let n=e+1;n<i;n+=1)if(!r(this,ue)[n].disabled)return n}else if(s==="previous"){for(let i=e-1;i>=0;i-=1)if(!r(this,ue)[i].disabled)return i}},ll=new WeakSet,rp=function(e,s){const i=r(this,ue).find(n=>n.i===s||n.val===s||n.lbl===s);i&&e!==s&&this.setSelectedCountryItem(i.i),typeof bit_conditionals!="undefined"&&bit_conditionals({target:r(this,ee)})},cl=new WeakSet,ap=function(e){e==null||e.stopPropagation(),T(this,Pi,""),r(this,pr)&&(r(this,_n).src=r(this,$h)),l(this,Er,Oo).call(this,r(this,ma),r(this,fr)),r(this,zs)&&l(this,Ye,_s).call(this,r(this,Vs),"display","none"),l(this,ht,ut).call(this,r(this,At),"aria-label","Selected country cleared"),r(this,Ta)||r(this,At).focus(),this.setMenu({open:!1}),this.value="",l(this,Sa,Qc).call(this,r(this,ee),"blur"),setTimeout(()=>{l(this,ht,ut).call(this,r(this,At),"aria-label",r(this,fr))},100)},Sa=new WeakSet,Qc=function(e,s){const i=new Event(s);e.dispatchEvent(i)},hl=new WeakSet,op=function(){return r(this,vs).findIndex(e=>e.i===r(this,Pi))},dl=new WeakSet,lp=function(){return r(this,ue).find(e=>e.i===r(this,Pi))},gr=new WeakSet,Co=function(e){return r(this,di).createElement(e)},Ws=new WeakSet,yi=function(e,s){e.classList.add(s)},Er=new WeakSet,Oo=function(e,s){e.textContent=s},ht=new WeakSet,ut=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},Ye=new WeakSet,_s=function(e,s,i){e.style.setProperty(s,i,"important")},ul=new WeakSet,cp=function(){if(!l(this,vn,Hr).call(this))return;l(this,pl,hp).call(this);const e=l(this,hl,op).call(this),s=l(this,pe,Le).call(this,`.option[data-index="${e}"]`);s&&s.scrollIntoView({block:"nearest",inline:"nearest"})},br=new WeakSet,yo=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,Ws,yi).call(this,e,i))},Ir=new WeakSet,Lo=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,ht,ut).call(this,e,s[n].key,s[n].value)},tf=new WeakSet,y0=function(){const e=l(this,pe,Le).call(this,".option");if(!e)return;const s=r(this,ui).getComputedStyle(e),i=parseFloat(s.marginTop)+parseFloat(s.marginBottom),n=e.offsetHeight+i||0;n!==r(this,ba)&&(T(this,ba,n),r(this,hi).innerHTML="",l(this,pl,hp).call(this))},pl=new WeakSet,hp=function(){r(this,hi).innerHTML="";const e=r(this,vs).map((s,i)=>{const n=l(this,gr,Co).call(this,"li");if(l(this,ht,ut).call(this,n,"data-key",s.i),l(this,ht,ut).call(this,n,"data-index",i),"option"in r(this,Ts)){const h=r(this,Ts).option;l(this,Ir,Lo).call(this,n,h)}if(l(this,ht,ut).call(this,n,"data-dev-option",this.fieldKey),!s.i)return l(this,Er,Oo).call(this,n,s.lbl),l(this,Ws,yi).call(this,n,"opt-not-found"),n;if(l(this,Ws,yi).call(this,n,"option"),"option"in r(this,xs)){const h=r(this,xs).option;h&&l(this,br,yo).call(this,n,h)}const a=l(this,gr,Co).call(this,"span");if(l(this,Ws,yi).call(this,a,"opt-lbl-wrp"),"opt-lbl-wrp"in r(this,xs)){const h=r(this,xs)["opt-lbl-wrp"];h&&l(this,br,yo).call(this,a,h)}if("opt-lbl-wrp"in r(this,Ts)){const h=r(this,Ts)["opt-lbl-wrp"];l(this,Ir,Lo).call(this,a,h)}if(r(this,el)){const h=l(this,gr,Co).call(this,"img");if("opt-icn"in r(this,Ts)){const c=r(this,Ts)["opt-icn"];c&&l(this,Ir,Lo).call(this,h,c)}if(l(this,Ws,yi).call(this,h,"opt-icn"),"opt-icn"in r(this,xs)){const c=r(this,xs)["opt-icn"];c&&l(this,br,yo).call(this,h,c)}h.src=`${r(this,Ia)}${s.img}`,h.alt=`${s.lbl} flag image`,h.loading="lazy",l(this,ht,ut).call(this,h,"aria-hidden",!0),a.append(h)}const o=l(this,gr,Co).call(this,"span");if("opt-lbl"in r(this,Ts)){const h=r(this,Ts)["opt-lbl"];l(this,Ir,Lo).call(this,o,h)}if(l(this,Ws,yi).call(this,o,"opt-lbl"),"opt-lbl"in r(this,xs)){const h=r(this,xs)["opt-lbl"];h&&l(this,br,yo).call(this,o,h)}return l(this,Er,Oo).call(this,o,s.lbl),a.append(o),n.tabIndex=l(this,vn,Hr).call(this)?"0":"-1",l(this,ht,ut).call(this,n,"role","option"),l(this,ht,ut).call(this,n,"aria-posinset",i+1),l(this,ht,ut).call(this,n,"aria-setsize",r(this,vs).length),l(this,Ss,ii).call(this,n,"click",h=>{this.setSelectedCountryItem(h.currentTarget.dataset.key)}),l(this,Ss,ii).call(this,n,"keyup",h=>{h.key==="Enter"&&this.setSelectedCountryItem(h.currentTarget.dataset.key)}),s.disabled&&l(this,Ws,yi).call(this,n,"disabled-opt"),n.append(a),r(this,Pi)===s.i?(l(this,Ws,yi).call(this,n,"selected-opt"),l(this,ht,ut).call(this,n,"aria-selected",!0)):l(this,ht,ut).call(this,n,"aria-selected",!1),n});r(this,hi).append(...e)},Vh=new WeakSet,SE=function(e){var s;if(e.stopPropagation(),e.key==="Enter"&&r(this,vs).length){const i=(s=r(this,vs))==null?void 0:s[0].i;i&&(this.setSelectedCountryItem(i),this.searchOptions(""))}else this.searchOptions(e.target.value)},zh=new WeakSet,RE=function(e){r(this,de).value=e},fl=new WeakSet,dp=function(e){r(this,qt).contains(e.target)||this.setMenu({open:!1})},vn=new WeakSet,Hr=function(){return r(this,qt).classList.contains("menu-open")},Wh=new WeakSet,CE=function(){const e=r(this,ui),s=r(this,At).getBoundingClientRect(),i=s.top,n=e.innerHeight-s.bottom;n<i&&n<r(this,Ea)?(l(this,Ye,_s).call(this,r(this,qt),"flex-direction","column-reverse"),l(this,Ye,_s).call(this,r(this,qt),"bottom","0%")):(l(this,Ye,_s).call(this,r(this,qt),"flex-direction","column"),l(this,Ye,_s).call(this,r(this,qt),"bottom","auto"))},ml=new WeakSet,up=function(e){e.code==="Space"&&(r(this,de).focus(),this.setMenu({open:!0})),e.type==="click"&&(l(this,vn,Hr).call(this)?this.setMenu({open:!1}):(r(this,de).focus(),this.setMenu({open:!0})))},Hh=new WeakSet,OE=function(){r(this,wa).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};function Lu(t,e,s,i=0){const n=new MutationObserver(o=>{o.forEach(h=>{if(h.attributeName===e){const{oldValue:c}=h,d=h.target[e];typeof s=="function"&&setTimeout(s.call(this,c,d),i)}})}),a={attributes:!0,attributeOldValue:!0,attributeFilter:[e]};return n.observe(t,a),n}var Dm=11;function L0(t,e){var s=e.attributes,i,n,a,o,h;if(!(e.nodeType===Dm||t.nodeType===Dm)){for(var c=s.length-1;c>=0;c--)i=s[c],n=i.name,a=i.namespaceURI,o=i.value,a?(n=i.localName||n,h=t.getAttributeNS(a,n),h!==o&&(i.prefix==="xmlns"&&(n=i.name),t.setAttributeNS(a,n,o))):(h=t.getAttribute(n),h!==o&&t.setAttribute(n,o));for(var d=t.attributes,u=d.length-1;u>=0;u--)i=d[u],n=i.name,a=i.namespaceURI,a?(n=i.localName||n,e.hasAttributeNS(a,n)||t.removeAttributeNS(a,n)):e.hasAttribute(n)||t.removeAttribute(n)}}var jc,A0="http://www.w3.org/1999/xhtml",ts=typeof document=="undefined"?void 0:document,M0=!!ts&&"content"in ts.createElement("template"),$0=!!ts&&ts.createRange&&"createContextualFragment"in ts.createRange();function N0(t){var e=ts.createElement("template");return e.innerHTML=t,e.content.childNodes[0]}function P0(t){jc||(jc=ts.createRange(),jc.selectNode(ts.body));var e=jc.createContextualFragment(t);return e.childNodes[0]}function D0(t){var e=ts.createElement("body");return e.innerHTML=t,e.childNodes[0]}function F0(t){return t=t.trim(),M0?N0(t):$0?P0(t):D0(t)}function Uc(t,e){var s=t.nodeName,i=e.nodeName,n,a;return s===i?!0:(n=s.charCodeAt(0),a=i.charCodeAt(0),n<=90&&a>=97?s===i.toUpperCase():a<=90&&n>=97?i===s.toUpperCase():!1)}function G0(t,e){return!e||e===A0?ts.createElement(t):ts.createElementNS(e,t)}function B0(t,e){for(var s=t.firstChild;s;){var i=s.nextSibling;e.appendChild(s),s=i}return e}function ku(t,e,s){t[s]!==e[s]&&(t[s]=e[s],t[s]?t.setAttribute(s,""):t.removeAttribute(s))}var Fm={OPTION:function(t,e){var s=t.parentNode;if(s){var i=s.nodeName.toUpperCase();i==="OPTGROUP"&&(s=s.parentNode,i=s&&s.nodeName.toUpperCase()),i==="SELECT"&&!s.hasAttribute("multiple")&&(t.hasAttribute("selected")&&!e.selected&&(t.setAttribute("selected","selected"),t.removeAttribute("selected")),s.selectedIndex=-1)}ku(t,e,"selected")},INPUT:function(t,e){ku(t,e,"checked"),ku(t,e,"disabled"),t.value!==e.value&&(t.value=e.value),e.hasAttribute("value")||t.removeAttribute("value")},TEXTAREA:function(t,e){var s=e.value;t.value!==s&&(t.value=s);var i=t.firstChild;if(i){var n=i.nodeValue;if(n==s||!s&&n==t.placeholder)return;i.nodeValue=s}},SELECT:function(t,e){if(!e.hasAttribute("multiple")){for(var s=-1,i=0,n=t.firstChild,a,o;n;)if(o=n.nodeName&&n.nodeName.toUpperCase(),o==="OPTGROUP")a=n,n=a.firstChild;else{if(o==="OPTION"){if(n.hasAttribute("selected")){s=i;break}i++}n=n.nextSibling,!n&&a&&(n=a.nextSibling,a=null)}t.selectedIndex=s}}},So=1,Gm=11,Bm=3,km=8;function un(){}function k0(t){if(t)return t.getAttribute&&t.getAttribute("id")||t.id}function j0(t){return function(s,i,n){if(n||(n={}),typeof i=="string")if(s.nodeName==="#document"||s.nodeName==="HTML"||s.nodeName==="BODY"){var a=i;i=ts.createElement("html"),i.innerHTML=a}else i=F0(i);else i.nodeType===Gm&&(i=i.firstElementChild);var o=n.getNodeKey||k0,h=n.onBeforeNodeAdded||un,c=n.onNodeAdded||un,d=n.onBeforeElUpdated||un,u=n.onElUpdated||un,f=n.onBeforeNodeDiscarded||un,E=n.onNodeDiscarded||un,g=n.onBeforeElChildrenUpdated||un,b=n.skipFromChildren||un,I=n.addChild||function($,G){return $.appendChild(G)},v=n.childrenOnly===!0,C=Object.create(null),w=[];function x($){w.push($)}function R($,G){if($.nodeType===So)for(var U=$.firstChild;U;){var H=void 0;G&&(H=o(U))?x(H):(E(U),U.firstChild&&R(U,G)),U=U.nextSibling}}function O($,G,U){f($)!==!1&&(G&&G.removeChild($),E($),R($,U))}function L($){if($.nodeType===So||$.nodeType===Gm)for(var G=$.firstChild;G;){var U=o(G);U&&(C[U]=G),L(G),G=G.nextSibling}}L(s);function P($){c($);for(var G=$.firstChild;G;){var U=G.nextSibling,H=o(G);if(H){var Y=C[H];Y&&Uc(G,Y)?(G.parentNode.replaceChild(Y,G),D(Y,G)):P(G)}else P(G);G=U}}function y($,G,U){for(;G;){var H=G.nextSibling;(U=o(G))?x(U):O(G,$,!0),G=H}}function D($,G,U){var H=o(G);H&&delete C[H],!(!U&&(d($,G)===!1||(t($,G),u($),g($,G)===!1)))&&($.nodeName!=="TEXTAREA"?V($,G):Fm.TEXTAREA($,G))}function V($,G){var U=b($),H=G.firstChild,Y=$.firstChild,ot,rt,lt,bt,J;t:for(;H;){for(bt=H.nextSibling,ot=o(H);!U&&Y;){if(lt=Y.nextSibling,H.isSameNode&&H.isSameNode(Y)){H=bt,Y=lt;continue t}rt=o(Y);var st=Y.nodeType,ct=void 0;if(st===H.nodeType&&(st===So?(ot?ot!==rt&&((J=C[ot])?lt===J?ct=!1:($.insertBefore(J,Y),rt?x(rt):O(Y,$,!0),Y=J):ct=!1):rt&&(ct=!1),ct=ct!==!1&&Uc(Y,H),ct&&D(Y,H)):(st===Bm||st==km)&&(ct=!0,Y.nodeValue!==H.nodeValue&&(Y.nodeValue=H.nodeValue))),ct){H=bt,Y=lt;continue t}rt?x(rt):O(Y,$,!0),Y=lt}if(ot&&(J=C[ot])&&Uc(J,H))U||I($,J),D(J,H);else{var mt=h(H);mt!==!1&&(mt&&(H=mt),H.actualize&&(H=H.actualize($.ownerDocument||ts)),I($,H),P(H))}H=bt,Y=lt}y($,Y,rt);var dt=Fm[$.nodeName];dt&&dt($,G)}var k=s,B=k.nodeType,X=i.nodeType;if(!v){if(B===So)X===So?Uc(s,i)||(E(s),k=B0(s,G0(i.nodeName,i.namespaceURI))):k=i;else if(B===Bm||B===km){if(X===B)return k.nodeValue!==i.nodeValue&&(k.nodeValue=i.nodeValue),k;k=i}}if(k===i)E(s);else{if(i.isSameNode&&i.isSameNode(k))return;if(D(k,i,v),w)for(var N=0,W=w.length;N<W;N++){var F=C[w[N]];F&&O(F,F.parentNode,!1)}}return!v&&k!==s&&s.parentNode&&(k.actualize&&(k=k.actualize(s.ownerDocument||ts)),s.parentNode.replaceChild(k,s)),k}}var U0=j0(L0);function V0(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var z0="start",W0="center",H0="end",q0=function(){function t(e){var s=e.itemCount,i=e.itemSizeGetter,n=e.estimatedItemSize;V0(this,t),this._itemSizeGetter=i,this._itemCount=s,this._estimatedItemSize=n,this._itemSizeAndPositionData={},this._lastMeasuredIndex=-1}return t.prototype.getLastMeasuredIndex=function(){return this._lastMeasuredIndex},t.prototype.getSizeAndPositionForIndex=function(s){if(s<0||s>=this._itemCount)throw Error("Requested index "+s+" is outside of range 0.."+this._itemCount);if(s>this._lastMeasuredIndex){for(var i=this.getSizeAndPositionOfLastMeasuredItem(),n=i.offset+i.size,a=this._lastMeasuredIndex+1;a<=s;a++){var o=this._itemSizeGetter({index:a});if(o==null||isNaN(o))throw Error("Invalid size returned for index "+a+" of value "+o);this._itemSizeAndPositionData[a]={offset:n,size:o},n+=o}this._lastMeasuredIndex=s}return this._itemSizeAndPositionData[s]},t.prototype.getSizeAndPositionOfLastMeasuredItem=function(){return this._lastMeasuredIndex>=0?this._itemSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}},t.prototype.getTotalSize=function(){var s=this.getSizeAndPositionOfLastMeasuredItem();return s.offset+s.size+(this._itemCount-this._lastMeasuredIndex-1)*this._estimatedItemSize},t.prototype.getUpdatedOffsetForIndex=function(s){var i=s.align,n=i===void 0?z0:i,a=s.containerSize,o=s.targetIndex;if(a<=0)return 0;var h=this.getSizeAndPositionForIndex(o),c=h.offset,d=c-a+h.size,u=void 0;switch(n){case H0:u=d;break;case W0:u=c-(a-h.size)/2;break;default:u=c;break}var f=this.getTotalSize();return Math.max(0,Math.min(f-a,u))},t.prototype.getVisibleRange=function(s){var i=s.containerSize,n=s.offset,a=s.overscanCount,o=this.getTotalSize();if(o===0)return{};var h=n+i,c=this._findNearestItem(n),d=c,u=this.getSizeAndPositionForIndex(c);for(n=u.offset+u.size;n<h&&d<this._itemCount-1;)d++,n+=this.getSizeAndPositionForIndex(d).size;return a&&(c=Math.max(0,c-a),d=Math.min(d+a,this._itemCount)),{start:c,stop:d}},t.prototype.resetItem=function(s){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,s-1)},t.prototype._binarySearch=function(s){for(var i=s.low,n=s.high,a=s.offset,o=void 0,h=void 0;i<=n;){if(o=i+Math.floor((n-i)/2),h=this.getSizeAndPositionForIndex(o).offset,h===a)return o;h<a?i=o+1:h>a&&(n=o-1)}if(i>0)return i-1},t.prototype._exponentialSearch=function(s){for(var i=s.index,n=s.offset,a=1;i<this._itemCount&&this.getSizeAndPositionForIndex(i).offset<n;)i+=a,a*=2;return this._binarySearch({high:Math.min(i,this._itemCount-1),low:Math.floor(i/2),offset:n})},t.prototype._findNearestItem=function(s){if(isNaN(s))throw Error("Invalid offset "+s+" specified");s=Math.max(0,s);var i=this.getSizeAndPositionOfLastMeasuredItem(),n=Math.max(0,this._lastMeasuredIndex);return i.offset>=s?this._binarySearch({high:n,low:0,offset:s}):this._exponentialSearch({index:n,offset:s})},t}();function Y0(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var X0="position:relative; overflow:hidden; width:100%; min-height:100%; will-change: transform;",Z0="position:absolute; top:0; left:0; height:100%; width:100%; overflow:visible;",Tf=function(){function t(e,s){var i=this;Y0(this,t),this.getRowHeight=function(n){var a=n.index,o=i.options.rowHeight;return typeof o=="function"?o(a):Array.isArray(o)?o[a]:o},this.container=e,this.options=s,this.state={},this._initializeSizeAndPositionManager(s.rowCount),this.render=this.render.bind(this),this.handleScroll=this.handleScroll.bind(this),this.componentDidMount()}return t.prototype.componentDidMount=function(){var s=this,i=this.options,n=i.onMount,a=i.initialScrollTop,o=i.initialIndex,h=i.height,c=a||o!=null&&this.getRowOffset(o)||0,d=this.inner=document.createElement("div"),u=this.content=document.createElement("div");d.setAttribute("style",X0),u.setAttribute("style",Z0),d.appendChild(u),this.container.appendChild(d),this.setState({offset:c,height:h},function(){c&&(s.container.scrollTop=c),s.container.addEventListener("scroll",s.handleScroll),typeof n=="function"&&n()})},t.prototype._initializeSizeAndPositionManager=function(s){this._sizeAndPositionManager=new q0({itemCount:s,itemSizeGetter:this.getRowHeight,estimatedItemSize:this.options.estimatedRowHeight||100})},t.prototype.setState=function(){var s=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments[1];this.state=Object.assign(this.state,i),requestAnimationFrame(function(){s.render(),typeof n=="function"&&n()})},t.prototype.resize=function(s,i){this.setState({height:s},i)},t.prototype.handleScroll=function(s){var i=this.options.onScroll,n=this.container.scrollTop;this.setState({offset:n}),typeof i=="function"&&i(n,s)},t.prototype.getRowOffset=function(s){var i=this._sizeAndPositionManager.getSizeAndPositionForIndex(s),n=i.offset;return n},t.prototype.scrollToIndex=function(s,i){var n=this.state.height,a=this._sizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:n,targetIndex:s});this.container.scrollTop=a},t.prototype.setRowCount=function(s){this._initializeSizeAndPositionManager(s),this.render()},t.prototype.onRowsRendered=function(s){var i=this.options.onRowsRendered;typeof i=="function"&&i(s)},t.prototype.destroy=function(){this.container.removeEventListener("scroll",this.handleScroll),this.container.innerHTML=""},t.prototype.render=function(){for(var s=this.options,i=s.overscanCount,n=s.renderRow,a=this.state,o=a.height,h=a.offset,c=h===void 0?0:h,d=this._sizeAndPositionManager.getVisibleRange({containerSize:o,offset:c,overscanCount:i}),u=d.start,f=d.stop,E=document.createDocumentFragment(),g=u;g<=f;g++)E.appendChild(n(g));this.inner.style.height=this._sizeAndPositionManager.getTotalSize()+"px",this.content.style.top=this.getRowOffset(u)+"px",U0(this.content,E,{childrenOnly:!0,getNodeKey:function(I){return I.nodeIndex}}),this.onRowsRendered({startIndex:u,stopIndex:f})},t}();const Q0=({fieldKey:t,formID:e,attr:s,styleClasses:i})=>{const n=j.useRef(null),a=j.useRef(null),h=et(oe)[t],c=et(Cc),{options:d,ph:u}=h;return j.useEffect(()=>{const f=document.getElementById("bit-grid-layout").contentWindow;n!=null&&n.current||(n.current=yt(`.${t}-country-fld-wrp`));const E=a.current,g=n.current;E&&g&&"destroy"in E&&E.destroy();const{selectedFlagImage:b,selectedCountryClearable:I,searchClearable:v,optionFlagImage:C,detectCountryByIp:w,detectCountryByGeo:x,defaultValue:R,searchPlaceholder:O,noCountryFoundText:L}=h.config;f.bit_virtualized_list||(f.bit_virtualized_list=Tf),f.observeElm||(f.observeElm=Lu);const P={fieldKey:t,selectedFlagImage:b,selectedCountryClearable:I,searchClearable:v,optionFlagImage:C,detectCountryByIp:w,detectCountryByGeo:x,defaultValue:R,placeholder:u,searchPlaceholder:O,noCountryFoundText:L,options:d,assetsURL:`${c.assetsURL}/../static/countries/`,document:document.getElementById("bit-grid-layout").contentDocument,window:f,attributes:{option:gt(t,"option"),"opt-lbl-wrp":gt(t,"opt-lbl-wrp"),"opt-icn":gt(t,"opt-icn"),"opt-lbl":gt(t,"opt-lbl")},classNames:{option:S(t,"option"),"opt-lbl-wrp":S(t,"opt-lbl-wrp"),"opt-icn":S(t,"opt-icn"),"opt-lbl":S(t,"opt-lbl")}};a.current=new O0(g,P)},[h]),p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:i}),p.jsx(Ut,{formID:e,fieldKey:t,fieldData:s,children:p.jsx("div",{className:`${t}-country-fld-container`,children:p.jsxs("div",A(_({"data-dev-country-fld-wrp":t,className:`${t}-country-fld-wrp ${S(t,"country-fld-wrp")} ${h.valid.disabled?"disabled":""} ${h.valid.readonly?"readonly":""}`,ref:n},M(t,"country-fld-wrp")),{children:[p.jsx("input",_(_({name:"country-name",type:"hidden",className:`${t}-country-hidden-input`},"disabled"in h.valid&&{disabled:h.valid.disabled}),"readonly"in h.valid&&{readOnly:h.valid.readonly})),p.jsxs("div",{"data-testid":`${t}-dpd-wrp`,className:`${t}-dpd-wrp`,"aria-live":"assertive","aria-label":"Select a Country",role:"combobox","aria-expanded":"false",tabIndex:h.valid.disabled?"-1":"0",children:[p.jsxs("div",{className:`${t}-selected-country-wrp`,children:[h.config.selectedFlagImage&&p.jsx("img",_({"data-dev-selected-country-img":t,className:`${t}-selected-country-img ${S(t,"selected-country-img")}`,"aria-hidden":"true",alt:"selected country flag",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>"},M(t,"selected-country-img"))),p.jsx("span",{"data-testid":`${t}-slctd-cntry-lbl`,"data-dev-selected-country-lbl":t,className:`${t}-selected-country-lbl`,children:u})]}),p.jsxs("div",{className:`${t}-dpd-btn-wrp`,children:[h.config.selectedCountryClearable&&p.jsx("button",A(_({"data-testid":`${t}-clr-slctd-cntry-btn`,type:"button",title:"Clear selected country value","data-dev-inp-clr-btn":t,className:`${t}-inp-clr-btn ${S(t,"inp-clr-btn")}`},M(t,"inp-clr-btn")),{children:p.jsxs("svg",{width:"15",height:"15",role:"img",title:"Cross icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),p.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})),p.jsx("div",{className:`${t}-dpd-down-btn`,children:p.jsx("svg",{width:"15",height:"15",viewBox:"0 0 24 24",title:"Cross icon",role:"img",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("polyline",{points:"6 9 12 15 18 9"})})})]})]}),p.jsx("div",A(_({className:`${t}-option-wrp  ${S(t,"option-wrp")}`,"data-dev-option-wrp":t},M(t,"option-search-wrp")),{children:p.jsxs("div",{className:`${t}-option-inner-wrp`,children:[p.jsxs("div",{className:`${t}-option-search-wrp`,"data-dev-option-search-wrp":t,children:[p.jsx("input",_({"data-testid":`${t}-opt-srch-inp`,type:"search","data-dev-opt-search-input":t,className:`${t}-opt-search-input ${S(t,"opt-search-input")}`,placeholder:h.config.searchPlaceholder,autoComplete:"country-name",tabIndex:"-1"},M(t,"opt-search-input"))),p.jsxs("svg",A(_({"data-dev-opt-search-icn":t,className:`${t}-opt-search-icn ${S(t,"opt-search-icn")}`,"aria-hidden":"true",width:"22",height:"22",role:"img",title:"Search icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},M(t,"opt-search-icn")),{children:[p.jsx("circle",{cx:"11",cy:"11",r:"8"}),p.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})),h.config.searchClearable&&p.jsx("button",A(_({"data-testid":`${t}-srch-clr-btn`,type:"button",title:"Clear search","data-dev-search-clear-btn":t,className:`${t}-search-clear-btn ${S(t,"search-clear-btn")}`,tabIndex:"-1"},M(t,"search-clear-btn")),{children:p.jsxs("svg",{width:"13",height:"13",role:"img",title:"Cross icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),p.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]}),p.jsx("ul",A(_({className:`${t}-option-list ${S(t,"option-list")}`,tabIndex:"-1",role:"listbox","aria-label":"country list","data-dev-option-list":t},M(t,"option-list")),{children:p.jsxs("li",{className:"option",children:[p.jsx("span",{className:"opt-prefix",children:"Prefix"}),p.jsxs("span",{className:"opt-lbl-wrp",children:[p.jsx("img",{className:"opt-icn",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>",alt:"Placeholder"}),p.jsx("span",{className:"opt-lbl",children:"Option"})]}),p.jsx("span",{className:"opt-suffix",children:"Suffix"})]})}))]})}))]}))})})]})};var qh,Ae,Xe,Di,Tn,gl,Ra,Fi,Yh,Me,El,wt,pi,xn,bl,_r,Hs,Gi,Sn,Ca,Z,Il,Oa,_l,Xh,yE,Zh,LE,wl,pp,ya,Jc,vl,fp,Qh,AE,Jh,ME,Kh,$E,La,Kc,Yt,le,$e,es,td,NE,ed,PE,Aa,th,sd,DE,wr,Ao,Ma,eh,Tl,mp,id,FE,xl,gp,nd,GE,Sl,Ep,Rl,bp,Rn,qr,os,Gs,$a,sh,ft,Et,Cn,Yr,On,Xr,ve,Ve,ef,K0,Cl,Ip,Ol,_p,yl,wp,rd,BE,ad,kE,yn,Zr,od,jE,Ll,vp,ld,UE;class J0{constructor(e,s){m(this,Xh);m(this,Zh);m(this,wl);m(this,ya);m(this,vl);m(this,Qh);m(this,Jh);m(this,Kh);m(this,La);m(this,Yt);m(this,$e);m(this,td);m(this,ed);m(this,Aa);m(this,sd);m(this,wr);m(this,Ma);m(this,Tl);m(this,id);m(this,xl);m(this,nd);m(this,Sl);m(this,Rl);m(this,Rn);m(this,os);m(this,$a);m(this,ft);m(this,Cn);m(this,On);m(this,ve);m(this,ef);m(this,Cl);m(this,Ol);m(this,yl);m(this,rd);m(this,ad);m(this,yn);m(this,od);m(this,Ll);m(this,ld);m(this,qh,"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>");m(this,Ae,null);m(this,Xe,null);m(this,Di,null);m(this,Tn,null);m(this,gl,null);m(this,Ra,null);m(this,Fi,null);m(this,Yh,null);m(this,Me,null);m(this,El,null);m(this,wt,null);m(this,pi,null);m(this,xn,null);m(this,bl,30);m(this,_r,!1);m(this,Hs,[]);m(this,Gi,void 0);m(this,Sn,{});m(this,Ca,"");m(this,Z,{maxHeight:370,searchCurrencyPlaceholder:"Search Currency",noCurrencyFoundText:"No Currency Found",selectedCurrencyClearable:!0,searchClearable:!0,selectedFlagImage:!0,defaultCurrencyKey:"",defaultValue:"",optionFlagImage:!0,inputFormatOptions:{formatter:"browser",showCurrencySymbol:!0,decimalSeparator:"."},valueFormatOptions:{formatter:"browser",showCurrencySymbol:!0,decimalSeparator:"."},attributes:{},classNames:{},assetsURL:""});m(this,Il,null);m(this,Oa,"");m(this,_l,[]);Object.assign(r(this,Z),s),T(this,Sn,s.window?s.window:window),T(this,Gi,s.document?s.document:document),typeof e=="string"?T(this,Ae,r(this,Gi).querySelector(e)):T(this,Ae,e),typeof r(this,Z).options=="string"&&(r(this,Z).options=l(this,Xh,yE).call(this,r(this,Z).options)),T(this,Hs,r(this,Z).options.filter(i=>!i.hide)),this.fieldKey=r(this,Z).fieldKey,T(this,Ca,s.assetsURL),this.init()}init(){T(this,El,l(this,Yt,le).call(this,`.${this.fieldKey}-currency-inner-wrp`)),T(this,wt,l(this,Yt,le).call(this,`.${this.fieldKey}-currency-amount-input`)),T(this,Xe,l(this,Yt,le).call(this,`.${this.fieldKey}-currency-hidden-input`)),T(this,Di,l(this,Yt,le).call(this,`.${this.fieldKey}-input-clear-btn`)),T(this,Ra,l(this,Yt,le).call(this,`.${this.fieldKey}-selected-currency-img`)),T(this,Yh,l(this,Yt,le).call(this,`.${this.fieldKey}-option-search-wrp`)),T(this,Me,l(this,Yt,le).call(this,`.${this.fieldKey}-opt-search-input`)),T(this,Tn,l(this,Yt,le).call(this,`.${this.fieldKey}-dpd-wrp`)),T(this,gl,l(this,Yt,le).call(this,`.${this.fieldKey}-option-wrp`)),T(this,pi,l(this,Yt,le).call(this,`.${this.fieldKey}-search-clear-btn`)),T(this,xn,l(this,Yt,le).call(this,`.${this.fieldKey}-option-list`)),this.setMenu({open:!1}),l(this,$e,es).call(this,r(this,Ae),"keydown",e=>{l(this,ed,PE).call(this,e)}),l(this,$e,es).call(this,r(this,Tn),"click",e=>{l(this,Ll,vp).call(this,e)}),l(this,$e,es).call(this,r(this,Tn),"keyup",e=>{l(this,Ll,vp).call(this,e)}),l(this,$e,es).call(this,r(this,wt),"focus",()=>{l(this,Zh,LE).call(this)}),l(this,$e,es).call(this,r(this,wt),"blur",()=>{l(this,ya,Jc).call(this)}),l(this,$e,es).call(this,r(this,wt),"input",e=>{l(this,nd,GE).call(this,e)}),r(this,Z).selectedCurrencyClearable&&l(this,$e,es).call(this,r(this,Di),"click",e=>{l(this,sd,DE).call(this,e)}),r(this,Sn).observeElm(r(this,Xe),"value",(e,s)=>{l(this,xl,gp).call(this,e,s)}),r(this,Z).defaultValue&&l(this,td,NE).call(this),!r(this,Z).defaultValue&&r(this,Z).defaultCurrencyKey&&this.setSelectedCurrencyItem(r(this,Z).defaultCurrencyKey),r(this,Z).searchClearable&&(l(this,ve,Ve).call(this,r(this,Me),"padding-right","35px"),l(this,ve,Ve).call(this,r(this,pi),"display","none"),l(this,$e,es).call(this,r(this,pi),"click",()=>{this.searchOptions("")})),r(this,Me).value="",l(this,$e,es).call(this,r(this,Me),"keyup",e=>{l(this,ad,kE).call(this,e)})}setSelectedCurrencyItem(e){if(T(this,Fi,e),!r(this,Fi)){l(this,Ol,_p).call(this);return}const s=l(this,Rl,bp).call(this);s&&(r(this,Z).selectedFlagImage&&(r(this,Ra).src=`${r(this,Ca)}${s.img}`),this.setMenu({open:!1}),l(this,ya,Jc).call(this),r(this,_r)&&(!this.value&&r(this,wt).focus(),T(this,_r,!1)))}searchOptions(e){l(this,rd,BE).call(this,e);let s=[];e?(s=r(this,Z).options.filter(i=>{const n=e.toLowerCase(),a=(i.lbl||"").toLowerCase(),o=(i.val||"").toLowerCase(),h=(i.i||"").toLowerCase();if(a.includes(n)||o.includes(n)||h.includes(n))return!0}),s.length||(s=[{i:0,lbl:r(this,Z).noCurrencyFoundText}]),T(this,Hs,s),r(this,Z).searchClearable&&l(this,ve,Ve).call(this,r(this,pi),"display","grid")):(T(this,Hs,r(this,Z).options),r(this,Z).searchClearable&&l(this,ve,Ve).call(this,r(this,pi),"display","none")),l(this,yl,wp).call(this)}setMenu({open:e}){l(this,ve,Ve).call(this,r(this,gl),"max-height",`${e?r(this,Z).maxHeight:0}px`),e?(l(this,od,jE).call(this),l(this,os,Gs).call(this,r(this,Ae),"menu-open"),l(this,$e,es).call(this,r(this,Gi),"click",s=>l(this,Tl,mp).call(this,s)),l(this,ft,Et).call(this,r(this,Me),"tabindex",0),l(this,ft,Et).call(this,r(this,pi),"tabindex",0),l(this,ft,Et).call(this,r(this,Tn),"aria-expanded",!0),l(this,yl,wp).call(this)):(r(this,Ae).classList.remove("menu-open"),r(this,Gi).removeEventListener("click",l(this,Tl,mp)),setTimeout(()=>{this.searchOptions("")},100),l(this,ft,Et).call(this,r(this,Me),"tabindex",-1),l(this,ft,Et).call(this,r(this,pi),"tabindex",-1),l(this,ft,Et).call(this,r(this,Tn),"aria-expanded",!1))}set value(e){r(this,Xe).value=e||"",l(this,ft,Et).call(this,r(this,Xe),"value",e||"")}get value(){return r(this,Xe).value}destroy(){r(this,xn).innerHTML="",this.value=r(this,Z).defaultValue,l(this,ld,UE).call(this)}reset(){l(this,Ol,_p).call(this),this.destroy(),this.init()}}qh=new WeakMap,Ae=new WeakMap,Xe=new WeakMap,Di=new WeakMap,Tn=new WeakMap,gl=new WeakMap,Ra=new WeakMap,Fi=new WeakMap,Yh=new WeakMap,Me=new WeakMap,El=new WeakMap,wt=new WeakMap,pi=new WeakMap,xn=new WeakMap,bl=new WeakMap,_r=new WeakMap,Hs=new WeakMap,Gi=new WeakMap,Sn=new WeakMap,Ca=new WeakMap,Z=new WeakMap,Il=new WeakMap,Oa=new WeakMap,_l=new WeakMap,Xh=new WeakSet,yE=function(e){const s=e.split("->");let i=r(this,Sn);return s.forEach(n=>{i=i[n]}),i},Zh=new WeakSet,LE=function(){l(this,ft,Et).call(this,r(this,wt),"type","number"),r(this,wt).value=r(this,wt).dataset.numValue||""},wl=new WeakSet,pp=function(e,s=0){const i=Df(10,s||0);return Math.round(e*i)/i},ya=new WeakSet,Jc=function(){l(this,ft,Et).call(this,r(this,wt),"type","text");const e=Number(r(this,wt).dataset.numValue);if(!e||Number.isNaN(e)){r(this,wt).value="",l(this,ft,Et).call(this,r(this,Xe),"value","");return}const{inputFormatOptions:s,valueFormatOptions:i}=r(this,Z),n=l(this,vl,fp).call(this,e,s);r(this,wt).value=n,this.value=l(this,vl,fp).call(this,e,i),l(this,Aa,th).call(this,r(this,Xe),"blur")},vl=new WeakSet,fp=function(e,s){const i=l(this,Rl,bp).call(this),{defaultCurrencyKey:n}=r(this,Z),{formatter:a,roundToClosestInteger:o,showCurrencySymbol:h,currencyPosition:c,symbolPosition:d}=s,u=(i==null?void 0:i.i)||n;if(!u)return e;o&&(e=l(this,wl,pp).call(this,e));let f="";return a==="browser"?f=l(this,Qh,AE).call(this,e,u,s):a==="custom"||!a?f=l(this,Jh,ME).call(this,e,s):a==="none"&&(f=e),d==="left-number"?f=`${(i==null?void 0:i.symbol)||""}${f}`:d==="right-number"&&(f=`${f}${(i==null?void 0:i.symbol)||""}`),h&&(c==="left"?f=`${h?`${u} `:""}${f}`:c==="right"&&(f=`${f}${h?` ${u}`:""}`)),d==="left-currency"?f=`${(i==null?void 0:i.symbol)||""}${f}`:d==="right-currency"&&(f=`${f}${(i==null?void 0:i.symbol)||""}`),f},Qh=new WeakSet,AE=function(e,s,i){const{showCurrencySymbol:n,roundToClosestInteger:a}=i;return new Intl.NumberFormat(navigator.language,{style:"currency",currency:s}).formatToParts(e).map(c=>!n&&c.type==="currency"||a&&(c.type==="decimal"||c.type==="fraction")?"":c.value).join("")},Jh=new WeakSet,ME=function(e,s){const{decimalSeparator:i,roundToClosestFractionDigits:n,minimumFractionDigits:a,maximumFractionDigits:o,numberFormat:h}=s,[c]=h.split(i),[d,u=""]=e.toString().split("."),f=l(this,Kh,$E).call(this,d,c);let E=u;const g=E.length;if(g>0){const I=o>0,v=a>0;if(n&&E){let C;I&&g>o?C=o:v&&g<a?C=a:C=g,E=l(this,wl,pp).call(this,+`0.${E}`,C).toString().replace("0.","")}I&&E&&(E=E.slice(0,o))}E.length<a&&(E=E.padEnd(a,"0"));let b="";return E?b=`${f}${i}${E}`:b=f,b},Kh=new WeakSet,$E=function(e="",s=""){let i="",n=e.length-1;for(let a=s.length-1;a>=0;a--){const o=s[a],h=e[n];if(!h)break;o==="#"?(i=h+i,n--):i=o+i}return n>=0&&(i=e.substring(0,n+1)+i),i},La=new WeakSet,Kc=function(e=""){const{decimalSeparator:s}=r(this,Z).valueFormatOptions,i=new RegExp(`[^0-9${s}]`,"g");return e.replace(i,"")},Yt=new WeakSet,le=function(e){return r(this,Ae).querySelector(e)},$e=new WeakSet,es=function(e,s,i){e.addEventListener(s,i),r(this,_l).push({selector:e,eventType:s,cb:i})},td=new WeakSet,NE=function(){r(this,wt).dataset.numValue=l(this,La,Kc).call(this,r(this,Z).defaultValue),l(this,xl,gp).call(this,"",r(this,Z).defaultValue),r(this,Z).selectedCurrencyClearable&&l(this,ve,Ve).call(this,r(this,Di),"display","grid")},ed=new WeakSet,PE=function(e){var a,o;const s=r(this,Gi).activeElement;let i=null;const n=l(this,yn,Zr).call(this);if(e.target!==r(this,wt)){if(n){const h=Number(s.dataset.index||-1);if(e.key==="ArrowDown"||!e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,Me))i=l(this,Yt,le).call(this,".option:not(.disabled-opt)");else if(s.classList.contains("option")){const c=l(this,Ma,eh).call(this,h,"next"),d=l(this,wr,Ao).call(this,c);d?i=d:c+1<r(this,Hs).length&&((a=this.virtualOptionList)==null||a.scrollToIndex(c),setTimeout(()=>{const u=l(this,wr,Ao).call(this,c);u&&u.focus()},50))}}else if(e.key==="ArrowUp"||e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,Me))i=r(this,wt),l(this,yn,Zr).call(this)&&this.setMenu({open:!1});else if(s.classList.contains("option")){const c=l(this,Ma,eh).call(this,h,"previous"),d=l(this,wr,Ao).call(this,c);d?i=d:c>0?((o=this.virtualOptionList)==null||o.scrollToIndex(c),setTimeout(()=>{const u=l(this,wr,Ao).call(this,c);u&&u.focus()},50)):d||(i=r(this,Me))}}else e.key==="Escape"&&this.setMenu({open:!1})}else if(e.key>="a"&&e.key<="z"){clearTimeout(r(this,Il)),T(this,Oa,r(this,Oa)+e.key),T(this,Il,setTimeout(()=>{T(this,Oa,"")},300));const h=r(this,Z).options.find(c=>!c.disabled&&c.lbl.toLowerCase().startsWith(r(this,Oa)));h&&this.setSelectedCurrencyItem(h.i)}else if(e.key==="ArrowDown"||e.key==="ArrowUp"){e.preventDefault();const h=l(this,Sl,Ep).call(this),c=e.key==="ArrowDown"?"next":"previous",d=l(this,Ma,eh).call(this,h,c);d>-1&&d<r(this,Z).options.length&&(this.value=r(this,Z).options[d].val)}i&&i.focus()}},Aa=new WeakSet,th=function(e,s){const i=new Event(s);e.dispatchEvent(i)},sd=new WeakSet,DE=function(){r(this,wt).value="",l(this,ft,Et).call(this,r(this,Xe),"value",""),l(this,ft,Et).call(this,r(this,wt),"data-num-value",""),this.setSelectedCurrencyItem(r(this,Z).defaultCurrencyKey),l(this,Aa,th).call(this,r(this,wt),"input"),this.value="",l(this,Aa,th).call(this,r(this,Xe),"blur")},wr=new WeakSet,Ao=function(e){return l(this,Yt,le).call(this,`.${this.fieldKey}-option-list .option[data-index="${e}"]`)},Ma=new WeakSet,eh=function(e=-1,s){if(s==="next"){const i=r(this,Z).options.length;for(let n=e+1;n<i;n++)if(!r(this,Z).options[n].disabled)return n}else if(s==="previous"){for(let i=e-1;i>=0;i--)if(!r(this,Z).options[i].disabled)return i}},Tl=new WeakSet,mp=function(e){r(this,Ae).contains(e.target)||this.setMenu({open:!1})},id=new WeakSet,FE=function(e){var s;return((s=e.match(/[a-zA-Z]+/))==null?void 0:s[0])||""},xl=new WeakSet,gp=function(e,s){const i=l(this,id,FE).call(this,s),n=r(this,Z).options.find(a=>a.i===i);if((i&&n||!i&&r(this,Z).defaultCurrencyKey)&&e!==s){this.setSelectedCurrencyItem(i||r(this,Z).defaultCurrencyKey);const{decimalSeparator:a}=r(this,Z).valueFormatOptions,[o,h]=s.split(a),c=l(this,La,Kc).call(this,o),d=l(this,La,Kc).call(this,h),u=d?`${c}.${d}`:c;l(this,ft,Et).call(this,r(this,wt),"data-num-value",u),l(this,ya,Jc).call(this)}typeof bit_conditionals!="undefined"&&bit_conditionals({target:r(this,Xe)})},nd=new WeakSet,GE=function(e){const s=Number(e.target.value),{minValue:i,maxValue:n}=r(this,Z);if(s<i||s>n)return!1;l(this,ft,Et).call(this,r(this,wt),"data-num-value",s||""),r(this,Z).selectedCurrencyClearable&&(s?l(this,ve,Ve).call(this,r(this,Di),"display","grid"):l(this,ve,Ve).call(this,r(this,Di),"display","none"))},Sl=new WeakSet,Ep=function(){const e=r(this,Hs).findIndex(s=>s.i===r(this,Fi));return e===-1?0:e},Rl=new WeakSet,bp=function(){return r(this,Z).options.find(e=>e.i===r(this,Fi))},Rn=new WeakSet,qr=function(e){return r(this,Gi).createElement(e)},os=new WeakSet,Gs=function(e,s){e.classList.add(s)},$a=new WeakSet,sh=function(e,s){e.textContent=s},ft=new WeakSet,Et=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},Cn=new WeakSet,Yr=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,os,Gs).call(this,e,i))},On=new WeakSet,Xr=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,ft,Et).call(this,e,s[n].key,s[n].value)},ve=new WeakSet,Ve=function(e,s,i){e.style.setProperty(s,i,"important")},ef=new WeakSet,K0=function(){const e=l(this,Yt,le).call(this,".option");if(!e)return;const s=r(this,Sn).getComputedStyle(e),i=parseFloat(s.marginTop)+parseFloat(s.marginBottom),n=e.offsetHeight+i||0;n!==r(this,bl)&&(T(this,bl,n),r(this,xn).innerHTML="",l(this,Cl,Ip).call(this))},Cl=new WeakSet,Ip=function(){r(this,xn).innerHTML="";const e=r(this,Hs).map((s,i)=>{const n=l(this,Rn,qr).call(this,"li");if(l(this,ft,Et).call(this,n,"data-key",s.i),l(this,ft,Et).call(this,n,"data-index",i),"option"in r(this,Z).attributes){const c=r(this,Z).attributes.option;l(this,On,Xr).call(this,n,c)}if(!s.i)return l(this,$a,sh).call(this,n,s.lbl),l(this,os,Gs).call(this,n,"opt-not-found"),n;if(l(this,os,Gs).call(this,n,"option"),"option"in r(this,Z).classNames){const c=r(this,Z).classNames.option;c&&l(this,Cn,Yr).call(this,n,c)}const a=l(this,Rn,qr).call(this,"span");if("opt-lbl-wrp"in r(this,Z).attributes){const c=r(this,Z).attributes["opt-lbl-wrp"];l(this,On,Xr).call(this,a,c)}if(l(this,os,Gs).call(this,a,"opt-lbl-wrp"),"opt-lbl-wrp"in r(this,Z).classNames){const c=r(this,Z).classNames["opt-lbl-wrp"];c&&l(this,Cn,Yr).call(this,a,c)}if(r(this,Z).optionFlagImage){const c=l(this,Rn,qr).call(this,"img");if("opt-icn"in r(this,Z).attributes){const d=r(this,Z).attributes["opt-icn"];l(this,On,Xr).call(this,c,d)}if(l(this,os,Gs).call(this,c,"opt-icn"),"opt-icn"in r(this,Z).classNames){const d=r(this,Z).classNames["opt-icn"];d&&l(this,Cn,Yr).call(this,c,d)}c.src=`${r(this,Ca)}${s.img}`,c.alt=`${s.lbl} flag image`,c.loading="lazy",l(this,ft,Et).call(this,c,"aria-hidden",!0),a.append(c)}const o=l(this,Rn,qr).call(this,"span");if("opt-lbl"in r(this,Z).attributes){const c=r(this,Z).attributes["opt-lbl"];l(this,On,Xr).call(this,o,c)}if(l(this,os,Gs).call(this,o,"opt-lbl"),"opt-lbl"in r(this,Z).classNames){const c=r(this,Z).classNames["opt-lbl"];c&&l(this,Cn,Yr).call(this,o,c)}l(this,$a,sh).call(this,o,s.lbl),a.append(o);const h=l(this,Rn,qr).call(this,"span");if("opt-suffix"in r(this,Z).attributes){const c=r(this,Z).attributes["opt-suffix"];l(this,On,Xr).call(this,h,c)}if(l(this,os,Gs).call(this,h,"opt-suffix"),"opt-suffix"in r(this,Z).classNames){const c=r(this,Z).classNames["opt-suffix"];c&&l(this,Cn,Yr).call(this,h,c)}return l(this,$a,sh).call(this,h,s.i),l(this,ft,Et).call(this,n,"tabindex",l(this,yn,Zr).call(this)?"0":"-1"),l(this,ft,Et).call(this,n,"role","option"),l(this,ft,Et).call(this,n,"aria-posinset",i+1),l(this,ft,Et).call(this,n,"aria-setsize",r(this,Hs).length),l(this,$e,es).call(this,n,"click",c=>{T(this,_r,!0),this.setSelectedCurrencyItem(c.currentTarget.dataset.key)}),l(this,$e,es).call(this,n,"keyup",c=>{c.key==="Enter"&&(T(this,_r,!0),this.setSelectedCurrencyItem(c.currentTarget.dataset.key))}),s.disabled&&l(this,os,Gs).call(this,n,"disabled-opt"),n.append(a,h),r(this,Fi)===s.i?(l(this,os,Gs).call(this,n,"selected-opt"),l(this,ft,Et).call(this,n,"aria-selected",!0)):l(this,ft,Et).call(this,n,"aria-selected",!1),n});r(this,xn).append(...e)},Ol=new WeakSet,_p=function(){T(this,Fi,r(this,Z).defaultCurrencyKey||""),r(this,Z).selectedFlagImage&&(r(this,Ra).src=r(this,qh)),this.setMenu({open:!1}),l(this,ft,Et).call(this,r(this,wt),"data-num-value",""),r(this,Z).selectedCurrencyClearable&&l(this,ve,Ve).call(this,r(this,Di),"display","none"),l(this,ft,Et).call(this,r(this,Xe),"value",r(this,Z).defaultValue)},yl=new WeakSet,wp=function(){if(!l(this,yn,Zr).call(this))return;l(this,Cl,Ip).call(this);const e=l(this,Sl,Ep).call(this),s=l(this,Yt,le).call(this,`.option[data-index="${e}"]`);s&&s.scrollIntoView({block:"nearest",inline:"nearest"})},rd=new WeakSet,BE=function(e){r(this,Me).value=e},ad=new WeakSet,kE=function(e){var s;if(e.key==="Enter"&&r(this,Hs).length){const i=(s=l(this,Yt,le).call(this,".option"))==null?void 0:s.dataset.key;this.setSelectedCurrencyItem(i),this.searchOptions("")}else this.searchOptions(e.target.value)},yn=new WeakSet,Zr=function(){return r(this,Ae).classList.contains("menu-open")},od=new WeakSet,jE=function(){const e=r(this,El).getBoundingClientRect(),s=e.top,i=r(this,Sn).innerHeight-e.bottom;i<s&&i<r(this,Z).maxHeight?(l(this,ve,Ve).call(this,r(this,Ae),"flex-direction","column-reverse"),l(this,ve,Ve).call(this,r(this,Ae),"bottom","0%")):(l(this,ve,Ve).call(this,r(this,Ae),"flex-direction","column"),l(this,ve,Ve).call(this,r(this,Ae),"bottom","auto"))},Ll=new WeakSet,vp=function(e){e.code==="Space"&&(r(this,Me).focus(),this.setMenu({open:!0})),e.type==="click"&&(l(this,yn,Zr).call(this)?this.setMenu({open:!1}):(r(this,Me).focus(),this.setMenu({open:!0})))},ld=new WeakSet,UE=function(){r(this,_l).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};const tS=({fieldKey:t,formID:e,attr:s,onBlurHandler:i,contentID:n,styleClasses:a})=>{const o=j.useRef(null),h=j.useRef(null),d=et(oe)[t],u=et(Cc),{selectedFlagImage:f,selectedCurrencyClearable:E,searchClearable:g,optionFlagImage:b,defaultCurrencyKey:I,searchPlaceholder:v,noCurrencyFoundText:C}=d.config;return j.useEffect(()=>{const w=document.getElementById("bit-grid-layout").contentWindow;o!=null&&o.current||(o.current=yt(`.${t}-currency-fld-wrp`));const x=h.current,R=o.current;x&&R&&"destroy"in x&&x.destroy();const{options:O,inputFormatOptions:L,valueFormatOptions:P}=d,y={fieldKey:t,inputFormatOptions:L,valueFormatOptions:P,selectedFlagImage:f,selectedCurrencyClearable:E,searchClearable:g,optionFlagImage:b,defaultCurrencyKey:I,searchPlaceholder:v,noCurrencyFoundText:C,options:O,assetsURL:`${u.assetsURL}/../static/currencies/`,document:document.getElementById("bit-grid-layout").contentDocument,window:w,attributes:{option:gt(t,"option"),"opt-lbl-wrp":gt(t,"opt-lbl-wrp"),"opt-icn":gt(t,"opt-icn"),"opt-lbl":gt(t,"opt-lbl"),"opt-suffix":gt(t,"opt-suffix")},classNames:{option:S(t,"option"),"opt-lbl-wrp":S(t,"opt-lbl-wrp"),"opt-icn":S(t,"opt-icn"),"opt-lbl":S(t,"opt-lbl"),"opt-suffix":S(t,"opt-suffix")}};w.bit_virtualized_list||(w.bit_virtualized_list=Tf),w.observeElm||(w.observeElm=Lu),h.current=new J0(R,y)},[d]),p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:a}),p.jsx(Ut,{formID:e,fieldKey:t,fieldData:s,children:p.jsx("div",{className:`${t}-currency-fld-container`,children:p.jsxs("div",A(_({"data-dev-currency-fld-wrp":t,className:`${t}-currency-fld-wrp ${S(t,"currency-fld-wrp")} ${d.valid.disabled?"disabled":""} ${d.valid.readonly?"readonly":""}`,ref:o},M(t,"currency-fld-wrp")),{children:[p.jsx("input",_(_({name:t,type:"hidden",className:`${t}-currency-hidden-input`},"disabled"in d.valid&&{disabled:d.valid.disabled}),"readonly"in d.valid&&{readOnly:d.valid.readonly})),p.jsxs("div",{className:`${t}-currency-inner-wrp`,children:[p.jsxs("div",{"data-testid":`${t}-dpd-wrp`,className:`${t}-dpd-wrp`,"data-dev-dpd-wrp":t,role:"combobox","aria-controls":"currency-dropdown","aria-live":"assertive","aria-labelledby":"currency-label-2","aria-expanded":"false",tabIndex:d.valid.disabled?"-1":"0",children:[f&&p.jsx("div",{className:`${t}-selected-currency-wrp`,children:p.jsx("img",_({"data-dev-selected-currency-img":t,alt:"Selected currency image","aria-hidden":"true",className:`${t}-selected-currency-img ${S(t,"selected-currency-img")}`,src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>"},M(t,"selected-currency-img")))}),p.jsx("div",{className:`${t}-dpd-down-btn`,children:p.jsx("svg",{width:"15",height:"15",role:"img",title:"Downarrow icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),p.jsx("input",A(_({"data-dev-currency-amount-input":t,"data-testid":`${t}-crncy-amnt-inp`,"aria-label":"Currency Input",type:"text"},"ph"in s&&{placeholder:s.ph}),{className:`${t}-currency-amount-input`,tabIndex:d.valid.disabled?"-1":"0"})),E&&p.jsx("button",A(_({"data-testid":`${t}-inp-clr-btn`,"data-dev-input-clear-btn":t,type:"button",title:"Clear value",className:`${t}-input-clear-btn ${S(t,"input-clear-btn")}`},M(t,"input-clear-btn")),{children:p.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),p.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]}),p.jsx("div",A(_({className:`${t}-option-wrp  ${S(t,"option-wrp")}`,"data-dev-option-wrp":t},M(t,"option-search-wrp")),{children:p.jsxs("div",{className:`${t}-option-inner-wrp`,children:[p.jsxs("div",A(_({"data-dev-option-search-wrp":t,className:`${t}-option-search-wrp ${S(t,"option-search-wrp")}`},M(t,"option-search-wrp")),{children:[p.jsx("input",_({"data-testid":`${t}-opt-srch-inp`,"data-dev-opt-search-input":t,type:"search",className:`${t}-opt-search-input ${S(t,"opt-search-input")}`,placeholder:d.config.searchPlaceholder,autoComplete:"off",tabIndex:"-1"},M(t,"opt-search-input"))),p.jsxs("svg",A(_({className:`${t}-opt-search-icn ${S(t,"opt-search-icn")}`,"data-dev-opt-search-icn":t,"aria-hidden":"true",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},M(t,"opt-search-icn")),{children:[p.jsx("circle",{cx:"11",cy:"11",r:"8"}),p.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})),g&&p.jsx("button",A(_({"data-testid":`${t}-srch-clr-btn`,"data-dev-search-clear-btn":t,type:"button","aria-label":"Clear search",className:`${t}-search-clear-btn ${S(t,"search-clear-btn")}`,tabIndex:"-1"},M(t,"search-clear-btn")),{children:p.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),p.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]})),p.jsx("ul",A(_({className:`${t}-option-list ${S(t,"option-list")}`,tabIndex:"-1",role:"listbox","aria-label":"currency list","data-dev-option-list":t},M(t,"option-list")),{children:p.jsxs("li",{className:"option",children:[p.jsx("span",{className:"opt-prefix",children:"Prefix"}),p.jsxs("span",{className:"opt-lbl-wrp",children:[p.jsx("img",{className:"opt-icn",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>",alt:"Placeholder"}),p.jsx("span",{className:"opt-lbl",children:"Option"})]}),p.jsx("span",{className:"opt-suffix",children:"Suffix"})]})}))]})}))]}))})})]})};function eS({attr:t,onBlurHandler:e,resetFieldValue:s,formID:i,fieldKey:n,styleClasses:a}){var f,E;let{checked:o}=t.valid;const h=t.val||(o?t.msg.checked:t.msg.unchecked),[c,d]=j.useState(h);c===t.msg.unchecked?o=!1:c===t.msg.checked&&(o=!0);const u=g=>{if(t.valid.disabled)return;g.target.checked?d(t.msg.checked):d(t.msg.unchecked);const{form:b}=g.target;validateForm({input:{name:t.name,form:b,value:g.target.checked?t.msg.checked:t.msg.unchecked}})};return p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:a}),p.jsx(Ut,{formID:i,fieldKey:n,fieldData:t,noLabel:!0,children:p.jsxs("div",A(_({"data-dev-cc":n,className:`${n}-cc ${S(n,"cc")}`},M(n,"cc")),{children:[p.jsx("svg",{className:`${n}-cks`,children:p.jsx("symbol",{id:`${n}-ck-svg`,viewBox:"0 0 12 10",children:p.jsx("polyline",{className:`${n}-ck-svgline`,points:"1.5 6 4.5 9 10.5 1"})})}),p.jsxs("div",A(_({"data-dev-cw":n,className:`${n}-cw ${S(n,"cw")}`},M(n,"cw")),{children:[p.jsx("input",A(_(A(_(_(_({"data-testid":n,id:`${n}-decision`,type:"checkbox",className:`${n}-ci`},"req"in t.valid&&{required:t.valid.req}),"disabled"in t.valid&&{disabled:t.valid.disabled}),"readonly"in t.valid&&{readOnly:t.valid.readonly}),{defaultValue:(f=t==null?void 0:t.info)==null?void 0:f.lbl}),"name"in t&&{name:t.name}),{checked:o,value:c,onChange:u})),p.jsxs("label",A(_({"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-decision`,className:`${n}-cl ${S(n,"cl")}`},M(n,"cl")),{children:[p.jsx("span",A(_({"data-dev-bx":n,"data-bx":!0,className:`${n}-bx ${S(n,"bx")}`},M(n,"bx")),{children:p.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp`,children:p.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn`})})})),p.jsx("span",A(_({"data-dev-ct":n,className:`${n}-ct ${S(n,"ct")}`},M(n,"ct")),{children:p.jsx(ms,{html:t.lbl||((E=t==null?void 0:t.info)==null?void 0:E.lbl)})}))]}))]}))]}))})]})}function sS({fieldKey:t,styleClasses:e,attr:s}){var o,h;const i=et(fo),{styleMode:n}=et(cn),a=((h=(o=s.valid)==null?void 0:o.hidden)==null?void 0:h.includes(i))||!1;return p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:e}),p.jsx("div",A(_({"data-dev-fld-wrp":t,className:`${t}-fld-wrp drag ${n?"":"drag"} ${a?"fld-hide":""} ${S(t,"fld-wrp")}`},M(t,"fld-wrp")),{children:p.jsx("div",_({"data-dev-divider":t,className:`${t}-divider ${S(t,"divider")}`},M(t,"divider")))}))]})}var Tt,vr,Xt,fe,Na,Te,cd,me,Bi,Rs,fi,Cs,ls,mi,qs,se,gi,xt,ki,Pa,q,Al,Da,Ml,$l,Tp,Mt,Wt,Nl,xp,xe,ze,ji,tr,hd,VE,Pl,Sp,dd,zE,Tr,Mo,Fa,ih,ud,WE,Ui,er,pd,HE,Ga,nh,Ln,Qr,Dl,Rp,Fl,Cp,Ei,pn,Ba,rh,fd,qE,Os,ni,ie,Ie,vt,St,Vi,sr,ka,ah,Gl,Op,Ys,Li,Zt,ce,Bl,yp,kl,Lp,xr,$o,zi,ir,jl,Ap,md,YE,gd,XE,Rt,Ft,Xs,Ai,Ne,ss,Ed,ZE,bd,QE,ja,oh,Id,JE,Ul,Mp,An,Jr,_d,KE,Vl,$p,wd,tb;class iS{constructor(e,s){m(this,$l);m(this,Mt);m(this,Nl);m(this,xe);m(this,ji);m(this,hd);m(this,Pl);m(this,dd);m(this,Tr);m(this,Fa);m(this,ud);m(this,Ui);m(this,pd);m(this,Ga);m(this,Ln);m(this,Dl);m(this,Fl);m(this,Ei);m(this,Ba);m(this,fd);m(this,Os);m(this,ie);m(this,vt);m(this,Vi);m(this,ka);m(this,Gl);m(this,Ys);m(this,Zt);m(this,Bl);m(this,kl);m(this,xr);m(this,zi);m(this,jl);m(this,md);m(this,gd);m(this,Rt);m(this,Xs);m(this,Ne);m(this,Ed);m(this,bd);m(this,ja);m(this,Id);m(this,Ul);m(this,An);m(this,_d);m(this,Vl);m(this,wd);m(this,Tt,null);m(this,vr,null);m(this,Xt,null);m(this,fe,null);m(this,Na,null);m(this,Te,null);m(this,cd,null);m(this,me,null);m(this,Bi,null);m(this,Rs,null);m(this,fi,null);m(this,Cs,!1);m(this,ls,null);m(this,mi,null);m(this,qs,"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>");m(this,se,"");m(this,gi,[]);m(this,xt,[]);m(this,ki,null);m(this,Pa,{});m(this,q,{separator:",",selectedOptImage:!1,dropdownIcn:"",selectedOptClearable:!0,searchClearable:!0,optionIcon:!0,defaultValue:"",placeholder:"Select an option",searchPlaceholder:"Search option",maxHeight:370,closeOnSelect:!1,showChip:!0,options:[],attributes:{},classNames:{},activeList:0,onChange:()=>{}});m(this,Al,null);m(this,Da,"");m(this,Ml,[]);Object.assign(r(this,q),s),T(this,ki,s.document?s.document:document),T(this,Pa,s.window?s.window:window),typeof e=="string"?T(this,Tt,r(this,ki).querySelector(e)):T(this,Tt,e),this.fieldKey=r(this,q).fieldKey,this.init()}init(){T(this,Xt,l(this,Mt,Wt).call(this,`.${this.fieldKey}-dpd-hidden-input`)),T(this,fe,l(this,Mt,Wt).call(this,`.${this.fieldKey}-opt-search-input`)),T(this,Na,l(this,Mt,Wt).call(this,`.${this.fieldKey}-option-wrp`)),T(this,Te,l(this,Mt,Wt).call(this,`.${this.fieldKey}-dpd-wrp`)),T(this,cd,l(this,Mt,Wt).call(this,`.${this.fieldKey}-selected-opt-wrp`)),T(this,me,l(this,Mt,Wt).call(this,`.${this.fieldKey}-selected-opt-img`)),T(this,Bi,l(this,Mt,Wt).call(this,`.${this.fieldKey}-selected-opt-lbl`)),T(this,Rs,l(this,Mt,Wt).call(this,`.${this.fieldKey}-selected-opt-clear-btn`)),T(this,fi,r(this,q).searchClearable?l(this,Mt,Wt).call(this,`.${this.fieldKey}-search-clear-btn`):{}),l(this,xe,ze).call(this,r(this,Te),"click",e=>{l(this,Vl,$p).call(this,e)}),l(this,xe,ze).call(this,r(this,Te),"keyup",e=>{l(this,Vl,$p).call(this,e)}),l(this,xe,ze).call(this,r(this,Tt),"keydown",e=>{l(this,ud,WE).call(this,e)}),l(this,$l,Tp).call(this),r(this,q).defaultValue&&this.setSelectedOption(r(this,q).defaultValue),r(this,q).defaultValue||l(this,hd,VE).call(this),r(this,q).selectedOptImage&&(r(this,me).src=r(this,qs)),r(this,q).searchClearable&&(l(this,Zt,ce).call(this,r(this,fi),"display","none"),l(this,xe,ze).call(this,r(this,fi),"click",()=>{this.searchOptions("")})),r(this,fe).placeholder=r(this,q).searchPlaceholder,r(this,fe).value="",l(this,xe,ze).call(this,r(this,fe),"keyup",e=>{l(this,bd,QE).call(this,e)}),T(this,Cs,r(this,q).allowCustomOption),r(this,Pa).observeElm(r(this,Xt),"value",(e,s)=>{l(this,dd,zE).call(this,e,s)})}setSelectedOption(e){let s=null,i=e.split(r(this,q).separator);i=i.filter(n=>l(this,Ln,Qr).call(this,n)),r(this,q).multipleSelect?(i.length===1?s=l(this,Ln,Qr).call(this,i[0]):i.length>1&&(s={lbl:`${i.length} options selected`}),r(this,q).disableOnMax&&r(this,q).mx&&i.length>=r(this,q).mx?l(this,Ba,rh).call(this,!0):l(this,Ba,rh).call(this,!1)):s=l(this,Ln,Qr).call(this,e),T(this,se,e),r(this,se)||l(this,Ga,nh).call(this),s&&(this.value=e,r(this,q).selectedOptImage&&(r(this,q).multipleSelect?i.length>1?(r(this,me).src=r(this,qs),l(this,Ei,pn).call(this,r(this,me))):i.length===1?(r(this,me).src=s.icn||r(this,qs),l(this,Ei,pn).call(this,r(this,me),s.icn)):(r(this,me).src=r(this,qs),l(this,Ei,pn).call(this,r(this,me))):(r(this,me).src=s.icn||r(this,qs),l(this,Ei,pn).call(this,r(this,me),s.icn))),r(this,q).multipleSelect&&r(this,q).showChip&&l(this,Dl,Rp).call(this,i),r(this,q).showChip||l(this,Ys,Li).call(this,r(this,Bi),s.lbl),r(this,q).closeOnSelect&&this.setMenu({open:!1}),r(this,q).selectedOptClearable&&(l(this,Zt,ce).call(this,r(this,Rs),"display","grid"),l(this,xe,ze).call(this,r(this,Rs),"click",n=>{l(this,Ga,nh).call(this,n)})),r(this,q).onChange&&r(this,q).onChange(e),l(this,Pl,Sp).call(this,r(this,Xt),"blur"))}searchOptions(e){l(this,Id,JE).call(this,e);let s=[],i=!1;if(e){const n=r(this,q).options.length,a=[],o=e.toLowerCase();for(let c=0;c<n;c+=1){const d=r(this,q).options[c];if("type"in d)continue;const u=d.lbl.toLowerCase();if(u.includes(o)){if("groupIndex"in d&&!a.includes(d.groupIndex)){const f=d.groupIndex;a.push(f),s.push(r(this,q).options[f])}s.push(d),u===o&&(i=!0)}}const h=r(this,gi).length;for(let c=0;c<h;c+=1){const d=r(this,gi)[c],u=d.lbl.toLowerCase();u.includes(o)&&(s.push(d),u===o&&(i=!0))}s.length||(s=[{i:"not-found",lbl:"No Option Found"}]),T(this,xt,r(this,Cs)?[r(this,q).options[0]]:[]),r(this,xt).push(...s),r(this,q).searchClearable&&l(this,Zt,ce).call(this,r(this,fi),"display","grid")}else T(this,xt,r(this,q).options),r(this,q).searchClearable&&l(this,Zt,ce).call(this,r(this,fi),"display","none"),r(this,Cs)&&(T(this,ls,l(this,Mt,Wt).call(this,`${l(this,Ui,er).call(this)} .create-opt`)),l(this,Zt,ce).call(this,r(this,ls),"display","none"),T(this,xt,r(this,xt).concat(r(this,gi))));if(l(this,zi,ir).call(this),T(this,ls,l(this,Mt,Wt).call(this,`${l(this,Ui,er).call(this)} .create-opt`)),i&&r(this,Cs))l(this,Zt,ce).call(this,r(this,ls),"display","none");else if(r(this,Cs)&&e.trim()){l(this,Zt,ce).call(this,r(this,ls),"display","block");const n=r(this,ls).querySelector(".opt-lbl");n.innerText=`Create: ${e}`,l(this,Rt,Ft).call(this,r(this,ls),"data-value",e)}}setMenu({open:e}){l(this,Zt,ce).call(this,r(this,Na),"max-height",`${e?r(this,q).maxHeight:0}px`),e?(l(this,_d,KE).call(this),l(this,vt,St).call(this,r(this,Tt),"menu-open"),l(this,xe,ze).call(this,r(this,ki),"click",s=>l(this,Ul,Mp).call(this,s)),l(this,ie,Ie).call(this,r(this,fe),0),l(this,ie,Ie).call(this,r(this,fi),0),r(this,Te).setAttribute("aria-expanded","true"),l(this,Rt,Ft).call(this,r(this,mi),"aria-hidden",!1),l(this,Rt,Ft).call(this,r(this,fe),"aria-hidden",!1),l(this,zi,ir).call(this)):(l(this,Vi,sr).call(this,r(this,Tt),"menu-open"),r(this,ki).removeEventListener("click",l(this,Ul,Mp)),setTimeout(()=>{this.searchOptions("")},100),l(this,ie,Ie).call(this,r(this,fe),-1),l(this,ie,Ie).call(this,r(this,fi),-1),r(this,Te).setAttribute("aria-expanded","false"),l(this,Rt,Ft).call(this,r(this,mi),"aria-hidden",!0),l(this,Rt,Ft).call(this,r(this,fe),"aria-hidden",!0)),l(this,gd,XE).call(this)}set activelist(e){const s=l(this,Mt,Wt).call(this,`.${this.fieldKey}-option-list[data-list="${e}"]`);if(s){const i=s.getAttribute("data-list-index");r(this,q).activeList=i,this.setSelectedOption(""),l(this,$l,Tp).call(this)}}set disabled(e){String(e).toLowerCase()==="true"?(r(this,Tt).classList.add("disabled"),r(this,Xt).disabled=!0,l(this,ie,Ie).call(this,r(this,Te),-1),l(this,ie,Ie).call(this,r(this,Rs),-1),l(this,Rt,Ft).call(this,r(this,Te),"aria-label","Dropdown disabled"),this.setMenu({open:!1})):String(e).toLowerCase()==="false"&&(l(this,Vi,sr).call(this,r(this,Tt),"disabled"),r(this,Xt).removeAttribute("disabled"),l(this,ie,Ie).call(this,r(this,Te),0),l(this,ie,Ie).call(this,r(this,Rs),0),l(this,Rt,Ft).call(this,r(this,Te),"aria-label",r(this,q).placeholder))}get disabled(){return r(this,Xt).disabled}set readonly(e){String(e).toLowerCase()==="true"?(l(this,vt,St).call(this,r(this,Tt),"disabled"),r(this,Xt).readOnly=!0,l(this,ie,Ie).call(this,r(this,Te),-1),l(this,ie,Ie).call(this,r(this,Rs),-1),this.setMenu({open:!1})):String(e).toLowerCase()==="false"&&(l(this,Vi,sr).call(this,r(this,Tt),"disabled"),r(this,Xt).removeAttribute("readonly"),l(this,ie,Ie).call(this,r(this,Te),0),l(this,ie,Ie).call(this,r(this,Rs),0))}get readonly(){return r(this,Xt).readOnly}set value(e){r(this,Xt).value=e,l(this,Rt,Ft).call(this,r(this,Xt),"value",e)}get value(){return r(this,Xt).value}destroy(){this.value="",l(this,wd,tb).call(this)}reset(){l(this,Ga,nh).call(this),this.destroy(),this.init()}}Tt=new WeakMap,vr=new WeakMap,Xt=new WeakMap,fe=new WeakMap,Na=new WeakMap,Te=new WeakMap,cd=new WeakMap,me=new WeakMap,Bi=new WeakMap,Rs=new WeakMap,fi=new WeakMap,Cs=new WeakMap,ls=new WeakMap,mi=new WeakMap,qs=new WeakMap,se=new WeakMap,gi=new WeakMap,xt=new WeakMap,ki=new WeakMap,Pa=new WeakMap,q=new WeakMap,Al=new WeakMap,Da=new WeakMap,Ml=new WeakMap,$l=new WeakSet,Tp=function(){const e=l(this,Mt,Wt).call(this,`.${this.fieldKey}-option-list[data-list-index="${r(this,q).activeList}"]`);T(this,mi,l(this,Mt,Wt).call(this,`.${this.fieldKey}-option-list.active-list`)),r(this,mi).innerHTML=e.innerHTML,l(this,md,YE).call(this),r(this,q).options=l(this,pd,HE).call(this),T(this,xt,[...r(this,q).options])},Mt=new WeakSet,Wt=function(e,s){return s?s.querySelector(e):r(this,Tt).querySelector(e)},Nl=new WeakSet,xp=function(e){return r(this,Tt).querySelectorAll(e)},xe=new WeakSet,ze=function(e,s,i){e==null||e.addEventListener(s,i),r(this,Ml).push({selector:e,eventType:s,cb:i})},ji=new WeakSet,tr=function(e,s){e.appendChild(s)},hd=new WeakSet,VE=function(){r(this,Xt).value&&(this.setSelectedOption(r(this,Xt).value),l(this,zi,ir).call(this))},Pl=new WeakSet,Sp=function(e,s){const i=new Event(s);e.dispatchEvent(i)},dd=new WeakSet,zE=function(e,s){e!==s&&this.setSelectedOption(s),typeof bit_conditionals!="undefined"&&bit_conditionals({target:r(this,Xt)})},Tr=new WeakSet,Mo=function(e=-1,s){if(s==="next"){const i=r(this,xt).length;for(let n=e+1;n<i;n+=1){const a=r(this,xt)[n];if(a.type!=="group"&&!a.disabled&&!a.disableOnMax)return n}}else if(s==="previous")for(let i=e-1;i>=0;i-=1){const n=r(this,xt)[i];if(n.type!=="group"&&!n.disabled&&!n.disableOnMax)return i}},Fa=new WeakSet,ih=function(e){return l(this,Mt,Wt).call(this,`${l(this,Ui,er).call(this)} .option[data-index="${e}"]`)},ud=new WeakSet,WE=function(e){const s=r(this,ki).activeElement;let i=null;if(l(this,An,Jr).call(this)){const a=Number(s.dataset.index||-1);if(e.key==="ArrowDown"||!e.shiftKey&&e.key==="Tab"){e.preventDefault();let o=0,h=null;s===r(this,fe)?(o=l(this,Tr,Mo).call(this,-1,"next"),r(this,Cs)&&o===0&&l(this,ka,ah).call(this,r(this,ls))!=="block"&&(o=1),h=l(this,Fa,ih).call(this,o)):s.classList.contains("option")&&(o=l(this,Tr,Mo).call(this,a,"next"),h=l(this,Fa,ih).call(this,o)),h&&(i=h)}else if(e.key==="ArrowUp"||e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,fe))i=r(this,Te),l(this,An,Jr).call(this)&&this.setMenu({open:!1});else if(s.classList.contains("option")){let o=l(this,Tr,Mo).call(this,a,"previous");l(this,ja,oh)&&o===0&&l(this,ka,ah).call(this,r(this,ls))!=="block"&&(o=-1);const h=l(this,Fa,ih).call(this,o);h?i=h:h||(i=r(this,fe))}}else e.key==="Escape"&&this.setMenu({open:!1})}else if(e.key>="a"&&e.key<="z"){clearTimeout(r(this,Al)),T(this,Da,r(this,Da)+e.key),T(this,Al,setTimeout(()=>{T(this,Da,"")},300));const a=r(this,q).options.find(o=>o.type!=="group"&&!o.disabled&&o.lbl.toLowerCase().startsWith(r(this,Da)));a&&this.setSelectedOption(a.val)}else if(e.key==="ArrowDown"||e.key==="ArrowUp"){if(r(this,q).multipleSelect)return;e.preventDefault();const a=l(this,fd,qE).call(this),o=e.key==="ArrowDown"?"next":"previous";let h=l(this,Tr,Mo).call(this,a,o);r(this,Cs)&&h===0&&(h=1),h>-1&&h<r(this,q).options.length&&(this.value=r(this,q).options[h].val)}else if((e.key==="ArrowRight"||e.key==="ArrowLeft")&&s.classList.contains("chip-clear-btn")){let o=null;e.key==="ArrowRight"?o=s.parentElement.nextElementSibling:e.key==="ArrowLeft"&&(o=s.parentElement.previousElementSibling),o&&(i=l(this,Mt,Wt).call(this,".chip-clear-btn",o))}i&&i.focus()},Ui=new WeakSet,er=function(){return`.${this.fieldKey}-option-list.active-list`},pd=new WeakSet,HE=function(){const e=Array.from(l(this,Nl,xp).call(this,`${l(this,Ui,er).call(this)} .option`)),s=a=>{const o={},h=a.querySelector(".opt-lbl"),{value:c}=a.dataset;o.lbl=h.textContent,c?o.val=c:o.val=o.lbl,l(this,Gl,Op).call(this,a,"disabled-opt")&&(o.disabled=!0);const d=a.querySelector(".opt-icn");r(this,q).optionIcon&&(d!=null&&d.src)&&(o.icn=d.src);const{attributes:u}=a,f=u.length;o.attributes={};for(let E=0;E<f;E+=1){const g=u[E].nodeName;o.attributes[g]=a.getAttribute(g)}return o},i=[],{length:n}=e;for(let a=0;a<n;a+=1){const o=e[a];let h={},c=null;if(o.classList.contains("opt-group-title")){h=s(o),h.type="group",i.push(h),c=a;for(let d=a+1;d<n;d+=1){const u=e[d];if(u.classList.contains("opt-group-child")){const f=s(u);f.groupIndex=c,a=d,i.push(f)}else{a=d-1;break}}}else h=s(o),i.push(h)}return i},Ga=new WeakSet,nh=function(e){e==null||e.stopPropagation(),T(this,se,""),r(this,q).selectedOptImage&&(r(this,me).src=r(this,qs),l(this,Ei,pn).call(this,r(this,me))),this.value="",r(this,q).multipleSelect&&r(this,q).showChip&&l(this,Dl,Rp).call(this,[]),r(this,q).showChip||l(this,Ys,Li).call(this,r(this,Bi),r(this,q).placeholder),r(this,q).selectedOptClearable&&l(this,Zt,ce).call(this,r(this,Rs),"display","none"),l(this,Ba,rh).call(this),l(this,Pl,Sp).call(this,r(this,Xt),"blur")},Ln=new WeakSet,Qr=function(e){return[...r(this,q).options,...r(this,gi)].find(s=>s.val===e)},Dl=new WeakSet,Rp=function(e){if(l(this,Ys,Li).call(this,r(this,Bi),""),T(this,vr,r(this,Tt).parentElement),!e.length){r(this,vr).style.removeProperty("min-height"),r(this,q).selectedOptImage&&l(this,Zt,ce).call(this,r(this,me),"display","block"),l(this,Ys,Li).call(this,r(this,Bi),r(this,q).placeholder);return}r(this,q).selectedOptImage&&l(this,Zt,ce).call(this,r(this,me),"display","none"),e.forEach((s,i)=>{var b,I,v,C,w,x,R,O;const n=l(this,Os,ni).call(this,"div");l(this,vt,St).call(this,n,"chip-wrp");const a=(b=r(this,q).customClasses)==null?void 0:b["chip-wrp"];a&&l(this,Xs,Ai).call(this,n,a);const o=(I=r(this,q).customAttributes)==null?void 0:I["chip-wrp"];if(o&&l(this,Ne,ss).call(this,n,o),"chip-wrp"in r(this,q).attributes){const L=r(this,q).attributes["chip-wrp"];l(this,Ne,ss).call(this,n,L)}if(r(this,q).selectedOptImage&&r(this,q).optionIcon){const L=l(this,Os,ni).call(this,"img");if(l(this,vt,St).call(this,L,"chip-icn"),"chip-icn"in r(this,q).attributes){const V=r(this,q).attributes["chip-icn"];l(this,Ne,ss).call(this,L,V)}const P=l(this,Ln,Qr).call(this,s);l(this,Rt,Ft).call(this,L,"src",P.icn||r(this,qs)),l(this,Ei,pn).call(this,L,P.icn),l(this,Rt,Ft).call(this,L,"alt",P.lbl);const y=(v=r(this,q).customClasses)==null?void 0:v["chip-icn"];y&&l(this,Xs,Ai).call(this,L,y);const D=(C=r(this,q).customAttributes)==null?void 0:C["chip-icn"];D&&l(this,Ne,ss).call(this,L,D),l(this,ji,tr).call(this,n,L)}const h=l(this,Os,ni).call(this,"span");if(l(this,vt,St).call(this,h,"chip-lbl"),"chip-lbl"in r(this,q).attributes){const L=r(this,q).attributes["chip-lbl"];l(this,Ne,ss).call(this,h,L)}const c=(w=r(this,q).customClasses)==null?void 0:w["chip-lbl"];c&&l(this,Xs,Ai).call(this,h,c);const d=(x=r(this,q).customAttributes)==null?void 0:x["chip-lbl"];d&&l(this,Ne,ss).call(this,h,d);const u=l(this,Ln,Qr).call(this,s);l(this,Ys,Li).call(this,h,u?u.lbl:s),l(this,ji,tr).call(this,n,h);const f=l(this,Os,ni).call(this,"button");if(l(this,vt,St).call(this,f,"chip-clear-btn"),"chip-clear-btn"in r(this,q).attributes){const L=r(this,q).attributes["chip-clear-btn"];l(this,Ne,ss).call(this,f,L)}const E=(R=r(this,q).customClasses)==null?void 0:R["chip-clear-btn"];E&&l(this,Xs,Ai).call(this,f,E);const g=(O=r(this,q).customAttributes)==null?void 0:O["chip-clear-btn"];g&&l(this,Ne,ss).call(this,f,g),f.innerHTML=r(this,Rs).innerHTML,l(this,xe,ze).call(this,f,"click",L=>{l(this,Fl,Cp).call(this,L,i)}),l(this,xe,ze).call(this,f,"keyup",L=>{L.key==="Backspace"&&l(this,Fl,Cp).call(this,L,i)}),l(this,ji,tr).call(this,n,f),l(this,ji,tr).call(this,r(this,Bi),n)}),T(this,vr,r(this,Tt).parentElement),l(this,Zt,ce).call(this,r(this,vr),"min-height",`${r(this,Tt).offsetHeight-r(this,Na).offsetHeight}px`)},Fl=new WeakSet,Cp=function(e,s){e.stopPropagation();const i=r(this,se).split(r(this,q).separator);i.splice(s,1),this.setSelectedOption(i.join(r(this,q).separator)),l(this,zi,ir).call(this)},Ei=new WeakSet,pn=function(e=null,s=0){s?l(this,Vi,sr).call(this,e,"placeholder-img"):l(this,vt,St).call(this,e,"placeholder-img")},Ba=new WeakSet,rh=function(e=!1){if(e){const s=r(this,se).split(r(this,q).separator);T(this,xt,r(this,xt).map(i=>{const n=i;return!i.disabled&&!s.includes(i.val)?n.disableOnMax=!0:n.disableOnMax=!1,n}))}else T(this,xt,r(this,xt).map(s=>{const i=s;return delete i.disableOnMax,i}));l(this,zi,ir).call(this)},fd=new WeakSet,qE=function(){return r(this,xt).findIndex(e=>e.val===r(this,se))},Os=new WeakSet,ni=function(e){return r(this,ki).createElement(e)},ie=new WeakSet,Ie=function(e,s){e.tabIndex=s},vt=new WeakSet,St=function(e,s){e.classList.add(s)},Vi=new WeakSet,sr=function(e,s){e.classList.remove(s)},ka=new WeakSet,ah=function(e){return(e==null?void 0:e.style.display)||""},Gl=new WeakSet,Op=function(e,s){return e.classList.contains(s)},Ys=new WeakSet,Li=function(e,s){e.textContent=s},Zt=new WeakSet,ce=function(e,s,i){e.style.setProperty(s,i,"important")},Bl=new WeakSet,yp=function(e){return e&&e.split(r(this,q).separator)||[]},kl=new WeakSet,Lp=function(e){return e.join(r(this,q).separator)},xr=new WeakSet,$o=function(e){e.stopPropagation();const s=e.currentTarget,i=s.dataset.value;if(r(this,Cs)&&s.classList.contains("create-opt")&&l(this,ja,oh).call(this,i),r(this,q).multipleSelect){const n=l(this,Bl,yp).call(this,r(this,se));if(n.includes(i)){const o=n.indexOf(i);n.splice(o,1),l(this,Vi,sr).call(this,s,"selected-opt")}else n.push(i),l(this,vt,St).call(this,s,"selected-opt");T(this,se,l(this,kl,Lp).call(this,n))}else{const n=l(this,Mt,Wt).call(this,".selected-opt");n&&l(this,Vi,sr).call(this,n,"selected-opt"),l(this,vt,St).call(this,s,"selected-opt"),T(this,se,i)}this.setSelectedOption(r(this,se)),setTimeout(()=>{l(this,Mt,Wt).call(this,`${l(this,Ui,er).call(this)} .option[data-value="${i}"]`).focus()},0)},zi=new WeakSet,ir=function(){l(this,Ed,ZE).call(this)},jl=new WeakSet,Ap=function(){return l(this,Nl,xp).call(this,`${l(this,Ui,er).call(this)} .option:not(.opt-group-title):not(.create-opt)`)},md=new WeakSet,YE=function(){const e=l(this,jl,Ap).call(this),s=e.length;for(let i=0;i<s;i+=1){const n=e[i];l(this,xe,ze).call(this,n,"click",a=>{l(this,xr,$o).call(this,a)}),l(this,xe,ze).call(this,n,"keyup",a=>{a.key==="Enter"&&l(this,xr,$o).call(this,a)})}},gd=new WeakSet,XE=function(){const e=l(this,jl,Ap).call(this),s=l(this,An,Jr).call(this),i=e.length;for(let n=0;n<i;n+=1){const a=e[n];s?l(this,ie,Ie).call(this,a,0):l(this,ie,Ie).call(this,a,-1)}},Rt=new WeakSet,Ft=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},Xs=new WeakSet,Ai=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,vt,St).call(this,e,i))},Ne=new WeakSet,ss=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,Rt,Ft).call(this,e,s[n].key,s[n].value)},Ed=new WeakSet,ZE=function(){r(this,mi).innerHTML="";const e=r(this,se).split(r(this,q).separator),s=r(this,xt).length;for(let i=0;i<s;i+=1){const n=r(this,xt)[i],a=l(this,Os,ni).call(this,"li");if(n.i==="not-found"){l(this,Ys,Li).call(this,a,n.lbl),l(this,vt,St).call(this,a,"opt-not-found"),l(this,ji,tr).call(this,r(this,mi),a);return}l(this,vt,St).call(this,a,"option");const o=l(this,Os,ni).call(this,"span");if(l(this,vt,St).call(this,o,"opt-lbl-wrp"),"opt-lbl-wrp"in r(this,q).classNames){const d=r(this,q).classNames["opt-lbl-wrp"];d&&l(this,Xs,Ai).call(this,o,d)}if("opt-lbl-wrp"in r(this,q).attributes){const d=r(this,q).attributes["opt-lbl-wrp"];l(this,Ne,ss).call(this,o,d)}if(r(this,q).optionIcon){const d=l(this,Os,ni).call(this,"img");if(l(this,vt,St).call(this,d,"opt-icn"),"opt-icn"in r(this,q).classNames){const u=r(this,q).classNames["opt-icn"];u&&l(this,Xs,Ai).call(this,d,u)}if("opt-icn"in r(this,q).attributes){const u=r(this,q).attributes["opt-icn"];l(this,Ne,ss).call(this,d,u)}d.src=n.icn||r(this,qs),l(this,Ei,pn).call(this,d,n.icn),d.alt=n.lbl,d.loading="lazy",o.append(d)}const h=l(this,Os,ni).call(this,"span");if(l(this,vt,St).call(this,h,"opt-lbl"),"opt-lbl"in r(this,q).classNames){const d=r(this,q).classNames["opt-lbl"];d&&l(this,Xs,Ai).call(this,h,d)}if("opt-lbl"in r(this,q).attributes){const d=r(this,q).attributes["opt-lbl"];l(this,Ne,ss).call(this,h,d)}l(this,Ys,Li).call(this,h,n.lbl),o.append(h);const c=l(this,Os,ni).call(this,"span");if(l(this,vt,St).call(this,c,"opt-prefix"),"opt-prefix"in r(this,q).classNames){const d=r(this,q).classNames["opt-prefix"];d&&l(this,Xs,Ai).call(this,c,d)}if("opt-prefix"in r(this,q).attributes){const d=r(this,q).attributes["opt-prefix"];l(this,Ne,ss).call(this,h,d)}l(this,Ys,Li).call(this,c,n.code),a.append(o,c),Object.keys(n.attributes).map(d=>{l(this,Rt,Ft).call(this,a,d,n.attributes[d])}),e.includes(n.val)?(l(this,vt,St).call(this,a,"selected-opt"),l(this,Rt,Ft).call(this,a,"aria-selected",!0)):l(this,Rt,Ft).call(this,a,"aria-selected",!1),n.type==="group"?l(this,vt,St).call(this,a,"opt-group-title"):("groupIndex"in n&&l(this,vt,St).call(this,a,"opt-group-child"),l(this,Rt,Ft).call(this,a,"data-index",i),l(this,Rt,Ft).call(this,a,"data-value",n.val),l(this,Rt,Ft).call(this,a,"role","option"),l(this,Rt,Ft).call(this,a,"aria-posinset",i+1),l(this,Rt,Ft).call(this,a,"aria-setsize",r(this,xt).length),l(this,ie,Ie).call(this,a,l(this,An,Jr).call(this)?"0":"-1"),n.disabled?l(this,vt,St).call(this,a,"disabled-opt"):n.disableOnMax?l(this,vt,St).call(this,a,"disable-on-max"):(l(this,xe,ze).call(this,a,"click",d=>{l(this,xr,$o).call(this,d)}),l(this,xe,ze).call(this,a,"keyup",d=>{d.key==="Enter"&&l(this,xr,$o).call(this,d)}))),l(this,ji,tr).call(this,r(this,mi),a)}},bd=new WeakSet,QE=function(e){var s;if(e.stopPropagation(),e.key==="Enter"&&r(this,xt).length){const i=(s=r(this,xt))==null?void 0:s[0].i;if(i&&(this.setSelectedOption(i),this.searchOptions("")),r(this,Cs)&&l(this,ka,ah).call(this,r(this,ls))!=="none"){const{value:n}=e.target;if(l(this,ja,oh).call(this,n),r(this,q).multipleSelect){const a=l(this,Bl,yp).call(this,r(this,se));a.push(n),T(this,se,l(this,kl,Lp).call(this,a))}else T(this,se,n);l(this,zi,ir).call(this),this.setSelectedOption(r(this,se))}}else this.searchOptions(e.target.value)},ja=new WeakSet,oh=function(e){let s=e.trim();if(s.includes&&s){const i=r(this,gi).length;for(let n=0;n<i;n+=1)if(r(this,gi)[n].lbl.toLowerCase()===s){s="";break}if(s){const n={lbl:s,val:s};n.attributes={},r(this,gi).push(n),r(this,xt).push(n),this.searchOptions("")}}},Id=new WeakSet,JE=function(e){r(this,fe).value=e},Ul=new WeakSet,Mp=function(e){r(this,Tt).contains(e.target)||this.setMenu({open:!1})},An=new WeakSet,Jr=function(){return l(this,Gl,Op).call(this,r(this,Tt),"menu-open")},_d=new WeakSet,KE=function(){const e=r(this,Te).getBoundingClientRect(),s=e.top,i=r(this,Pa).innerHeight-e.bottom;i<s&&i<r(this,q).maxHeight?(l(this,Zt,ce).call(this,r(this,Tt),"flex-direction","column-reverse"),l(this,Zt,ce).call(this,r(this,Tt),"bottom","0%")):(l(this,Zt,ce).call(this,r(this,Tt),"flex-direction","column"),l(this,Zt,ce).call(this,r(this,Tt),"bottom","auto"))},Vl=new WeakSet,$p=function(e){e.code==="Space"&&(r(this,fe).focus(),this.setMenu({open:!0})),e.type==="click"&&(l(this,An,Jr).call(this)?this.setMenu({open:!1}):(r(this,fe).focus(),this.setMenu({open:!0})))},wd=new WeakSet,tb=function(){r(this,Ml).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};function nS({fieldKey:t,formID:e,styleClasses:s,attr:i,onBlurHandler:n,resetFieldValue:a,isBuilder:o}){const[h,c]=j.useState(null),d=j.useRef(null),f=et(oe)[t],{optionsList:E,ph:g}=f,{activeList:b,optionIcon:I,allowCustomOption:v}=f.config;j.useEffect(()=>{if(!h)return;const w=d.current;w&&h&&"destroy"in w&&w.destroy();const{selectedOptImage:x,selectedOptClearable:R,searchClearable:O,searchPlaceholder:L,maxHeight:P,multipleSelect:y,showChip:D,selectedOptImgSrc:V,closeOnSelect:k}=f.config,B=document.getElementById("bit-grid-layout").contentWindow,X={fieldKey:t,selectedOptImage:x,selectedOptClearable:R,searchClearable:O,allowCustomOption:v,optionIcon:I,maxHeight:P,multipleSelect:y,showChip:D,placeholder:g,searchPlaceholder:L,selectedOptImgSrc:V,closeOnSelect:k,activeList:b,document:document.getElementById("bit-grid-layout").contentDocument,window:B,attributes:{"opt-lbl-wrp":gt(t,"opt-lbl-wrp"),"opt-icn":gt(t,"opt-icn"),"opt-lbl":gt(t,"opt-lbl"),"opt-prefix":gt(t,"opt-prefix"),"chip-wrp":gt(t,"chip-wrp"),"chip-lbl":gt(t,"chip-lbl"),"chip-icn":gt(t,"chip-icn"),"chip-clear-btn":gt(t,"chip-clear-btn")},classNames:{"opt-lbl-wrp":S(t,"opt-lbl-wrp"),"opt-icn":S(t,"opt-icn"),"opt-lbl":S(t,"opt-lbl"),"opt-prefix":S(t,"opt-prefix")}};B.observeElm||(B.observeElm=Lu),d.current=new iS(h,X)},[f,h]);const C=E.reduce((w,x)=>{const[R,O]=Object.entries(x)[0];return A(_({},w),{[R]:O})},{});return p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:s}),p.jsx(Ut,{formID:e,fieldKey:t,fieldData:i,children:p.jsx("div",{className:`${t}-dpd-fld-container ${S(t,"dpd-fld-container")}`,children:p.jsxs("div",A(_({"data-dev-dpd-fld-wrp":t,className:`${t}-dpd-fld-wrp ${S(t,"dpd-fld-wrp")} ${f.valid.disabled?"disabled":""} ${f.valid.readonly?"readonly":""}`,ref:c},M(t,"dpd-fld-wrp")),{children:[p.jsx("input",_(_({"data-testid":`${t}-dpd-hdn-inp`,name:t,type:"hidden",className:`${t}-dpd-hidden-input ${S(t,"dpd-hidden-input")}`},"disabled"in f.valid&&{disabled:f.valid.disabled}),"readonly"in f.valid&&{readOnly:f.valid.readonly})),p.jsxs("div",A(_({"data-testid":`${t}-dpd-wrp`,"data-dev-dpd-wrp":t,className:`${t}-dpd-wrp ${S(t,"dpd-wrp")}`,role:"combobox","aria-controls":"","aria-live":"assertive","aria-expanded":"false",tabIndex:"0","aria-label":"Dropdown"},M(t,"dpd-wrp")),{children:[p.jsxs("div",{"data-testid":`${t}-slctd-opt-wrp`,className:`${t}-selected-opt-wrp ${S(t,"selected-opt-wrp")}`,children:[f.config.selectedOptImage&&p.jsx("img",_({"data-testid":`${t}-slctd-opt-img`,"data-dev-selected-opt-img":t,className:`${t}-selected-opt-img placeholder-img ${S(t,"selected-opt-img")}`,"aria-hidden":"true",alt:"selected option icon",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>"},M(t,"selected-opt-img"))),p.jsx("span",A(_({"data-testid":`${t}-slctd-opt-lbl`,"aria-label":"Selected Option Label","data-dev-selected-opt-lbl":t,className:`${t}-selected-opt-lbl ${f.config.multipleSelect&&f.config.showChip?"multi-chip":""} ${S(t,"selected-opt-lbl")}`},M(t,"selected-opt-lbl")),{children:g}))]}),p.jsxs("div",{"data-testid":`${t}-dpd-btn-wrp`,className:`${t}-dpd-btn-wrp ${S(t,"dpd-btn-wrp")}`,children:[p.jsx("button",A(_({"data-testid":`${t}-slctd-opt-clr-btn`,type:"button","aria-label":"Clear selected option value","data-dev-selected-opt-clear-btn":t,className:`${t}-selected-opt-clear-btn ${S(t,"selected-opt-clear-btn")}`},M(t,"selected-opt-clear-btn")),{children:p.jsxs("svg",{width:"15",height:"15",role:"img",title:"Cross icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),p.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})),p.jsx("div",{className:`${t}-dpd-down-btn ${S(t,"dpd-down-btn")}`,children:p.jsx("svg",{width:"15",height:"15",viewBox:"0 0 24 24",title:"Down icon",role:"img",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("polyline",{points:"6 9 12 15 18 9"})})})]})]})),p.jsx("div",A(_({className:`${t}-option-wrp ${S(t,"option-wrp")}`,"data-dev-option-wrp":t},M(t,"option-search-wrp")),{children:p.jsxs("div",{className:`${t}-option-inner-wrp ${S(t,"option-inner-wrp")}`,children:[p.jsxs("div",{"data-dev-option-search-wrp":t,className:`${t}-option-search-wrp ${S(t,"option-search-wrp")}`,children:[p.jsx("input",_({"data-testid":`${t}-opt-srch-inp`,type:"search","data-dev-opt-search-input":t,className:`${t}-opt-search-input ${S(t,"opt-search-input")}`,placeholder:"Search Country","aria-label":"Search Options","aria-hidden":"true",tabIndex:"-1"},M(t,"opt-search-input"))),p.jsxs("svg",A(_({"data-dev-opt-search-icn":t,className:`${t}-icn ${t}-opt-search-icn ${S(t,"opt-search-icn")}`,"aria-hidden":"true",width:"18",height:"18",role:"img",title:"Search icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},M(t,"opt-search-icn")),{children:[p.jsx("circle",{cx:"11",cy:"11",r:"8"}),p.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})),p.jsx("button",A(_({"data-testid":`${t}-srch-clr-btn`,type:"button","aria-label":"Clear search","data-dev-search-clear-btn":t,className:`${t}-icn ${t}-search-clear-btn ${S(t,"search-clear-btn")}`,tabIndex:"-1"},M(t,"search-clear-btn")),{children:p.jsxs("svg",{width:"13",height:"13",role:"img",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),p.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]}),Object.entries(C).map(([w,x],R)=>p.jsxs("ul",A(_({className:`${t}-option-list ${S(t,"option-list")}`,"aria-hidden":"true","aria-label":"Option List","data-list":w,"data-list-index":R,"data-dev-option-list":t,tabIndex:"-1",role:"listbox"},M(t,"option-list")),{children:[v&&p.jsxs("li",A(_({"data-testid":`${t}-opt-${R}`,"data-dev-option":t,"data-index":R,"data-value":"create-opt",className:"option create-opt",role:"option","aria-selected":"false",tabIndex:"-1"},M(t,"option")),{style:{display:"none"},children:[p.jsx("span",A(_({"data-dev-opt-lbl-wrp":t,className:`opt-lbl-wrp ${S(t,"opt-lbl-wrp")}`},M(t,"opt-lbl-wrp")),{children:p.jsx("span",{"data-dev-opt-lbl":t,className:"opt-lbl",children:"Create: "})})),p.jsx("span",{className:"opt-prefix"})]}),`option-${w}`),p.jsx(eb,{opts:x,fieldKey:t,optionIcon:I})]}),w)),p.jsx("ul",_({className:`${t}-option-list ${S(t,"option-list")} active-list`,"aria-hidden":"true","aria-label":"Option List","data-dev-option-list":t,tabIndex:"-1",role:"listbox"},M(t,"option-list")))]})}))]}))})})]})}var rS=j.memo(nS);const eb=({opts:t,fieldKey:e,optionIcon:s,isGroupChild:i})=>p.jsx(p.Fragment,{children:t.map((n,a)=>n.type==="group"?p.jsxs(j.Fragment,{children:[p.jsx("li",A(_({"data-testid":`${e}-opt-${a}`,"data-index":a,className:`option opt-group-title ${S(e,"opt-group-title")}`},M(e,"opt-group-title")),{children:p.jsx("span",{className:"opt-lbl",children:n.title})}),`option-grp-ttl-${n.title}`),p.jsx(eb,{opts:n.childs,fieldKey:e,optionIcon:s,isGroupChild:!0})]},n.title):p.jsxs("li",A(_({"data-testid":`${e}-opt-${a}`,"data-dev-option":e,"data-index":a,"data-value":n.val||n.lbl,className:`option ${i?`opt-group-child ${S(e,"option-group-child")}`:""}`,role:"option","aria-selected":"false",tabIndex:"-1"},M(e,"option")),{children:[p.jsxs("span",A(_({"data-dev-opt-lbl-wrp":e,className:`opt-lbl-wrp ${S(e,"opt-lbl-wrp")}`},M(e,"opt-lbl-wrp")),{children:[s&&p.jsx("img",{className:`opt-icn ${S(e,"opt-icn")}`,src:(n==null?void 0:n.img)||"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>",alt:"BD",loading:"lazy"}),p.jsx("span",{"data-dev-opt-lbl":e,className:"opt-lbl",children:n.lbl})]})),p.jsx("span",{className:"opt-prefix"})]}),`option-${n.val||n.lbl}}`))});var Sr,vd,zl,bi,Ua,Td,Ii,Gt,_i,Ze,Wl,Va,xd,ys,Ct,Pe,Zs,Mn,Qt,Sd,sb,Rd,ib,Cd,nb,za,lh,Wa,ch,Hl,Np,Od,rb,yd,cs,Bs,Ld,ab,ql,Pp,De,is,Ad,ob,Rr,No,ne,_e,Ha,hh,Wi,nr,wi,fn,Ls,ri,As,ai,Md,lb,$d,cb,Nd,hb;class aS{constructor(e,s){m(this,Sd);m(this,Rd);m(this,Cd);m(this,za);m(this,Wa);m(this,Hl);m(this,Od);m(this,cs);m(this,Ld);m(this,ql);m(this,De);m(this,Ad);m(this,Rr);m(this,ne);m(this,Ha);m(this,Wi);m(this,wi);m(this,Ls);m(this,As);m(this,Md);m(this,$d);m(this,Nd);m(this,Sr,null);m(this,vd,null);m(this,zl,null);m(this,bi,null);m(this,Ua,null);m(this,Td,null);m(this,Ii,null);m(this,Gt,null);m(this,_i,null);m(this,Ze,{});m(this,Wl,[]);m(this,Va,null);m(this,xd,{});m(this,ys,{});m(this,Ct,{});m(this,Pe,"");m(this,Zs,"");m(this,Mn,[]);m(this,Qt,{id:"upload",name:"upload",required:!0,multiple:!1,maxSize:0,sizeUnit:"KB",isItTotalMax:!1,showMaxSize:!0,showSelectStatus:!0,fileSelectStatus:"No Choosen File",allowedFileType:"",showFileList:!0,showFilePreview:!0,showFileSize:!0,accept:".pdf,.exe,.msi",duplicateAllow:!1,capture:"",minFile:0,maxFile:0,onchange:()=>{console.log("Hellow World")},oninput:()=>{}});m(this,yd,e=>{const s=e.target.getAttribute("data-file-id");l(this,ql,Pp).call(this,`#file-wrp-${s}`),delete r(this,Ze)[s];const i=Object.keys(r(this,Ze)).length;i?r(this,bi).innerText=`${i} file${i>1?"s":""} selected`:(r(this,bi).innerHTML=r(this,Qt).fileSelectStatus,l(this,Wa,ch).call(this)),l(this,Hl,Np).call(this)});Object.assign(r(this,Qt),s),T(this,Va,s.document?s.document:document),T(this,xd,s.window?s.window:window),T(this,ys,s.attributes||{}),T(this,Ct,s.classNames||{}),typeof e=="string"?T(this,Sr,r(this,Va).querySelector(e)):T(this,Sr,e),T(this,Pe,r(this,Qt).fieldKey),this.fieldKey=r(this,Pe),T(this,Zs,s.assetsURL||""),this.init()}init(){var h;T(this,vd,l(this,cs,Bs).call(this,`.${r(this,Pe)}-label`)),T(this,zl,l(this,cs,Bs).call(this,`.${r(this,Pe)}-inp-btn`)),T(this,bi,l(this,cs,Bs).call(this,`.${r(this,Pe)}-file-select-status`)),T(this,Ua,l(this,cs,Bs).call(this,`.${r(this,Pe)}-file-input-wrpr`)),T(this,Td,l(this,cs,Bs).call(this,`.${r(this,Pe)}-max-size-lbl`)),T(this,Ii,l(this,cs,Bs).call(this,`.${r(this,Pe)}-file-upload-input`)),T(this,_i,l(this,cs,Bs).call(this,`.${r(this,Pe)}-file-input-wrpr .err-wrp`));const{multiple:e,allowedFileType:s,accept:i,showSelectStatus:n,fileSelectStatus:a,oldFiles:o}=r(this,Qt);r(this,Ii).multiple=e,r(this,Ii).accept=s?`${s}, ${i}`:i,n?r(this,bi).innerHTML=a:(h=r(this,bi))==null||h.remove(),T(this,Ze,{}),l(this,Wa,ch).call(this),o&&l(this,Sd,sb).call(this,o),l(this,Rr,No).call(this,r(this,Ii),"change",c=>l(this,Cd,nb).call(this,c)),l(this,Rr,No).call(this,r(this,zl),"click",()=>r(this,Ii).click())}destroy(){r(this,Gt)&&(r(this,Gt).innerHTML=""),l(this,Nd,hb).call(this)}reset(){this.destroy(),this.init()}}Sr=new WeakMap,vd=new WeakMap,zl=new WeakMap,bi=new WeakMap,Ua=new WeakMap,Td=new WeakMap,Ii=new WeakMap,Gt=new WeakMap,_i=new WeakMap,Ze=new WeakMap,Wl=new WeakMap,Va=new WeakMap,xd=new WeakMap,ys=new WeakMap,Ct=new WeakMap,Pe=new WeakMap,Zs=new WeakMap,Mn=new WeakMap,Qt=new WeakMap,Sd=new WeakSet,sb=function(e){const s=JSON.parse(e);T(this,Mn,JSON.parse(e)),r(this,Gt)||l(this,za,lh).call(this),s.forEach(n=>{l(this,Rd,ib).call(this,n)});const i=l(this,De,is).call(this,"input");i.type="hidden",i.name=`${r(this,Pe)}_old`,i.value=r(this,Mn).toString(),r(this,Ua).appendChild(i)},Rd=new WeakSet,ib=function(e){const s=l(this,De,is).call(this,"div"),i=e.replace(/( |\.|\(|\))/g,"");if(s.id=`file-wrp-${i}`,l(this,ne,_e).call(this,s,"file-wrpr"),"file-wrpr"in r(this,Ct)){const h=r(this,Ct)["file-wrpr"];h&&l(this,Ls,ri).call(this,s,h)}if("file-wrpr"in r(this,ys)){const h=r(this,ys)["file-wrpr"];l(this,As,ai).call(this,s,h)}const n=l(this,De,is).call(this,"div");l(this,ne,_e).call(this,n,"file-details");const a=l(this,De,is).call(this,"a");if(l(this,ne,_e).call(this,a,"file-title"),"file-title"in r(this,Ct)){const h=r(this,Ct)["file-title"];h&&l(this,Ls,ri).call(this,a,h)}if("file-title"in r(this,Qt).attributes){const h=r(this,Qt).attributes["file-title"];l(this,As,ai).call(this,a,h)}l(this,wi,fn).call(this,a,"target","_blank"),l(this,wi,fn).call(this,a,"href",`${r(this,Qt).baseDLURL}&fileID=${e}`),l(this,Wi,nr).call(this,a,e),n.append(a),s.append(n);const o=l(this,De,is).call(this,"button");if(l(this,ne,_e).call(this,o,"cross-btn"),"cross-btn"in r(this,Ct)){const h=r(this,Ct)["cross-btn"];h&&l(this,Ls,ri).call(this,o,h)}if(l(this,wi,fn).call(this,o,"data-file-id",i),l(this,wi,fn).call(this,o,"data-file-name",e),l(this,wi,fn).call(this,o,"type","button"),"cross-btn"in r(this,Qt).attributes){const h=r(this,Qt).attributes["cross-btn"];l(this,As,ai).call(this,o,h)}l(this,Wi,nr).call(this,o,"Ã—"),l(this,Rr,No).call(this,o,"click",h=>l(this,Od,rb).call(this,h)),s.append(o),r(this,Gt).appendChild(s)},Cd=new WeakSet,nb=function(e){const{files:s}=r(this,Ii),{sizeUnit:i,allowMaxSize:n,maxSize:a,maxSizeErrMsg:o,isItTotalMax:h,multiple:c,showFileList:d,fileExistMsg:u,showFilePreview:f,showFileSize:E,showSelectStatus:g,fileSelectStatus:b,minFile:I,minFileErrMsg:v,maxFile:C,maxFileErrMsg:w}=r(this,Qt),x=l(this,$d,cb).call(this,i,a);let R=0;const O=[];l(this,Ha,hh).call(this,r(this,_i),"active"),h&&Object.values(r(this,Ze)).forEach(P=>{R+=P.size}),!c&&s.length>0&&(T(this,Ze,{}),r(this,Gt)&&l(this,Wi,nr).call(this,r(this,Gt),""));for(let P=0;P<s.length;P+=1){const y=s[P],D=y.name.replace(/( |\.|\(|\))/g,"");if(r(this,Ze)[D])O.push(u);else if(!n||!a||y.size+R<=x)if(!(C>0)||Object.keys(r(this,Ze)).length<C){if(r(this,Ze)[D]=y,d){r(this,Gt)||l(this,za,lh).call(this);const V=l(this,De,is).call(this,"div");if(V.id=`file-wrp-${D}`,l(this,ne,_e).call(this,V,"file-wrpr"),"file-wrpr"in r(this,Ct)){const N=r(this,Ct)["file-wrpr"];N&&l(this,Ls,ri).call(this,V,N)}if("file-wrpr"in r(this,ys)){const N=r(this,ys)["file-wrpr"];l(this,As,ai).call(this,V,N)}if(f){const N=l(this,De,is).call(this,"img");if(N.src=l(this,Ad,ob).call(this,y),N.alt="Image Uploaded",l(this,ne,_e).call(this,N,"file-preview"),"file-preview"in r(this,Ct)){const W=r(this,Ct)["file-preview"];W&&l(this,Ls,ri).call(this,N,W)}if("file-preview"in r(this,ys)){const W=r(this,ys)["file-preview"];l(this,As,ai).call(this,N,W)}V.append(N)}const k=l(this,De,is).call(this,"div");l(this,ne,_e).call(this,k,"file-details");const B=l(this,De,is).call(this,"span");if(l(this,ne,_e).call(this,B,"file-title"),"file-title"in r(this,Ct)){const N=r(this,Ct)["file-title"];N&&l(this,Ls,ri).call(this,B,N)}if("file-title"in r(this,Qt).attributes){const N=r(this,Qt).attributes["file-title"];l(this,As,ai).call(this,B,N)}if(l(this,Wi,nr).call(this,B,y.name),k.append(B),E){const N=l(this,De,is).call(this,"span");if(l(this,ne,_e).call(this,N,"file-size"),"file-size"in r(this,Ct)){const W=r(this,Ct)["file-size"];W&&l(this,Ls,ri).call(this,N,W)}if("file-size"in r(this,Qt).attributes){const W=r(this,Qt).attributes["file-size"];l(this,As,ai).call(this,N,W)}l(this,Wi,nr).call(this,N,l(this,Md,lb).call(this,y.size)),k.append(N)}V.append(k);const X=l(this,De,is).call(this,"button");if(l(this,ne,_e).call(this,X,"cross-btn"),"cross-btn"in r(this,Ct)){const N=r(this,Ct)["cross-btn"];N&&l(this,Ls,ri).call(this,X,N)}if(l(this,wi,fn).call(this,X,"data-file-id",D),"cross-btn"in r(this,Qt).attributes){const N=r(this,Qt).attributes["cross-btn"];l(this,As,ai).call(this,X,N)}l(this,Wi,nr).call(this,X,"Ã—"),V.append(X),r(this,Gt).append(V)}h&&(R+=y.size)}else r(this,_i).innerHTML=w,l(this,ne,_e).call(this,r(this,_i),"active"),setTimeout(()=>{l(this,Ha,hh).call(this,r(this,_i),"active")},3e3);else O.push(o)}l(this,Ld,ab).call(this,`.${r(this,Pe)}-file-input-wrpr .cross-btn`).forEach(P=>{l(this,Rr,No).call(this,P,"click",y=>r(this,yd).call(this,y))});const L=Object.keys(r(this,Ze)).length;l(this,Hl,Np).call(this),L&&g?r(this,bi).innerText=`${L} file${L>1?"s":""} selected`:g&&(r(this,bi).innerHTML=b),I>0&&L<I&&(r(this,_i).innerHTML=v,l(this,ne,_e).call(this,r(this,_i),"active")),!r(this,Gt)&&O.length>0&&l(this,za,lh).call(this),O.map((P,y)=>{r(this,Gt).insertAdjacentHTML("afterbegin",`
      <div id='err-${y}' class="err-wrp">
          ${P}
      </div>`);const D=l(this,cs,Bs).call(this,`#err-${y}`);l(this,ne,_e).call(this,D,"active"),setTimeout(()=>{l(this,Ha,hh).call(this,D,"active")},3e3),setTimeout(()=>{D==null||D.remove(),Object.keys(r(this,Ze)).length||l(this,Wa,ch).call(this)},5e3)})},za=new WeakSet,lh=function(){if(T(this,Gt,l(this,De,is).call(this,"div")),l(this,ne,_e).call(this,r(this,Gt),"files-list"),"files-list"in r(this,Ct)){const e=r(this,Ct)["files-list"];e&&l(this,Ls,ri).call(this,r(this,Gt),e)}if("files-list"in r(this,ys)){const e=r(this,ys)["files-list"];l(this,As,ai).call(this,r(this,Gt),e)}r(this,Ua).append(r(this,Gt))},Wa=new WeakSet,ch=function(){var e;(e=r(this,Gt))==null||e.remove(),T(this,Gt,null)},Hl=new WeakSet,Np=function(){var s;const e=new DataTransfer;(s=Object.values(r(this,Ze)))==null||s.forEach(i=>{e.items.add(i)}),r(this,Ii).files=e.files},Od=new WeakSet,rb=function(e){const s=e.target.getAttribute("data-file-id"),i=e.target.getAttribute("data-file-name");l(this,ql,Pp).call(this,`#file-wrp-${s}`),T(this,Mn,r(this,Mn).filter(n=>n!==i)),l(this,cs,Bs).call(this,`input[name="${r(this,Pe)}_old"]`).value=r(this,Mn).toString()},yd=new WeakMap,cs=new WeakSet,Bs=function(e){return r(this,Sr).querySelector(e)},Ld=new WeakSet,ab=function(e){return r(this,Sr).querySelectorAll(e)},ql=new WeakSet,Pp=function(e){var s;(s=l(this,cs,Bs).call(this,e))==null||s.remove()},De=new WeakSet,is=function(e){return r(this,Va).createElement(e)},Ad=new WeakSet,ob=function(e){switch(e.name.substring(e.name.lastIndexOf(".")+1)){case"xbm":case"tif":case"pjp":case"pjpeg":case"svgz":case"jpg":case"jpeg":case"ico":case"tiff":case"gif":case"svg":case"bmp":case"png":case"jfif":case"webp":return URL.createObjectURL(e);case"7z":case"arj":case"deb":case"pkg":case"rar":case".rpm":case".gz":case"z":case"zip":return`${r(this,Zs)}/zip-compressed.svg`;case"key":case"odp":case"pps":case"ppt":case"pptx":return`${r(this,Zs)}/presentation.svg`;case"_RF_":case"doc":case"docx":case"odt":case"pdf":case"rtf":case"tex":case"txt":case"wks":case"wps":case"wpd":return`${r(this,Zs)}/document.svg`;case"csv":case"dat":case"db":case"dbf":case"log":case"mdb":case"sav":case"sql":case"tar":case"sqlite":case"xml":return`${r(this,Zs)}/database.svg`;case"opus":case"flac":case"webm":case"weba":case"wav":case"ogg":case"m4a":case"mp3":case"oga":case"mid":case"amr":case"aiff":case"wma":case"au":case"acc":case"wpl":return`${r(this,Zs)}/file-audio.svg`;case"ogm":case"wmv":case"mpg":case"ogv":case"mov":case"asx":case"mpeg":case"mp4":case"m4v":case"avi":case"3gp":case"flv":case"mkv":case"swf":return`${r(this,Zs)}/file-audio.svg`;default:return`${r(this,Zs)}/paperclip.svg`}},Rr=new WeakSet,No=function(e,s,i){e.addEventListener(s,i),r(this,Wl).push({element:e,eventType:s,eventAction:i})},ne=new WeakSet,_e=function(e,s){e.classList.add(s)},Ha=new WeakSet,hh=function(e,s){e.classList.remove(s)},Wi=new WeakSet,nr=function(e,s){e.textContent=s},wi=new WeakSet,fn=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},Ls=new WeakSet,ri=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,ne,_e).call(this,e,i))},As=new WeakSet,ai=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,wi,fn).call(this,e,s[n].key,s[n].value)},Md=new WeakSet,lb=function(e){if(e<1024)return`${e}Bytes`;if(e>=1024&&e<1048576)return`${(e/1024).toFixed(1)}KB`;if(e>=1048576&&e<1073741824)return`${(e/1048576).toFixed(1)}MB`;if(e>=1073741824)return`${(e/1073741824).toFixed(1)}GB`},$d=new WeakSet,cb=function(e,s){switch(e){case"Bytes":return s;case"KB":return s*1024;case"MB":return s*1048576;case"GB":return s*1073741824;default:return 0}},Nd=new WeakSet,hb=function(){r(this,Wl).forEach(({element:e,eventType:s,eventAction:i})=>{e.removeEventListener(s,i)})};function oS({fieldKey:t,formID:e,styleClasses:s}){const i=j.useRef(null),n=j.useRef(null),o=et(oe)[t],h=et(Cc);return j.useEffect(()=>{var X,N,W,F,$,G,U,H,Y,ot,rt,lt,bt,J;i!=null&&i.current||(i.current=yt(`.${t}-file-up-wrpr`));const c=n.current,d=i.current;c&&d&&"destroy"in c&&c.destroy();const{multiple:u,allowMaxSize:f,showMaxSize:E,maxSizeLabel:g,maxSize:b,sizeUnit:I,isItTotalMax:v,showSelectStatus:C,fileSelectStatus:w,allowedFileType:x,showFileList:R,fileExistMsg:O,showFilePreview:L,showFileSize:P,duplicateAllow:y,accept:D,minFile:V,maxFile:k}=o.config,B={fieldKey:t,multiple:u,allowMaxSize:f,maxSizeErrMsg:((N=(X=o==null?void 0:o.err)==null?void 0:X.maxSize)==null?void 0:N.msg)||((F=(W=o==null?void 0:o.err)==null?void 0:W.maxSize)==null?void 0:F.dflt),showMaxSize:E,maxSizeLabel:g,maxSize:b,sizeUnit:I,isItTotalMax:v,showSelectStatus:C,fileSelectStatus:w,allowedFileType:x,showFileList:R,fileExistMsg:O,showFilePreview:L,showFileSize:P,duplicateAllow:y,accept:D,minFile:V,minFileErrMsg:((G=($=o==null?void 0:o.err)==null?void 0:$.minFile)==null?void 0:G.msg)||((H=(U=o==null?void 0:o.err)==null?void 0:U.minFile)==null?void 0:H.dflt),maxFile:k,maxFileErrMsg:((ot=(Y=o==null?void 0:o.err)==null?void 0:Y.maxFile)==null?void 0:ot.msg)||((lt=(rt=o==null?void 0:o.err)==null?void 0:rt.maxFile)==null?void 0:lt.dflt),assetsURL:`${h.assetsURL}/../static/file-upload/`,document:(bt=document.getElementById("bit-grid-layout"))==null?void 0:bt.contentDocument,window:(J=document.getElementById("bit-grid-layout"))==null?void 0:J.contentWindow,attributes:{"files-list":gt(t,"files-list"),"file-wrpr":gt(t,"file-wrpr"),"file-preview":gt(t,"file-preview"),"file-title":gt(t,"file-title"),"file-size":gt(t,"file-size"),"cross-btn":gt(t,"cross-btn")},classNames:{"files-list":S(t,"files-list"),"file-wrpr":S(t,"file-wrpr"),"file-preview":S(t,"file-preview"),"file-title":S(t,"file-title"),"file-size":S(t,"file-size"),"cross-btn":S(t,"cross-btn")}};n.current=new aS(d,B)},[o]),p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:s}),p.jsx(Ut,{formID:e,fieldKey:t,fieldData:o,children:p.jsx("div",{className:`${t}-file-up-container ${S(t,"file-up-container")}`,children:p.jsx("div",A(_({"data-dev-file-up-wrpr":t,className:`${t}-file-up-wrpr ${o.valid.disabled?"disabled":""} ${o.valid.readonly?"readonly":""} ${S(t,"file-up-wrpr")}`,ref:i},M(t,"file-up-wrpr")),{children:p.jsxs("div",A(_({"data-dev-file-input-wrpr":t,"data-inp-wrp":!0,className:`${t}-file-input-wrpr ${S(t,"file-input-wrpr")}`},M(t,"file-input-wrpr")),{children:[p.jsxs("div",A(_({"data-dev-btn-wrpr":t,className:`${t}-btn-wrpr ${S(t,"btn-wrpr")}`},M(t,"btn-wrpr")),{children:[p.jsxs("button",A(_({"data-testid":`${t}-inp-btn`,"data-dev-inp-btn":t,type:"button",className:`${t}-inp-btn ${S(t,"inp-btn")}`},M(t,"inp-btn")),{children:[o.prefixIcn&&p.jsx("img",_({"data-dev-pre-i":t,className:`${t}-pre-i ${S(t,"pre-i")}`,src:`${o.prefixIcn}`,alt:"Upload icon",srcSet:""},M(t,"pre-i"))),p.jsx("span",A(_({"data-dev-btn-txt":t,className:`${t}-btn-txt ${S(t,"btn-txt")}`},M(t,"btn-txt")),{children:o.btnTxt})),o.suffixIcn&&p.jsx("img",_({"data-dev-suf-i":t,className:`${t}-suf-i ${S(t,"suf-i")}`,src:`${o.suffixIcn}`,alt:"Upload icon",srcSet:""},M(t,"suf-i")))]})),o.config.showSelectStatus&&p.jsx("div",A(_({"data-dev-file-select-status":t,className:`${t}-file-select-status ${S(t,"file-select-status")}`},M(t,"file-select-status")),{children:"No Choosen File"})),o.config.allowMaxSize&&o.config.showMaxSize&&o.config.maxSize!==0&&p.jsx("small",A(_({"data-dev-max-size-lbl":t,className:`${t}-max-size-lbl ${S(t,"max-size-lbl")}`},M(t,"max-size-lbl")),{children:o.config.maxSizeLabel||`(Max ${o.config.maxSize}${o.config.sizeUnit})`})),p.jsx("input",A(_(_(_(_({"data-testid":`${t}-fil-upld-inp`,type:"file",className:`${t}-file-upload-input ${S(t,"file-upload-input")}`,id:t,name:"file-upload"},"req"in o.valid&&{required:o.valid.req}),"disabled"in o.valid&&{disabled:o.valid.disabled}),"readonly"in o.valid&&{readOnly:o.valid.readonly}),M(t,"file-upload-input")),{"aria-disabled":!0,tabIndex:-1}))]})),p.jsx("div",_({className:`err-wrp ${S(t,"err-wrp")}`},M(t,"err-wrp")))]}))}))})})]})}function lS({attr:t}){return p.jsxs("div",{className:"fld-wrp drag","btcd-fld":"text-fld",children:["lbl"in t&&p.jsx("label",{className:"fld-lbl",children:t.lbl}),p.jsx("input",_(_(_(_(_(_(_(_({className:"fld no-drg",type:t.typ},"req"in t.valid&&{required:t.valid.req}),"ph"in t&&{placeholder:t.ph}),"mn"in t&&{min:t.mn}),"mx"in t&&{max:t.mx}),"val"in t&&{defaultValue:t.val}),"val"in t&&"userinput"in t&&t.userinput&&{value:t.val}),"ac"in t&&{autoComplete:t.ac}),"name"in t&&{name:t.name}))]})}function cS({fieldKey:t,attr:e,styleClasses:s}){var a,o;const{styleMode:i}=et(cn),n=((a=e.valid)==null?void 0:a.hide)||!1;return p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:s}),p.jsx("div",A(_({"data-dev-fld-wrp":t,className:`${t}-fld-wrp ${i?"":"drag"} ${S(t,"fld-wrp")} ${n?"fld-hide":""}`},M(t,"fld-wrp")),{children:p.jsx(ms,{html:e.content||((o=e==null?void 0:e.info)==null?void 0:o.content)})}))]})}function hS({fieldKey:t,formID:e,styleClasses:s}){const n=et(oe)[t];return p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:s}),p.jsx(Ut,{formID:e,fieldKey:t,fieldData:n,children:p.jsxs("select",A(_(_(_(_({"data-testid":t,"data-dev-fld":t,id:t,className:`${t}-fld ${S(t,"fld")} no-drg ${n.readonly?"readonly":""}`},"disabled"in n.valid&&{disabled:n.valid.disabled}),"readonly"in n.valid&&{readOnly:n.valid.readonly}),M(t,"fld")),"req"in n.valid&&{required:n.valid.req}),{children:[n.phHide&&p.jsx("option",A(_({"data-dev-slct-optn":t,className:`${t}-slct-optn ${S(t,"slct-optn")}`,value:""},M(t,"slct-optn")),{children:n.ph})),n.opt.map(a=>a.type?p.jsx("optgroup",A(_(_({"data-dev-slct-opt-grp":t,className:`${t}-slct-opt-grp ${S(t,"slct-opt-grp")}`,label:a.title},a.disabled&&{disabled:a.disabled}),_({},M(t,"slct-opt-grp"))),{children:a.childs.map(o=>p.jsx("option",A(_(_({"data-dev-slct-optn":t,className:`${t}-slct-optn ${S(t,"slct-optn")}`,value:o.val,selected:o.check},o.disabled&&{disabled:o.disabled}),_({},M(t,"slct-optn"))),{children:o.lbl}),o.val||o.lbl))}),a.title):p.jsx("option",A(_(_({"data-dev-slct-optn":t,className:`${t}-slct-optn ${S(t,"slct-optn")}`,value:a.val,selected:a.check},a.disabled&&{disabled:a.disabled}),_({},M(t,"slct-optn"))),{children:a.lbl}),a.val||a.lbl))]}))})]})}const Vc=(t,e)=>`https://fakeimg.pl/${t}x${e}/?text=${t} x ${e}`;function dS({fieldKey:t,attr:e,styleClasses:s}){var I,v,C,w;const i=j.useRef(),n=j.useRef({extarnalSource:Vc(100,40)}),a=et(mo),o=et(fo),{styleMode:h}=et(cn),c=an(wu),d=((I=e.valid.hidden)==null?void 0:I.includes(o))||!1,u=kr(s),f=an(oe),{width:E,height:g}=e,b=x=>`fields->${t}->classes->.${t}-fld-wrp->${x}`;return a.fieldKey===t&&(n.current.resize=!0,c(x=>Re(x,R=>{aa(R,b("max-height"),"")}))),n.current.resize&&!a.fieldKey&&(n.current.resize=!1,c(x=>Re(x,R=>{var O,L,P;aa(R,b("height"),`${(O=i==null?void 0:i.current)==null?void 0:O.parentElement.clientHeight}px`),aa(R,b("width"),`${(L=i==null?void 0:i.current)==null?void 0:L.parentElement.clientWidth}px`),aa(R,b("max-height"),`${(P=i==null?void 0:i.current)==null?void 0:P.parentElement.clientHeight}px`)})),f(x=>Re(x,R=>{var O,L;R[t].height=(O=i==null?void 0:i.current)==null?void 0:O.parentElement.clientHeight,R[t].width=(L=i==null?void 0:i.current)==null?void 0:L.parentElement.clientWidth})),n.current.extarnalSource=Vc((v=i==null?void 0:i.current)==null?void 0:v.parentElement.clientWidth,(C=i==null?void 0:i.current)==null?void 0:C.parentElement.clientHeight)),j.useEffect(()=>{var x,R;n.current.extarnalSource=Vc((x=i==null?void 0:i.current)==null?void 0:x.parentElement.clientWidth,(R=i==null?void 0:i.current)==null?void 0:R.parentElement.clientHeight),f(O=>Re(O,L=>{var P,y;L[t].height=(P=i==null?void 0:i.current)==null?void 0:P.parentElement.clientHeight,L[t].width=(y=i==null?void 0:i.current)==null?void 0:y.parentElement.clientWidth}))},[]),j.useEffect(()=>{n.current.extarnalSource=Vc(E,g)},[E,g]),p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:u}),p.jsx("div",A(_({"data-dev-fld-wrp":t,ref:i,className:`${t}-fld-wrp ${h?"":"drag"} ${d?"fld-hide":""} ${S(t,"fld-wrp")}`},M(t,"fld-wrp")),{children:p.jsx("img",A(_({"data-dev-img":t,className:`${t}-img ${S(t,"img")}`,src:(e==null?void 0:e.bg_img)||((w=n.current)==null?void 0:w.extarnalSource),alt:e==null?void 0:e.alt},M(t,"img")),{width:e==null?void 0:e.width,height:e==null?void 0:e.height,draggable:!1}))}))]})}var Cr,qa,$t,Hi,Or,Po,Yl,Dp,Ms,oi,Pd,db,Dd,ub,Fd,pb,Xl,Fp,Ya,dh,Gd,fb,Bd,mb;class uS{constructor(e,s){m(this,Or);m(this,Yl);m(this,Ms);m(this,Pd);m(this,Dd);m(this,Fd);m(this,Xl);m(this,Ya);m(this,Gd);m(this,Bd);m(this,Cr,"");m(this,qa,"");m(this,$t,{namespace:"paypal",payType:"payment",currency:"USD",amount:1,shipping:0,tax:0,style:{label:"paypal",color:"gold",shape:"rect",layout:"vertical"}});m(this,Hi,null);Object.assign(r(this,$t),s),typeof e=="string"?T(this,Cr,document.querySelector(e)):T(this,Cr,e),T(this,qa,`#form-${l(this,Ms,oi).call(this)}`),this.init()}init(){const{namespace:e}=r(this,$t),s=window[e],i={style:l(this,Bd,mb).call(this)};l(this,Yl,Dp).call(this)&&(i.fundingSource=s.FUNDING[r(this,$t).style.payBtn]),l(this,Or,Po).call(this)?i.createSubscription=(n,a)=>l(this,Pd,db).call(this,n,a):i.createOrder=(n,a)=>l(this,Gd,fb).call(this,n,a),i.onClick=(n,a)=>l(this,Dd,ub).call(this,a),i.onApprove=(n,a)=>l(this,Fd,pb).call(this,n,a),r(this,$t).onInit&&(i.onInit=r(this,$t).onInit),s&&s.Buttons(i).render(r(this,Cr))}destroy(){r(this,Cr).innerHTML=""}reset(){this.destroy(),this.init()}}Cr=new WeakMap,qa=new WeakMap,$t=new WeakMap,Hi=new WeakMap,Or=new WeakSet,Po=function(){return r(this,$t).payType==="subscription"},Yl=new WeakSet,Dp=function(){return r(this,$t).style.layout==="standalone"},Ms=new WeakSet,oi=function(){return r(this,$t).contentId},Pd=new WeakSet,db=function(e,s){if(typeof validateForm!="undefined"&&!validateForm({form:l(this,Ms,oi).call(this)}))throw new Error("form validation is failed!");return s.subscription.create({plan_id:r(this,$t).planId})},Dd=new WeakSet,ub=function(e){return Ac(this,null,function*(){const s=l(this,Ms,oi).call(this);try{yield isFormValidatedWithoutError(s)}catch(a){return e.reject()}const i=yield saveFormProgress(s),n=i==null?void 0:i[s];return n!=null&&n.success?(n.entry_id&&T(this,Hi,n.entry_id),e.resolve()):e.reject()})},Fd=new WeakSet,pb=function(e,s){const i=document.getElementById(`${l(this,Ms,oi).call(this)}`);i.classList.add("pos-rel","form-loading"),(l(this,Or,Po).call(this)?s.subscription.get():s.order.capture()).then(a=>{var d;const o=bf_globals[l(this,Ms,oi).call(this)],h=document.getElementById(`form-${l(this,Ms,oi).call(this)}`),c=(d=l(this,Ms,oi).call(this))==null?void 0:d.split("_")[1];if(typeof h!="undefined"&&h!==null){r(this,Hi)&&(o.entryId=r(this,Hi));const u=bfSelect(`input[name="${r(this,$t).fieldKey}"]`,h);u?u.value=a.id:setHiddenFld({name:r(this,$t).fieldKey,value:a.id,type:"text"},h);let f=bfSelect('button[type="submit"]',h);f||(f=document.createElement("button"),f.setAttribute("type","submit"),f.style.display="none",h.append(f)),f.click();const E={formID:c,transactionID:a.id,payment_name:"paypal",payment_type:l(this,Or,Po).call(this)?"subscription":"order",payment_response:a,entry_id:r(this,Hi),fieldKey:r(this,$t).fieldKey},g=new URL(o==null?void 0:o.ajaxURL);g.searchParams.append("_ajax_nonce",o==null?void 0:o.nonce),g.searchParams.append("action","bitforms_payment_insert"),fetch(g,{method:"POST",body:JSON.stringify(E)}).then(()=>{i.classList.remove("pos-rel","form-loading"),T(this,Hi,null)})}})},Xl=new WeakSet,Fp=function(e,s){var i;return(i=document.querySelector(s))==null?void 0:i.querySelector(e)},Ya=new WeakSet,dh=function(e){if(e){const s=window.bf_globals[l(this,Ms,oi).call(this)].fields[e].fieldName;let i=l(this,Xl,Fp).call(this,`[name="${s}"]`,r(this,qa));if(i&&i.type==="radio"&&(i=l(this,Xl,Fp).call(this,`[name="${s}"]:checked`,r(this,qa))),i&&i.value)return i.value}return""},Gd=new WeakSet,fb=function(e,s){var I;const{currency:i,amount:n,shipping:a,tax:o}=r(this,$t),h=l(this,Ya,dh).call(this,r(this,$t).amountFld)||n,c=l(this,Ya,dh).call(this,r(this,$t).shippingVal)||a,d=l(this,Ya,dh).call(this,r(this,$t).taxVal)||o,u=Number(h).toFixed(2)*1,f=Number(c).toFixed(2)*1,E=(Number(d)*u/100).toFixed(2)*1,g=(u+f+E).toFixed(2)*1,b=(I=l(this,Ms,oi).call(this))==null?void 0:I.split("_")[1];return s.order.create({purchase_units:[{description:`form-id:${b};entry-id:${r(this,Hi)};field-key:${r(this,$t).fieldKey}`,amount:{currency_code:i,value:g,breakdown:{item_total:{currency_code:i,value:u},shipping:{currency_code:i,value:f},tax_total:{currency_code:i,value:E}}}}]})},Bd=new WeakSet,mb=function(){const{label:e,color:s,shape:i,layout:n,height:a}=r(this,$t).style,o={label:l(this,Or,Po).call(this)?"subscribe":e,color:s,shape:i};return l(this,Yl,Dp).call(this)||(o.layout=n),a!==void 0&&(o.height=Number(a)),o};function pS({fieldKey:t,formID:e,attr:s,isBuilder:i,styleClasses:n}){const a=et(nf),[o,h]=j.useState(""),d=et(oe)[t],u=j.useRef(null),f=j.useRef(null),[E,g]=j.useState(!1),[b,I]=j.useState(!1),v=(d==null?void 0:d.payType)==="subscription",{locale:C,currency:w,disableFunding:x}=d||{};return j.useEffect(()=>{if(!s.payIntegID){h("");return}const R=a==null?void 0:a.find(O=>O.id&&s.payIntegID&&Number(O.id)===Number(s.payIntegID));if(R){const O=R.clientID;h(O)}},[s.payIntegID]),j.useEffect(()=>{if(!o){rf({fieldKey:t,errorKey:"paypalClientIdMissing",errorMsg:gn("PayPal Client ID is missing"),errorUrl:`field-settings/${t}`});return}I(!0),af(t,"paypalClientIdMissing");const R={"client-id":o};d!=null&&d.locale&&(R.locale=d.locale),d!=null&&d.disableFunding&&(R["disable-funding"]=d.disableFunding),v&&(R.intent="subscription",R.vault="true"),!v&&(d!=null&&d.currency)&&(R.currency=d.currency);const L={src:`https://www.paypal.com/sdk/js?${new URLSearchParams(R).toString()}`,integrity:"",id:`bf-paypal-script-${t}`,scriptInGrid:!1,attr:{"data-namespace":t},callback:()=>{Ot(t),g(!0),I(!1)}};return vu(L),()=>{of("bf-paypal-script")}},[o,C,w,x]),j.useEffect(()=>{if(!E||b)return;u!=null&&u.current||(u.current=yt(`#${t}-paypal-wrp`));const R=f.current,O=u.current;if((!o||R&&O&&"destroy"in R)&&(R.destroy(),Ot(t)),!o)return g(!1);const{style:L,currency:P}=d,y={namespace:t,style:L,currency:P,payType:"payment",shipping:0,tax:0,onInit:()=>{Ot(t)}};f.current=new uS(O,y)},[E,b]),p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:n}),p.jsxs(Ut,{formID:e,fieldData:s,fieldKey:t,noLabel:!0,noErrMsg:!0,isBuilder:i,children:[E&&o&&!b&&p.jsx("div",{className:`${t}-paypal-wrp`,children:p.jsx("div",{ref:u,id:`${t}-paypal-wrp`})}),!b&&(!E||!o)&&p.jsx("p",{children:"Select a config from field settings to render the PayPal."}),b&&p.jsx("p",{children:"Loading PayPal..."})]})]})}var Xa,kd,jd,Fe,hs,qi,$n,Zl,Za,Yi,Ud,Ge,Ql,Bt,vi,Nn,Jl,Qs,Qa,Xi,Kl,Q,Ja,tc,Ka,Zi,Ti,Vd,gb,Jt,he,Be,ns,zd,Eb,Wd,bb,Hd,Ib,qd,_b,to,uh,Yd,wb,yr,Do,eo,ph,ec,Gp,Xd,vb,Zd,Tb,sc,Bp,Qi,rr,ic,kp,Qd,xb,Jd,Sb,nc,jp,Kd,Lr,Fo,rc,Up,ac,Vp,Pn,Kr,Dn,ta,ds,ks,so,fh,Nt,Ht,Fn,ea,Gn,sa,Se,We,sf,mS,oc,zp,tu,Rb,lc,Wp,cc,Hp,eu,Cb,su,Ob,Bn,ia,iu,yb,hc,qp,nu,Lb;class fS{constructor(e,s){m(this,Vd);m(this,Jt);m(this,Be);m(this,zd);m(this,Wd);m(this,Hd);m(this,qd);m(this,to);m(this,Yd);m(this,yr);m(this,eo);m(this,ec);m(this,Xd);m(this,Zd);m(this,sc);m(this,Qi);m(this,ic);m(this,Qd);m(this,Jd);m(this,nc);m(this,Lr);m(this,rc);m(this,ac);m(this,Pn);m(this,Dn);m(this,ds);m(this,so);m(this,Nt);m(this,Fn);m(this,Gn);m(this,Se);m(this,sf);m(this,oc);m(this,tu);m(this,lc);m(this,cc);m(this,eu);m(this,su);m(this,Bn);m(this,iu);m(this,hc);m(this,nu);m(this,Xa,"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>");m(this,kd,"www.cloudflare.com/cdn-cgi/trace");m(this,jd,"api.geonames.org/countryCodeJSON?username=bitcodezoho1");m(this,Fe,null);m(this,hs,null);m(this,qi,null);m(this,$n,null);m(this,Zl,null);m(this,Za,null);m(this,Yi,null);m(this,Ud,null);m(this,Ge,null);m(this,Ql,null);m(this,Bt,null);m(this,vi,null);m(this,Nn,null);m(this,Jl,30);m(this,Qs,[]);m(this,Qa,{});m(this,Xi,!1);m(this,Kl,[]);m(this,Q,{maxHeight:370,detectCountryByIp:!1,detectCountryByGeo:!1,optionFlagImage:!0,searchCountryPlaceholder:"Search Country",noCountryFoundText:"No Country Found",searchClearable:!0,defaultCountryKey:"",attributes:{},classNames:{}});m(this,Ja,"");m(this,tc,null);m(this,Ka,"");m(this,Zi,null);m(this,Ti,null);m(this,Kd,e=>/[0-9]/.test(e));Object.assign(r(this,Q),s),T(this,Zi,s.document||document),T(this,Ti,s.window||window),T(this,Ja,s.assetsURL||""),typeof e=="string"?T(this,Fe,r(this,Zi).querySelector(e)):T(this,Fe,e),typeof r(this,Q).options=="string"&&(r(this,Q).options=l(this,Vd,gb).call(this,r(this,Q).options)),r(this,Q).options=r(this,Q).options.filter(i=>!i.hide),T(this,Qs,[...r(this,Q).options]),T(this,Qa,l(this,Xd,vb).call(this)),this.fieldKey=r(this,Q).fieldKey,this.init()}init(){T(this,Ql,l(this,Jt,he).call(this,`.${this.fieldKey}-phone-inner-wrp`)),T(this,Bt,l(this,Jt,he).call(this,`.${this.fieldKey}-phone-number-input`)),T(this,hs,l(this,Jt,he).call(this,`.${this.fieldKey}-phone-hidden-input`)),T(this,qi,l(this,Jt,he).call(this,`.${this.fieldKey}-input-clear-btn`)),T(this,Za,l(this,Jt,he).call(this,`.${this.fieldKey}-selected-country-img`)),T(this,Ud,l(this,Jt,he).call(this,`.${this.fieldKey}-option-search-wrp`)),T(this,Ge,l(this,Jt,he).call(this,`.${this.fieldKey}-opt-search-input`)),T(this,$n,l(this,Jt,he).call(this,`.${this.fieldKey}-dpd-wrp`)),T(this,Zl,l(this,Jt,he).call(this,`.${this.fieldKey}-option-wrp`)),T(this,vi,l(this,Jt,he).call(this,`.${this.fieldKey}-search-clear-btn`)),T(this,Nn,l(this,Jt,he).call(this,`.${this.fieldKey}-option-list`)),this.setMenu({open:!1}),l(this,Be,ns).call(this,r(this,Fe),"keydown",e=>{l(this,qd,_b).call(this,e)}),l(this,Be,ns).call(this,r(this,$n),"click",e=>{l(this,hc,qp).call(this,e)}),l(this,Be,ns).call(this,r(this,$n),"keyup",e=>{l(this,hc,qp).call(this,e)}),l(this,zd,Eb).call(this),r(this,Q).defaultCountryKey&&this.setSelectedCountryItem(r(this,Q).defaultCountryKey),l(this,Be,ns).call(this,r(this,Bt),"blur",e=>{l(this,Qd,xb).call(this)}),l(this,Be,ns).call(this,r(this,Bt),"input",e=>{l(this,Jd,Sb).call(this,e)}),l(this,Be,ns).call(this,r(this,Bt),"focusout",e=>{l(this,rc,Up).call(this,e)}),r(this,Q).selectedCountryClearable&&l(this,Be,ns).call(this,r(this,qi),"click",e=>{l(this,Yd,wb).call(this,e)}),r(this,Q).detectCountryByIp&&l(this,Wd,bb).call(this),r(this,Q).detectCountryByGeo&&l(this,Hd,Ib).call(this),r(this,Q).searchClearable&&(l(this,Se,We).call(this,r(this,Ge),"padding-right","35px"),l(this,Se,We).call(this,r(this,vi),"display","none"),l(this,Be,ns).call(this,r(this,vi),"click",()=>{this.searchOptions("")})),r(this,Ge).value="",l(this,Be,ns).call(this,r(this,Ge),"keyup",e=>{l(this,su,Ob).call(this,e)}),T(this,Xa,r(this,Q).placeholderImage?r(this,Q).placeholderImage:r(this,Xa)),r(this,Ti).observeElm(r(this,hs),"value",(e,s)=>{l(this,ic,kp).call(this,e,s)})}isValidated(){return l(this,rc,Up).call(this,{target:r(this,Bt)})}setSelectedCountryItem(e){if(this.value="",T(this,Yi,e),!r(this,Yi)){l(this,lc,Wp).call(this);return}const s=l(this,Pn,Kr).call(this);s&&(r(this,Q).selectedFlagImage&&(r(this,Za).src=`${r(this,Ja)}/${s.img}`),l(this,tu,Rb).call(this,s.code),this.setMenu({open:!1}),r(this,Xi)&&r(this,Bt).focus())}searchOptions(e){l(this,eu,Cb).call(this,e);let s=[];e?(s=r(this,Q).options.filter(i=>{const n=e.toLowerCase(),a=(i.lbl||"").toLowerCase(),o=(i.val||"").toLowerCase(),h=i.code||"";if(a.includes(n)||o.includes(n)||h.includes(n))return!0}),s.length||(s=[{i:0,lbl:r(this,Q).noCountryFoundText}]),T(this,Qs,s),r(this,Q).searchClearable&&l(this,Se,We).call(this,r(this,vi),"display","grid")):(T(this,Qs,r(this,Q).options),r(this,Q).searchClearable&&l(this,Se,We).call(this,r(this,vi),"display","none")),l(this,cc,Hp).call(this)}setMenu({open:e}){l(this,Se,We).call(this,r(this,Zl),"max-height",`${e?r(this,Q).maxHeight:0}px`),e?(l(this,iu,yb).call(this),l(this,ds,ks).call(this,r(this,Fe),"menu-open"),l(this,Be,ns).call(this,r(this,Zi),"click",s=>l(this,ec,Gp).call(this,s)),l(this,Nt,Ht).call(this,r(this,Ge),"tabindex",0),l(this,Nt,Ht).call(this,r(this,vi),"tabindex",0),l(this,Nt,Ht).call(this,r(this,$n),"aria-expanded",!0),l(this,cc,Hp).call(this)):(r(this,Fe).classList.remove("menu-open"),r(this,Zi).removeEventListener("click",l(this,ec,Gp)),setTimeout(()=>{this.searchOptions("")},100),l(this,Nt,Ht).call(this,r(this,Ge),"tabindex",-1),l(this,Nt,Ht).call(this,r(this,vi),"tabindex",-1),l(this,Nt,Ht).call(this,r(this,$n),"aria-expanded",!1))}set value(e){r(this,hs).value=e||"",l(this,Nt,Ht).call(this,r(this,hs),"value",e||"")}get value(){return r(this,hs).value}destroy(){r(this,Nn).innerHTML="",this.value="",T(this,Xi,!1),l(this,nu,Lb).call(this)}reset(e){l(this,lc,Wp).call(this),this.destroy(),this.value=e,this.init()}}Xa=new WeakMap,kd=new WeakMap,jd=new WeakMap,Fe=new WeakMap,hs=new WeakMap,qi=new WeakMap,$n=new WeakMap,Zl=new WeakMap,Za=new WeakMap,Yi=new WeakMap,Ud=new WeakMap,Ge=new WeakMap,Ql=new WeakMap,Bt=new WeakMap,vi=new WeakMap,Nn=new WeakMap,Jl=new WeakMap,Qs=new WeakMap,Qa=new WeakMap,Xi=new WeakMap,Kl=new WeakMap,Q=new WeakMap,Ja=new WeakMap,tc=new WeakMap,Ka=new WeakMap,Zi=new WeakMap,Ti=new WeakMap,Vd=new WeakSet,gb=function(e){const s=e.split("->");let i=r(this,Ti);return s.forEach(n=>{i=i[n]}),i},Jt=new WeakSet,he=function(e){return r(this,Fe).querySelector(e)},Be=new WeakSet,ns=function(e,s,i){e.addEventListener(s,i),r(this,Kl).push({selector:e,eventType:s,cb:i})},zd=new WeakSet,Eb=function(){r(this,hs).value&&(l(this,ic,kp).call(this,"",r(this,hs).value),r(this,Q).selectedCountryClearable&&l(this,Se,We).call(this,r(this,qi),"display","grid"))},Wd=new WeakSet,bb=function(){const{protocol:e}=r(this,Ti).location;fetch(`${e}//${r(this,kd)}`).then(s=>s.text()).then(s=>{const i=s.trim().split(`
`).reduce((n,a)=>(a=a.split("="),n[a[0]]=a[1],n),{});this.setSelectedCountryItem(i.loc)})},Hd=new WeakSet,Ib=function(){navigator.geolocation.getCurrentPosition(e=>{const{latitude:s,longitude:i}=e.coords,{protocol:n}=r(this,Ti).location;fetch(`${n}//${r(this,jd)}&lat=${s}&lng=${i}`).then(a=>a.json()).then(a=>{this.setSelectedCountryItem(a.countryCode)})})},qd=new WeakSet,_b=function(e){var a,o;const s=r(this,Zi).activeElement;let i=null;const n=l(this,Bn,ia).call(this);if(e.target!==r(this,Bt)){if(n){const h=Number(s.dataset.index||-1);if(e.key==="ArrowDown"||!e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,Ge))i=l(this,Jt,he).call(this,".option:not(.disabled-opt)");else if(s.classList.contains("option")){const c=l(this,eo,ph).call(this,h,"next"),d=l(this,yr,Do).call(this,c);d?i=d:c+1<r(this,Qs).length&&((a=this.virtualOptionList)==null||a.scrollToIndex(c),setTimeout(()=>{const u=l(this,yr,Do).call(this,c);u&&u.focus()},50))}}else if(e.key==="ArrowUp"||e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,Ge))i=r(this,Bt),l(this,Bn,ia).call(this)&&this.setMenu({open:!1});else if(s.classList.contains("option")){const c=l(this,eo,ph).call(this,h,"previous"),d=l(this,yr,Do).call(this,c);d?i=d:c>0?((o=this.virtualOptionList)==null||o.scrollToIndex(c),setTimeout(()=>{const u=l(this,yr,Do).call(this,c);u&&u.focus()},50)):d||(i=r(this,Ge))}}else e.key==="Escape"&&this.setMenu({open:!1})}else if(e.key>="a"&&e.key<="z"){clearTimeout(r(this,tc)),T(this,Ka,r(this,Ka)+e.key),T(this,tc,setTimeout(()=>{T(this,Ka,"")},300));const h=r(this,Q).options.find(c=>!c.disabled&&c.lbl.toLowerCase().startsWith(r(this,Ka)));h&&this.setSelectedCountryItem(h.i)}else if(e.key==="ArrowDown"||e.key==="ArrowUp"){e.preventDefault();const h=l(this,ac,Vp).call(this),c=e.key==="ArrowDown"?"next":"previous",d=l(this,eo,ph).call(this,h,c);d>-1&&d<r(this,Q).options.length&&(this.value=r(this,Q).options[d].val)}i&&i.focus()}},to=new WeakSet,uh=function(e,s){const i=new Event(s);e.dispatchEvent(i)},Yd=new WeakSet,wb=function(){r(this,Bt).value="",this.setSelectedCountryItem(""),l(this,to,uh).call(this,r(this,Bt),"input"),l(this,to,uh).call(this,r(this,hs),"blur")},yr=new WeakSet,Do=function(e){return l(this,Jt,he).call(this,`.${this.fieldKey}-option-list .option[data-index="${e}"]`)},eo=new WeakSet,ph=function(e=-1,s){if(s==="next"){const i=r(this,Q).options.length;for(let n=e+1;n<i;n+=1)if(!r(this,Q).options[n].disabled)return n}else if(s==="previous"){for(let i=e-1;i>=0;i-=1)if(!r(this,Q).options[i].disabled)return i}},ec=new WeakSet,Gp=function(e){r(this,Fe).contains(e.target)||this.setMenu({open:!1})},Xd=new WeakSet,vb=function(){return r(this,Q).options.reduce((e,s)=>{if(!e[s.code]){let{code:i}=s;i[0]==="+"&&(i=i.substring(1)),!(i in e)&&s.ptrn&&(e[i]=s.i)}return e},{})},Zd=new WeakSet,Tb=function(e){let s=e;s[0]==="+"&&(s=s.substring(1,4));let i="";for(let n=3;n>0;n-=1)if(i=s.substring(0,n),i in r(this,Qa))return i;return""},sc=new WeakSet,Bp=function(e){var n;let s=l(this,Zd,Tb).call(this,e);s&&s[0]!=="+"&&(s=`+${s}`);let i=((n=l(this,Pn,Kr).call(this))==null?void 0:n.code)||"";return i&&i[0]!=="+"&&(i=`+${i}`),s!==i?(this.setSelectedCountryItem(r(this,Qa)[s.substring(1)]),s):i},Qi=new WeakSet,rr=function(e){return e.replace(/[^+0-9]/g,"")},ic=new WeakSet,kp=function(e,s){l(this,sc,Bp).call(this,s)&&e!==s&&l(this,nc,jp).call(this,l(this,Qi,rr).call(this,s)),typeof bit_conditionals!="undefined"&&bit_conditionals({target:r(this,hs)})},Qd=new WeakSet,xb=function(){this.value.length>3&&(r(this,Bt).value=this.value),l(this,to,uh).call(this,r(this,hs),"blur")},Jd=new WeakSet,Sb=function(e){const{value:s}=e.target;s&&r(this,Q).selectedCountryClearable?l(this,Se,We).call(this,r(this,qi),"display","grid"):r(this,Q).selectedCountryClearable&&l(this,Se,We).call(this,r(this,qi),"display","none"),l(this,nc,jp).call(this,s)},nc=new WeakSet,jp=function(e){const s=l(this,Pn,Kr).call(this);let i="";if(r(this,Xi)?i=s.code:i=l(this,sc,Bp).call(this,e),i&&s){let n=s.frmt;const a=r(this,Q).valueFormat||"";n||(n=r(this,Q).inputFormat||"");const o=l(this,Lr,Fo).call(this,i,e,n);if(a){const h=l(this,Qi,rr).call(this,e),c=l(this,Lr,Fo).call(this,i,h,a);this.value=c}else this.value=e;r(this,Bt).value=o}},Kd=new WeakMap,Lr=new WeakSet,Fo=function(e,s,i=""){let n="",a=0;const o=s[0]==="+"?s.substring(1):s;for(let h=0;h<i.length&&!(a>=o.length);h+=1){const c=i[h];if(c==="c"){const d=e[0]==="+"?e.substring(1):e;n+=d,a+=d.length}else if(c==="#"){if(!r(this,Kd).call(this,o[a]))break;n+=o[a],a+=1}else o[a]===c?(n+=c,a+=1):n+=c}return a<o.length&&(n+=o.substring(a)),n},rc=new WeakSet,Up=function(e){const s=l(this,Qi,rr).call(this,e.target.value),i=l(this,Pn,Kr).call(this);if(i){const n=s.substring(i.code.length);if(i.ptrn&&n){const a=i.ptrn.replace(/\$_bf_\$/g,"\\");return new RegExp(`^(${a})$`).test(n)?"":"invalid"}return n?"":"required"}return"required"},ac=new WeakSet,Vp=function(){const e=r(this,Qs).findIndex(s=>s.i===r(this,Yi));return e===-1?0:e},Pn=new WeakSet,Kr=function(){return r(this,Q).options.find(e=>e.i===r(this,Yi))},Dn=new WeakSet,ta=function(e){return r(this,Zi).createElement(e)},ds=new WeakSet,ks=function(e,s){e.classList.add(s)},so=new WeakSet,fh=function(e,s){e.textContent=s},Nt=new WeakSet,Ht=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},Fn=new WeakSet,ea=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,ds,ks).call(this,e,i))},Gn=new WeakSet,sa=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,Nt,Ht).call(this,e,s[n].key,s[n].value)},Se=new WeakSet,We=function(e,s,i){e.style.setProperty(s,i,"important")},sf=new WeakSet,mS=function(){const e=l(this,Jt,he).call(this,".option");if(!e)return;const s=r(this,Ti).getComputedStyle(e),i=parseFloat(s.marginTop)+parseFloat(s.marginBottom),n=e.offsetHeight+i||0;n!==r(this,Jl)&&(T(this,Jl,n),r(this,Nn).innerHTML="",l(this,oc,zp).call(this))},oc=new WeakSet,zp=function(){r(this,Nn).innerHTML="";const e=r(this,Qs).map((s,i)=>{const n=l(this,Dn,ta).call(this,"li");if(l(this,Nt,Ht).call(this,n,"data-key",s.i),l(this,Nt,Ht).call(this,n,"data-index",i),"option"in r(this,Q).attributes){const c=r(this,Q).attributes.option;l(this,Gn,sa).call(this,n,c)}if(!s.i)return l(this,so,fh).call(this,n,s.lbl),l(this,ds,ks).call(this,n,"opt-not-found"),n;if(l(this,ds,ks).call(this,n,"option"),"option"in r(this,Q).classNames){const c=r(this,Q).classNames.option;c&&l(this,Fn,ea).call(this,n,c)}const a=l(this,Dn,ta).call(this,"span");if(l(this,ds,ks).call(this,a,"opt-lbl-wrp"),"opt-lbl-wrp"in r(this,Q).classNames){const c=r(this,Q).classNames["opt-lbl-wrp"];c&&l(this,Fn,ea).call(this,a,c)}if("opt-lbl-wrp"in r(this,Q).attributes){const c=r(this,Q).attributes["opt-lbl-wrp"];l(this,Gn,sa).call(this,a,c)}if(r(this,Q).optionFlagImage){const c=l(this,Dn,ta).call(this,"img");if(l(this,ds,ks).call(this,c,"opt-icn"),"opt-icn"in r(this,Q).classNames){const d=r(this,Q).classNames["opt-icn"];d&&l(this,Fn,ea).call(this,c,d)}if("opt-icn"in r(this,Q).attributes){const d=r(this,Q).attributes["opt-icn"];l(this,Gn,sa).call(this,c,d)}c.src=`${r(this,Ja)}/${s.img}`,c.alt=`${s.lbl} flag image`,c.loading="lazy",l(this,Nt,Ht).call(this,c,"aria-hidden",!0),a.append(c)}const o=l(this,Dn,ta).call(this,"span");if(l(this,ds,ks).call(this,o,"opt-lbl"),"opt-lbl"in r(this,Q).classNames){const c=r(this,Q).classNames["opt-lbl"];c&&l(this,Fn,ea).call(this,o,c)}if("opt-lbl"in r(this,Q).attributes){const c=r(this,Q).attributes["opt-lbl"];l(this,Gn,sa).call(this,o,c)}l(this,so,fh).call(this,o,s.lbl),a.append(o);const h=l(this,Dn,ta).call(this,"span");if(l(this,ds,ks).call(this,h,"opt-suffix"),"opt-suffix"in r(this,Q).classNames){const c=r(this,Q).classNames["opt-suffix"];c&&l(this,Fn,ea).call(this,h,c)}if(l(this,so,fh).call(this,h,s.code),l(this,Nt,Ht).call(this,h,"data-dev-opt-suffix",this.fieldKey),"opt-suffix"in r(this,Q).attributes){const c=r(this,Q).attributes["opt-suffix"];l(this,Gn,sa).call(this,h,c)}return l(this,Nt,Ht).call(this,n,"tabindex",l(this,Bn,ia).call(this)?"0":"-1"),l(this,Nt,Ht).call(this,n,"role","option"),l(this,Nt,Ht).call(this,n,"aria-posinset",i+1),l(this,Nt,Ht).call(this,n,"aria-setsize",r(this,Qs).length),l(this,Be,ns).call(this,n,"click",c=>{T(this,Xi,!0),this.setSelectedCountryItem(c.currentTarget.dataset.key)}),l(this,Be,ns).call(this,n,"keyup",c=>{c.key==="Enter"&&(T(this,Xi,!0),this.setSelectedCountryItem(c.currentTarget.dataset.key))}),s.disabled&&l(this,ds,ks).call(this,n,"disabled-opt"),n.append(a,h),r(this,Yi)===s.i?(l(this,ds,ks).call(this,n,"selected-opt"),l(this,Nt,Ht).call(this,n,"aria-selected",!0)):l(this,Nt,Ht).call(this,n,"aria-selected",!1),n});r(this,Nn).append(...e)},tu=new WeakSet,Rb=function(e){const s=l(this,Qi,rr).call(this,r(this,Bt).value);if(s){let i=l(this,Pn,Kr).call(this).frmt;i||(i=r(this,Q).inputFormat||"");const n=l(this,Qi,rr).call(this,s);r(this,Bt).value=l(this,Lr,Fo).call(this,e,n,i)}else r(this,Bt).value=e;if(!s)this.value=e;else{const i=r(this,Q).valueFormat||"",n=l(this,Qi,rr).call(this,r(this,Bt).value);this.value=i?l(this,Lr,Fo).call(this,e,n,i):r(this,Bt).value}},lc=new WeakSet,Wp=function(){T(this,Yi,""),r(this,Q).selectedFlagImage&&(r(this,Za).src=r(this,Xa)),T(this,Xi,!1),this.setMenu({open:!1}),this.value="",r(this,Q).selectedCountryClearable&&l(this,Se,We).call(this,r(this,qi),"display","none")},cc=new WeakSet,Hp=function(){if(!l(this,Bn,ia).call(this))return;l(this,oc,zp).call(this);const e=l(this,ac,Vp).call(this),s=l(this,Jt,he).call(this,`.option[data-index="${e}"]`);s&&s.scrollIntoView({block:"nearest",inline:"nearest"})},eu=new WeakSet,Cb=function(e){r(this,Ge).value=e},su=new WeakSet,Ob=function(e){var s;if(e.key==="Enter"&&r(this,Qs).length){const i=(s=l(this,Jt,he).call(this,".option"))==null?void 0:s.dataset.key;this.setSelectedCountryItem(i),this.searchOptions("")}else this.searchOptions(e.target.value)},Bn=new WeakSet,ia=function(){return r(this,Fe).classList.contains("menu-open")},iu=new WeakSet,yb=function(){const e=r(this,Ql).getBoundingClientRect(),s=e.top,i=r(this,Ti).innerHeight-e.bottom;i<s&&i<r(this,Q).maxHeight?(l(this,Se,We).call(this,r(this,Fe),"flex-direction","column-reverse"),l(this,Se,We).call(this,r(this,Fe),"bottom","0%")):(l(this,Se,We).call(this,r(this,Fe),"flex-direction","column"),l(this,Se,We).call(this,r(this,Fe),"bottom","auto"))},hc=new WeakSet,qp=function(e){e.code==="Space"&&(r(this,Ge).focus(),this.setMenu({open:!0})),e.type==="click"&&(l(this,Bn,ia).call(this)?this.setMenu({open:!1}):(r(this,Ge).focus(),this.setMenu({open:!0})))},nu=new WeakSet,Lb=function(){r(this,Kl).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};function gS({fieldKey:t,formID:e,attr:s,styleClasses:i}){const n=j.useRef(null),a=j.useRef(null),h=et(oe)[t],c=et(Cc),{selectedFlagImage:d,selectedCountryClearable:u,searchClearable:f,optionFlagImage:E,detectCountryByIp:g,detectCountryByGeo:b,defaultCountryKey:I,searchPlaceholder:v,noCountryFoundText:C,inputFormat:w,valueFormat:x}=h.config;return j.useEffect(()=>{n!=null&&n.current||(n.current=yt(`.${t}-phone-fld-wrp`));const R=a.current,O=n.current;R&&O&&"destroy"in R&&R.destroy();const L=document.getElementById("bit-grid-layout").contentWindow;L.bit_virtualized_list||(L.bit_virtualized_list=Tf),L.observeElm||(L.observeElm=Lu);const{placeholderImage:P,options:y}=h,D={fieldKey:t,selectedFlagImage:d,selectedCountryClearable:u,searchClearable:f,optionFlagImage:E,detectCountryByIp:g,detectCountryByGeo:b,defaultCountryKey:I,searchPlaceholder:v,noCountryFoundText:C,placeholderImage:P,options:y,inputFormat:w,valueFormat:x,assetsURL:`${c.assetsURL}/../static/countries/`,document:document.getElementById("bit-grid-layout").contentDocument,window:L,attributes:{option:gt(t,"option"),"opt-lbl-wrp":gt(t,"opt-lbl-wrp"),"opt-icn":gt(t,"opt-icn"),"opt-lbl":gt(t,"opt-lbl"),"opt-a":gt(t,"opt-prefix")},classNames:{option:S(t,"option"),"opt-lbl-wrp":S(t,"opt-lbl-wrp"),"opt-icn":S(t,"opt-icn"),"opt-lbl":S(t,"opt-lbl"),"opt-prefix":S(t,"opt-prefix")}};a.current=new fS(O,D)},[h]),p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:i}),p.jsx(Ut,{formID:e,fieldKey:t,fieldData:s,children:p.jsx("div",{className:`${t}-phone-fld-container`,children:p.jsxs("div",A(_({"data-dev-phone-fld-wrp":t,className:`${t}-phone-fld-wrp ${S(t,"phone-fld-wrp")} ${h.valid.disabled?"disabled":""} ${h.valid.readonly?"readonly":""}`,ref:n},M(t,"phone-fld-wrp")),{children:[p.jsx("input",_(_({name:t,type:"hidden",className:`${t}-phone-hidden-input`},"disabled"in h.valid&&{disabled:h.valid.disabled}),"readonly"in h.valid&&{readOnly:h.valid.readonly})),p.jsxs("div",{className:`${t}-phone-inner-wrp`,children:[p.jsxs("div",{"data-testid":`${t}-dpd-wrp`,className:`${t}-dpd-wrp`,"data-dev-dpd-wrp":t,role:"combobox","aria-live":"assertive","aria-labelledby":"country-label-2","aria-expanded":"false",tabIndex:h.valid.disabled?"-1":"0",children:[d&&p.jsx("div",{className:`${t}-selected-country-wrp`,children:p.jsx("img",_({"data-dev-selected-phone-img":t,alt:"Selected Country image","aria-hidden":"true",className:`${t}-selected-country-img ${S(t,"selected-phone-img")}`,src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>"},M(t,"selected-phone-img")))}),p.jsx("div",{className:`${t}-dpd-down-btn`,children:p.jsx("svg",{width:"15",height:"15",role:"img",title:"Downarrow icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),p.jsx("input",A(_({"data-testid":`${t}-phone-nmbr-inp`,"data-dev-phone-number-input":t,"aria-label":"Phone Number"},"ph"in s&&{placeholder:s.ph}),{type:"tel",className:`${t}-phone-number-input`,autoComplete:"tel",tabIndex:h.valid.disabled?"-1":"0"})),u&&p.jsx("button",A(_({"data-testid":`${t}-inp-clr-btn`,"data-dev-input-clear-btn":t,type:"button",title:"Clear value",className:`${t}-input-clear-btn ${S(t,"input-clear-btn")}`},M(t,"input-clear-btn")),{children:p.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),p.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]}),p.jsx("div",A(_({className:`${t}-option-wrp ${S(t,"option-wrp")}`,"data-dev-option-wrp":t},M(t,"option-search-wrp")),{children:p.jsxs("div",{className:`${t}-option-inner-wrp`,children:[p.jsxs("div",A(_({"data-dev-option-search-wrp":t,className:`${t}-option-search-wrp ${S(t,"option-search-wrp")}`},M(t,"option-search-wrp")),{children:[p.jsx("input",{"data-testid":`${t}-opt-srch-inp`,"data-dev-opt-search-input":t,"aria-label":"Search for countries",type:"search",className:`${t}-opt-search-input`,placeholder:v,autoComplete:"off",tabIndex:"-1"}),p.jsxs("svg",A(_({className:`${t}-icn ${t}-opt-search-icn ${S(t,"opt-search-icn")}`,"data-dev-opt-search-icn":t,"aria-hidden":"true",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},M(t,"opt-search-icn")),{children:[p.jsx("circle",{cx:"11",cy:"11",r:"8"}),p.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})),f&&p.jsx("button",A(_({"data-testid":`${t}-srch-clr-btn`,type:"button","aria-label":"Clear search",className:`${t}-icn ${t}-search-clear-btn ${S(t,"search-clear-btn")}`,"data-dev-search-clear-btn":t,tabIndex:"-1"},M(t,"search-clear-btn")),{children:p.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),p.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]})),p.jsx("ul",A(_({className:`${t}-option-list ${S(t,"option-list")}`,tabIndex:"-1",role:"listbox","aria-label":"country list","data-dev-option-list":t},M(t,"option-list")),{children:p.jsxs("li",{className:"option",children:[p.jsx("span",{className:"opt-prefix",children:"Prefix"}),p.jsxs("span",{className:"opt-lbl-wrp",children:[p.jsx("img",{className:"opt-icn",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>",alt:"Placeholder"}),p.jsx("span",{className:"opt-lbl",children:"Option"})]}),p.jsx("span",{className:"opt-suffix",children:"Suffix"})]})}))]})}))]}))})})]})}let Mi,Go;function xf({form:t,input:e}){var o,h;if(t?Mi=t:(o=e==null?void 0:e.form)!=null&&o.id&&([,Mi]=e.form.id.split("form-")),typeof window[Mi]=="undefined")return!1;let s={};if(Go=window[Mi].fields,t)s=ES();else if(e){if(!window[Mi].validateFocusLost)return!0;const c=Ab(e.name);s={[c]:e.value},Go={[c]:Go[c]}}let i=!0;const n=Object.entries(Go);let{length:a}=n;for(;a--;){const[c,d]=n[a],u=d.typ,f=typeof s[c]=="string"?s[c].trim():s[c],E=document.querySelector(`#form-${Mi} .${c}`);if(window.getComputedStyle(E).display==="none"){zc("",c);continue}let g="";if(!f){u==="check"&&(g=Mb(f,d)),g=_S(d),zc(g,c,d),g&&(i=!1);continue}if(u==="number"?g=wS(f,d):u==="email"?g=vS(f,d):u==="url"?g=TS(f,d):u==="decision-box"?g=xS(f,d):u==="check"||u==="select"?g=CS(f,d):u==="file-up"&&(g=SS(f,d)),(h=d==null?void 0:d.valid)!=null&&h.regexr&&(g=RS(f,d),g)){zc(g,c,d),i=!1;continue}zc(g,c,d),g&&(i=!1)}return i}const Ab=t=>t.slice(-2)==="[]"?t.slice(0,t.length-2):t,ES=()=>{const t=new FormData(document.getElementById(`form-${Mi}`)),e={};return Array.from(t.entries()).forEach(([i,n])=>{const a=Ab(i);a in Go&&(e[a]?(Array.isArray(e[a])||(e[a]=[e[a]]),e[a].push(n)):e[a]=n)}),e},zc=(t,e,s)=>{var n,a;const i=document.querySelector(`#form-${Mi} #${e}-error`);i&&"err"in(s||{})&&(t&&((a=(n=s==null?void 0:s.err)==null?void 0:n[t])!=null&&a.show)?(i.innerHTML=s.err[t].custom?s.err[t].msg:s.err[t].dflt,i.parentElement.style.marginTop="5px",i.parentElement.style.height=`${i.offsetHeight}px`,bS(e)):(i.parentElement.style.marginTop=0,i.parentElement.style.height=0))},bS=t=>{const e=document.querySelector(`#form-${Mi} .btcd-fld-itm.${t}`),s=document.body.getBoundingClientRect(),n=e.getBoundingClientRect().top-s.top;IS(e)||window.scroll({top:n,behavior:"smooth"})},IS=t=>{const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},_S=t=>{var e;return(e=t==null?void 0:t.valid)!=null&&e.req?"required":""},Sf=t=>(t||"").split("$_bf_$").join("\\"),wS=(t,e)=>e.mn&&Number(t)<Number(e.mn)?"mn":e.mx&&Number(t)>Number(e.mx)?"mx":"",vS=(t,e)=>e.err.invalid.show?new RegExp(Sf(e.pattern)).test(t)?"":"invalid":"",TS=(t,e)=>e.err.invalid.show?new RegExp(Sf(e.attr.pattern)).test(t)?"":"invalid":"",xS=(t,e)=>e.valid.req&&t!==e.msg.checked?"req":"",Mb=(t,e)=>{var s;return(s=e==null?void 0:e.opt)!=null&&s.find(i=>i.req&&!(t||[]).includes(i.lbl))?"req":""},SS=(t,e)=>e.valid.req&&!Array.isArray(t)&&!t.name?"req":"",RS=(t,e)=>new RegExp(Sf(e.valid.regexr),e.valid.flags||"").test(t)?"":"regexr",CS=(t,e)=>{const s=Array.isArray(t)?t:(t||"").split(","),i=Number(e.mn)||0,n=Number(e.mx)||e.opt.length;return s.length<i?"mn":s.length>n?"mx":e.typ==="check"?Mb(t,e):""};function OS({attr:t,onBlurHandler:e,resetFieldValue:s,formID:i,fieldKey:n,styleClasses:a}){const[o,h]=j.useState(t.val||""),c=j.useRef([]),[d,u]=j.useState("");c.current=t.opt.map((b,I)=>{var v;return(v=c.current[I])!=null?v:j.createRef()});const f=b=>{t.valid.disabled||(h(b.target.value),e&&e(b),Ot(n))},E=b=>{const{name:I,form:v}=b.target;xf({input:{name:I,form:v,value:o}})},g=b=>{h(b.target.value),u(b.target.value)};return p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:a}),p.jsx(Ut,{formID:i,fieldKey:n,fieldData:t,children:p.jsxs("div",A(_({"data-testid":`${n}-cc`,"data-dev-cc":n,className:`${n}-cc ${S(n,"cc")}`},M(n,"cc")),{children:[t.opt.map((b,I)=>p.jsxs("div",A(_({"data-testid":`${n}-cw`,"data-dev-cw":n,className:`${n}-cw ${S(n,"cw")}`},M(n,"cw")),{children:[p.jsx("input",_(A(_(_(_(_({"data-testid":`${n}-ci`,id:`${n}-chk-${I}`,type:"radio",className:`${n}-ci ${S(n,"ci")}`,ref:c.current[I],name:n,value:b.val||b.lbl},b.check&&{checked:!0}),(t.valid.disabled||b.disabled)&&{disabled:!0}),t.valid.req&&{required:!0}),"name"in t&&{name:t.name}),{checked:o===(b.val||b.lbl)||!o&&b.check,onChange:f,onBlur:E}),M(n,"ci"))),p.jsxs("label",A(_({"data-testid":`${n}-cl`,"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-chk-${I}`,className:`${n}-cl ${S(n,"cl")}`},M(n,"cl")),{children:[p.jsx("span",A(_({"data-testid":`${n}-bx`,"data-dev-bx":n,"data-bx":!0,className:`${n}-bx ${S(n,"bx")}`},M(n,"bx")),{children:p.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp ${S(n,"svgwrp")}`,children:p.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn ${S(n,"ck-icn")}`})})})),p.jsx("span",A(_({"data-testid":`${n}-ct`,"data-dev-ct":n,className:`${n}-ct ${S(n,"ct")}`},M(n,"ct")),{children:p.jsx(ms,{html:b.lbl})}))]}))]}),`opr-${I+22}`)),t.addOtherOpt&&p.jsxs("div",A(_({"data-testid":`${n}-cw`,"data-dev-cw":n,className:`${n}-cw ${S(n,"cw")}`},M(n,"cw")),{children:[p.jsx("input",_(A(_(_({"data-testid":`${n}-ci`,"data-oopt":n,id:`${n}-chk-${t.opt.length}`,type:"radio",className:`${n}-ci ${S(n,"ci")}`,ref:c.current[t.opt.length],name:n,value:d},t.valid.req&&{required:!0}),"name"in t&&{name:t.name}),{disabled:t.valid.disabled,onChange:f,onBlur:E}),M(n,"ci"))),p.jsxs("label",A(_({"data-testid":`${n}-cl`,"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-chk-${t.opt.length}`,className:`${n}-cl ${S(n,"cl")}`},M(n,"cl")),{children:[p.jsx("span",A(_({"data-testid":`${n}-bx`,"data-dev-bx":n,"data-bx":!0,className:`${n}-bx  ${S(n,"bx")}`},M(n,"bx")),{children:p.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp ${S(n,"svgwrp")}`,children:p.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn ${S(n,"ck-icn")}`})})})),p.jsx("span",A(_({"data-testid":`${n}-ct`,"data-dev-ct":n,className:`${n}-ct ${S(n,"ct")}`},M(n,"ct")),{children:"Other.."}))]})),p.jsx("div",{"data-oinp-wrp":!0,className:`${n}-other-inp-wrp`,children:p.jsx("input",A(_(_(_({"data-testid":`${n}-other-inp`,"data-dev-other-inp":n,type:"text",className:`${n}-other-inp ${S(n,"other-inp")}`},t.valid.otherOptReq&&{required:!0}),"otherInpPh"in t&&{placeholder:t.otherInpPh}),!("otherInpPh"in t)&&{placeholder:"Other..."}),{value:d,onChange:g}))})]}),`opt-${t.opt.length+24}`)]}))})]})}var It,xi,us,dc,Js,ru,io,Ar,au,Ji,pt,ge,uc,no,pc,Mr,kn,ps,ro,fc,mc,$r,ou,$b,lu,Nb,Si,mn,cu,Pb,gc,Yp,Ec,Xp,hu,Db,du,Fb,bc,Zp,jn,na,uu,Gb,Ki,ar,Nr,Bo,tn,or,fs,js,Ic,Qp,_c,Jp;class yS{constructor(e,s){m(this,ou);m(this,lu);m(this,Si);m(this,cu);m(this,gc);m(this,Ec);m(this,hu);m(this,du);m(this,bc);m(this,jn);m(this,uu);m(this,Ki);m(this,Nr);m(this,tn);m(this,fs);m(this,Ic);m(this,_c);m(this,It,null);m(this,xi,null);m(this,us,[]);m(this,dc,null);m(this,Js,null);m(this,ru,null);m(this,io,!1);m(this,Ar,!1);m(this,au,!1);m(this,Ji,null);m(this,pt,{});m(this,ge,null);m(this,uc,null);m(this,no,null);m(this,pc,null);m(this,Mr,null);m(this,kn,null);m(this,ps,null);m(this,ro,null);m(this,fc,[]);m(this,mc,null);m(this,$r,!1);T(this,dc,(s==null?void 0:s.document)||document),T(this,Js,s==null?void 0:s.fieldKey),T(this,pt,{status:!1,indx:null}),typeof e=="string"?T(this,Ji,r(this,dc).querySelector(e)):T(this,Ji,e),T(this,ru,s==null?void 0:s.contentId),T(this,us,(s==null?void 0:s.options)||[]),T(this,io,(s==null?void 0:s.showReviewLblOnHover)||!1),T(this,Ar,(s==null?void 0:s.showReviewLblOnSelect)||!1),T(this,au,(s==null?void 0:s.selectedRating)||!1),T(this,mc,(s==null?void 0:s.defaultValue)||null),this.init()}init(){l(this,ou,$b).call(this),T(this,It,r(this,Ji).querySelectorAll(r(this,uc))),T(this,xi,l(this,hu,Db).call(this,r(this,pc))),l(this,lu,Nb).call(this),l(this,cu,Pb).call(this),r(this,It).forEach((e,s)=>{if(r(this,pt).status&&s<=r(this,pt).indx){const i=e.querySelector(r(this,ge));if(l(this,tn,or).call(this,i,r(this,ps)),r(this,us)[s].check){const n=e.querySelector(r(this,no));n.checked=!0}}l(this,Si,mn).call(this,e,"mouseover",()=>{const i=parseInt(e.dataset.indx);l(this,du,Fb).call(this,i)}),l(this,Si,mn).call(this,e,"mouseout",()=>{const{indx:i}=e.dataset;l(this,bc,Zp).call(this,i)}),l(this,Si,mn).call(this,e,"click",i=>{const{indx:n}=e.dataset;i.preventDefault(),T(this,$r,!0),l(this,jn,na).call(this,n)}),l(this,Si,mn).call(this,e,"touchstart",i=>{i.preventDefault();const{indx:n}=e.dataset;T(this,$r,!0),l(this,jn,na).call(this,n)}),l(this,Si,mn).call(this,e,"touchend",()=>{const{indx:i}=e.dataset;l(this,bc,Zp).call(this,i)})})}set value(e){const s=r(this,us).findIndex(i=>i.val===e);s!==-1&&l(this,jn,na).call(this,s)}get value(){const e=r(this,us)[r(this,pt).indx];return e.val||e.lbl}destroy(){l(this,Ic,Qp).call(this),l(this,_c,Jp).call(this),T(this,It,null),T(this,xi,null)}reset(){l(this,Ic,Qp).call(this),l(this,_c,Jp).call(this),T(this,pt,{status:!1,indx:null}),T(this,ro,null),this.init()}}It=new WeakMap,xi=new WeakMap,us=new WeakMap,dc=new WeakMap,Js=new WeakMap,ru=new WeakMap,io=new WeakMap,Ar=new WeakMap,au=new WeakMap,Ji=new WeakMap,pt=new WeakMap,ge=new WeakMap,uc=new WeakMap,no=new WeakMap,pc=new WeakMap,Mr=new WeakMap,kn=new WeakMap,ps=new WeakMap,ro=new WeakMap,fc=new WeakMap,mc=new WeakMap,$r=new WeakMap,ou=new WeakSet,$b=function(){T(this,ge,`.${r(this,Js)}-rating-img`),T(this,uc,`.${r(this,Js)}-rating-lbl`),T(this,no,`.${r(this,Js)}-rating-input`),T(this,pc,`.${r(this,Js)}-rating-msg`),T(this,Mr,`${r(this,Js)}-rating-hover`),T(this,kn,`${r(this,Js)}-rating-scale`),T(this,ps,`${r(this,Js)}-rating-selected`)},lu=new WeakSet,Nb=function(){r(this,us).forEach((e,s)=>{(r(this,mc)===e.val||e!=null&&e.check)&&(T(this,pt,{status:!0,indx:s}),r(this,Ar)?l(this,Ki,ar).call(this,s):l(this,Nr,Bo).call(this))})},Si=new WeakSet,mn=function(e,s,i){e.addEventListener(s,i),r(this,fc).push({selector:e,eventType:s,cb:i})},cu=new WeakSet,Pb=function(){let e=-1;const s=r(this,us).findIndex(i=>i.check);s!==-1&&(e=s),l(this,Si,mn).call(this,r(this,Ji),"keydown",i=>{if(i.key==="ArrowRight"){if(r(this,us).length===e)return;e+=1;const n=i.target.children[e],a=parseInt(n.dataset.indx);if(r(this,pt).indx!==a&&l(this,jn,na).call(this,a),l(this,gc,Yp).call(this,a),r(this,us).length===e+1)return!1}else if(i.key==="ArrowLeft"){if(e===0||e-1<0)return;e-=1,l(this,jn,na).call(this,e),l(this,gc,Yp).call(this,e)}}),l(this,Si,mn).call(this,r(this,Ji),"focusout",()=>{l(this,Ec,Xp).call(this)})},gc=new WeakSet,Yp=function(e){l(this,Ec,Xp).call(this);const s=r(this,It)[e].querySelector(r(this,ge));l(this,tn,or).call(this,s,r(this,kn))},Ec=new WeakSet,Xp=function(){for(let e=0;e<r(this,us).length;e+=1){const s=r(this,It)[e].querySelector(r(this,ge));l(this,fs,js).call(this,s,r(this,kn))}},hu=new WeakSet,Db=function(e){return r(this,Ji).querySelector(e)},du=new WeakSet,Fb=function(e){var s,i;if(r(this,io)&&l(this,Ki,ar).call(this,e),r(this,pt).indx&&(s=r(this,It))!=null&&s[r(this,pt).indx]){const n=r(this,It).length-1;r(this,It).forEach(a=>{const o=a.querySelector(r(this,ge));l(this,fs,js).call(this,o,r(this,ps))});for(let a=0;a<=r(this,pt).indx;a+=1){const o=r(this,It)[a].querySelector(r(this,ge));l(this,fs,js).call(this,o,r(this,ps))}if(r(this,pt).indx===n)for(let a=0;a<=r(this,pt).indx;a+=1){const o=r(this,It)[a].querySelector(r(this,ge));l(this,fs,js).call(this,o,r(this,ps))}}for(let n=0;n<=e;n+=1)if(n<=e&&((i=r(this,It))!=null&&i[n])){const a=r(this,It)[n].querySelector(r(this,ge));l(this,tn,or).call(this,a,r(this,Mr)),n===e&&l(this,tn,or).call(this,a,r(this,kn))}},bc=new WeakSet,Zp=function(e){var s,i;r(this,io)&&(r(this,pt).status&&r(this,pt).indx===e?l(this,Ki,ar).call(this,e):r(this,pt).status?l(this,Ki,ar).call(this,r(this,pt).indx):r(this,xi)&&l(this,Nr,Bo).call(this));for(let n=0;n<=e;n+=1)if((s=r(this,It))!=null&&s[n]){const a=r(this,It)[n].querySelector(r(this,ge));l(this,fs,js).call(this,a,r(this,Mr)),l(this,fs,js).call(this,a,r(this,kn))}if(r(this,pt).status&&(i=r(this,It))!=null&&i[r(this,pt).indx])for(let n=0;n<=r(this,pt).indx;n+=1){const a=r(this,It)[n].querySelector(r(this,ge));l(this,tn,or).call(this,a,r(this,ps))}r(this,Ar)?l(this,Ki,ar).call(this,r(this,pt).indx):l(this,Nr,Bo).call(this)},jn=new WeakSet,na=function(e){var i,n,a,o;if((i=r(this,It))!=null&&i[r(this,pt).indx]){const h=r(this,It)[r(this,pt).indx].querySelector(r(this,ge));l(this,fs,js).call(this,h,r(this,ps))}const s=(n=r(this,It))==null?void 0:n[e].querySelector(r(this,no));r(this,ro)&&r(this,$r)?s!=null&&s.checked?(s.checked=!1,T(this,pt,{status:!1,indx:null})):(s.checked=!0,T(this,pt,{status:!0,indx:e})):(s.checked=!0,T(this,pt,{status:!0,indx:e}),T(this,ro,s)),s.dispatchEvent(new Event("input")),(a=r(this,It))==null||a.forEach(h=>{const c=h.querySelector(r(this,ge));l(this,fs,js).call(this,c,r(this,Mr))}),(o=r(this,It))==null||o.forEach((h,c)=>{const d=h.querySelector(r(this,ge));c<=e&&r(this,pt).status?l(this,tn,or).call(this,d,r(this,ps)):l(this,fs,js).call(this,d,r(this,ps))}),r(this,Ar)&&r(this,pt).status?l(this,Ki,ar).call(this,e):l(this,Nr,Bo).call(this),T(this,$r,!1)},uu=new WeakSet,Gb=function(e){return r(this,us)[e]},Ki=new WeakSet,ar=function(e){const s=l(this,uu,Gb).call(this,e);r(this,xi)&&s&&(r(this,xi).innerText=s.lbl)},Nr=new WeakSet,Bo=function(){r(this,xi)&&(r(this,xi).innerHTML="")},tn=new WeakSet,or=function(e,s){e.classList.add(s)},fs=new WeakSet,js=function(e,s){e.classList.remove(s)},Ic=new WeakSet,Qp=function(){r(this,It).forEach(e=>{const s=e.querySelector(r(this,ge));l(this,fs,js).call(this,s,r(this,ps))})},_c=new WeakSet,Jp=function(){r(this,fc).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};function LS({attr:t,formID:e,fieldKey:s,styleClasses:i}){const{"*":n}=_u(),a=et(cn),{styleMode:o}=a,[h,c]=n.split("/"),d=o&&h==="field-theme-customize"&&c==="rating-msg",f=et(oe)[s],E=j.useRef(null),g=j.useRef(null);return j.useEffect(()=>{var C;E!=null&&E.current||(E.current=yt(`.${s}-inp-fld-wrp`));const b=g.current,I=E.current;b&&I&&"destroy"in b&&b.destroy();const v={options:t.opt,showReviewLblOnHover:t.showReviewLblOnHover,showReviewLblOnSelect:t.showReviewLblOnSelect,selectedRating:t.selectedRating,fieldKey:s,document:(C=document.getElementById("bit-grid-layout"))==null?void 0:C.contentDocument};g.current=new yS(I,v)},[f]),p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:i}),p.jsx(Ut,{formID:e,fieldKey:s,fieldData:t,children:p.jsxs("div",A(_({"data-testid":`${s}-inp-fld-wrp`,"data-dev-inp-fld-wrp":s,className:`${s}-inp-fld-wrp ${S(s,"inp-fld-wrp")}`},M(s,"inp-fld-wrp")),{ref:E,children:[p.jsx("div",A(_({"data-testid":`${s}-rating-wrp`,"data-dev-rating-wrp":s,className:`${s}-rating-wrp ${S(s,"rating-wrp")}`},M(s,"rating-wrp")),{children:t.opt.map((b,I)=>p.jsxs("label",A(_({className:`${s}-rating-lbl ${S(s,"rating-lbl")}`,"data-testid":`${s}-rating-lbl`,"data-dev-rating-lbl":s,htmlFor:`${s}-rating-${I}`},M(s,"rating-lbl")),{"data-indx":I,children:[p.jsx("input",A(_({type:"radio",className:`${s}-rating-input`,name:"rating",value:b.val,"aria-label":`rating-input-${I}`,id:`${s}-rating-${I}`},b.check&&{checked:!0}),{defaultChecked:b==null?void 0:b.check})),p.jsx("img",A(_({className:`${s}-rating-img  ${S(s,"rating-img")}`,src:b.img,alt:b==null?void 0:b.lbl,"aria-label":b==null?void 0:b.lbl},M(s,"rating-img")),{"data-testid":`${s}-rating-input`,"data-dev-rating-img":s}))]}),b.val))})),p.jsx("span",A(_({className:`${s}-rating-msg ${S(s,"rating-msg")}`,"data-testid":`${s}-rating-msg`,"data-dev-rating-msg":s},M(s,"rating-msg")),{children:d&&(f.showReviewLblOnSelect||f.showReviewLblOnHover)&&"Rating Message"}))]}))})]})}var ao,oo,Qe,Un,lo,wc,Pr,ko,pu,Bb,fu,kb,Dr,jo,mu,vc,Kp,en,lr;class AS{constructor(e,s){m(this,Pr);m(this,pu);m(this,fu);m(this,Dr);m(this,vc);m(this,en);m(this,ao,null);m(this,oo,"");m(this,Qe,{clientId:"",options:{currency:"INR",amount:1,amountType:"fixed",theme:{},modal:{},prefill:{},notes:{}}});m(this,Un,null);m(this,lo,null);m(this,wc,null);m(this,mu,e=>{var a;const s=document.getElementById(`${l(this,en,lr).call(this)}`);s.classList.add("pos-rel","form-loading");const i=document.getElementById(`form-${l(this,en,lr).call(this)}`),n=(a=l(this,en,lr).call(this))==null?void 0:a.split("_")[1];if(typeof i!="undefined"&&i!==null){const o=bf_globals[l(this,en,lr).call(this)];r(this,Un)&&(o.entryId=r(this,Un));const h=bfSelect(`input[name="${r(this,Qe).fieldKey}"]`,i);h?h.value=e.razorpay_payment_id:setHiddenFld({name:r(this,Qe).fieldKey,value:e.razorpay_payment_id,type:"text"},i);let c=bfSelect('button[type="submit"]',i);c||(c=document.createElement("button"),c.setAttribute("type","submit"),c.style.display="none",i.append(c)),c.click();const d={formID:n,fieldKey:r(this,Qe).fieldKey,transactionID:e.razorpay_payment_id,payment_type:r(this,Qe).payType==="subscription"?"subscription":"order",entry_id:r(this,Un)},u=new URL(o==null?void 0:o.ajaxURL);u.searchParams.append("_ajax_nonce",o==null?void 0:o.nonce),u.searchParams.append("action","bitforms_save_razorpay_details"),fetch(u,{method:"POST",body:JSON.stringify(d)}).then(()=>{s.classList.remove("pos-rel","form-loading"),T(this,Un,null)})}});Object.assign(r(this,Qe),s),T(this,lo,s.document||document),T(this,wc,s.window||window),T(this,oo,`#form-${l(this,en,lr).call(this)}`),typeof e=="string"?T(this,ao,r(this,lo).querySelector(e)):T(this,ao,e),this.init()}init(){l(this,pu,Bb).call(this,l(this,Pr,ko).call(this,`.${r(this,Qe).fieldKey}-razorpay-btn`),"click",()=>{l(this,vc,Kp).call(this)})}destroy(){l(this,fu,kb).call(this,l(this,Pr,ko).call(this,`.${r(this,Qe).fieldKey}-razorpay-btn`),"click",()=>{l(this,vc,Kp).call(this)})}reset(){this.destroy(),this.init()}}ao=new WeakMap,oo=new WeakMap,Qe=new WeakMap,Un=new WeakMap,lo=new WeakMap,wc=new WeakMap,Pr=new WeakSet,ko=function(e,s){return s?r(this,lo).querySelector(s).querySelector(e):r(this,ao).querySelector(e)},pu=new WeakSet,Bb=function(e,s,i){e.addEventListener(s,i)},fu=new WeakSet,kb=function(e,s,i){e.removeEventListener(s,i)},Dr=new WeakSet,jo=function(e){if(e){const s=window.bf_globals[l(this,en,lr).call(this)].fields[e].fieldName;let i=l(this,Pr,ko).call(this,`[name="${s}"]`,r(this,oo));if(i&&i.type==="radio"&&(i=l(this,Pr,ko).call(this,`[name="${s}"]:checked`,r(this,oo))),i&&i.value)return i.value}return""},mu=new WeakMap,vc=new WeakSet,Kp=function(){return Ac(this,null,function*(){const{currency:e,amount:s,amountType:i,amountFld:n,name:a,description:o,theme:h,prefill:c,modal:d,notes:u}=r(this,Qe).options,{confirm_close:f}=d,{contentId:E}=r(this,Qe),g=Number(i==="dynamic"?l(this,Dr,jo).call(this,n):s)*100,b={key:r(this,Qe).clientId,currency:e,amount:g,name:a,description:o,theme:h,prefill:{name:l(this,Dr,jo).call(this,c.prefillNameFld),email:l(this,Dr,jo).call(this,c.prefillEmailFld),contact:l(this,Dr,jo).call(this,c.prefillContactFld)},notes:u,modal:{backdropclose:!1,escape:!1,confirm_close:f},handler:w=>Ac(this,null,function*(){return r(this,mu).call(this,w)})};try{yield isFormValidatedWithoutError(E)}catch(w){return!1}const I=yield saveFormProgress(E),v=I==null?void 0:I[E];if(!(v!=null&&v.success))return;v.entry_id&&T(this,Un,v.entry_id),new(r(this,wc)).Razorpay(b).open()})},en=new WeakSet,lr=function(){return r(this,Qe).contentId};function MS({fieldKey:t,formID:e,attr:s,isBuilder:i,styleClasses:n}){const a=et(nf),h=et(oe)[t],[c,d]=j.useState(""),u=j.useRef(null),f=j.useRef(null),[E,g]=j.useState(!1);return j.useEffect(()=>{if(!c){rf({fieldKey:t,errorKey:"razorpayClientIdMissing",errorMsg:gn("Razorpay Client ID is missing"),errorUrl:`field-settings/${t}`});return}if(af(t,"razorpayClientIdMissing"),E)return;const I={src:"https://checkout.razorpay.com/v1/checkout.js",integrity:"",id:`bf-razorpay-script-${t}`,scriptInGrid:!1,callback:()=>{g(!0)}};vu(I)},[c]),j.useEffect(()=>{if(!s.payIntegID){d("");return}const b=a==null?void 0:a.find(v=>v.id&&s.payIntegID&&Number(v.id)===Number(s.payIntegID));if(!b)return;const I=b.apiKey;d(I)},[s.payIntegID]),j.useEffect(()=>{if(!E)return;u!=null&&u.current||(u.current=yt(`${t}-razorpay-wrp`));const b=u.current,I=f.current;if((!c||I&&b&&"destroy"in I)&&(I.destroy(),Ot(t)),!c)return;const v={clientId:c,fieldKey:t,options:h.options,onPaymentSuccess:C=>{console.log("success")},onPaymentFailed:()=>{console.log("failed")}};f.current=new AS(b,v)},[E,h]),p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:n}),p.jsxs(Ut,{formID:e,fieldData:s,fieldKey:t,noLabel:!0,noErrMsg:!0,isBuilder:i,children:[E&&c&&p.jsx("div",{className:"bf-form",children:p.jsx("div",{ref:u,className:`${t}-razorpay-wrp`,children:p.jsxs("button",A(_({type:"button","data-dev-razorpay-btn":t,className:`${t}-razorpay-btn ${S(t,"razorpay-btn")}`},M(t,"razorpay-btn")),{children:[p.jsxs("svg",{width:"18",height:"20",viewBox:"0 0 18 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M7.077 6.476l-.988 3.569 5.65-3.589-3.695 13.54 3.752.004 5.457-20L7.077 6.476z",fill:"#fff"}),p.jsx("path",{d:"M1.455 14.308L0 20h7.202L10.149 8.42l-8.694 5.887z",fill:"#fff"})]}),p.jsxs("div",A(_({"data-dev-razorpay-btn-text":t,className:`${t}-razorpay-btn-text ${S(t,"razorpay-btn-text")}`},M(t,"razorpay-btn-text")),{children:[p.jsx("span",A(_({"data-dev-razorpay-btn-title":t,className:`${t}-razorpay-btn-title ${S(t,"razorpay-btn-title")}`},M(t,"razorpay-btn-title")),{children:h.btnTxt})),h.subTitl&&p.jsx("span",A(_({"data-dev-razorpay-btn-sub-title":t,className:`${t}-razorpay-btn-sub-title ${S(t,"razorpay-btn-sub-title")}`},M(t,"razorpay-btn-sub-title")),{children:"Secured by Razorpay"}))]}))]}))})}),(!E||!c)&&p.jsx("p",{children:"Select a config from field settings to render the Razorpay."})]})]})}function $S({fieldKey:t,formId:e,styleClasses:s}){var b;const i=j.useRef(null),n=j.useRef(null),o=et(oe)[t],h=et(fo),{styleMode:c}=et(cn),d=((b=o.hidden)==null?void 0:b.includes(h))||!1,u=j.useRef(null),f=et(Xb),{siteKey:E=""}=f||{};j.useEffect(()=>{window.renderGrecaptcha=g;const v={src:"https://www.google.com/recaptcha/api.js?onload=renderGrecaptcha&render=explicit",integrity:"",id:"bf-recaptcha-script",async:!0,defer:!0};return vu(v),()=>{clearInterval(n.current),of(v.id)}},[]);function g(){let I=yt(`.${t}-recaptcha`);u.current!==null&&(I==null||I.remove(),window.grecaptcha.reset(u.current),I=document.createElement("div"),I.classList.add(`${t}-recaptcha`),i.current.appendChild(I)),u.current=window.grecaptcha.render(I,{sitekey:E,theme:o.config.theme,size:o.config.size}),Ot(t),n.current&&clearInterval(n.current),n.current=setInterval(()=>{window.grecaptcha.reset(u.current)},3e4)}return j.useEffect(()=>{window.grecaptcha&&g()},[o]),p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:s}),p.jsx("div",{"data-dev-fld-wrp":t,className:`${t}-recaptcha-container ${t}-fld-wrp ${c?"":"drag"} ${d?"fld-hide":""}`,children:p.jsx("div",{className:`${t}-recaptcha-wrp`,ref:i,children:p.jsx("div",{className:`${t}-recaptcha`})})})]})}function NS({fieldKey:t,attr:e,styleClasses:s,formID:i}){var Oi,Xn,Zn;const{formType:n}=_u(),a=kr(s),[o,h]=rn(jm),[c,d]=j.useState(kr(o[t])),[u,f]=rn(Um),[E,g]=rn(Vm),b=an(zm),I=et(oe),{styleMode:v}=et(cn),[C,w]=rn(mo),x=j.useRef(null),{ref:R,isComponentVisible:O,setIsComponentVisible:L}=et(Wm),P=et(fo),y=et(lf),D=an(Hm),V=et(qm),{recalculateNestedField:k}=y,{fieldKey:B,parentFieldKey:X,counter:N}=k,W=Ym(),F=Xm(),{btnPosition:$}=e;j.useEffect(()=>{if(N>0&&t===X){const tt=Zm(c,B);d(tt),j.startTransition(()=>{h(at=>Re(at,te=>{te[t]=tt})),Ot(t)})}},[N,X,B]);const G=tt=>{tt.findIndex(at=>at.i==="shadow_block")<0&&(d(at=>A(_({},at),{[P]:tt})),j.startTransition(()=>{h(at=>Re(at,te=>{te[t]&&(te[t][P]=tt)}))}))},U=(tt,at)=>{const te=mh(V.fieldData,"repeater");if(!te)return;const{newLayouts:zt}=ig(c,te,V.fieldSize,at);d(zt),j.startTransition(()=>{h(Oe=>Re(Oe,Fs=>{Fs[t]=zt})),D(!0),Ot(t)})},H=yt(`.${t}-rpt-wrp`),Y=H&&Wc(H),ot=Y?Y.width-(Y.paddingLeft+Y.paddingRight+Y.borderLeft+Y.borderRight):0,rt=yt(`.${t}-pair-btn-wrp`),lt=rt&&Wc(rt),bt=lt&&["row","row-reverse"].includes($)?lt.width:0,J=yt(`.${t}-rpt-grid-wrp`),st=J&&Wc(J),ct=ot-bt-(st?st.paddingLeft+st.paddingRight+st.borderLeft+st.borderRight:0),mt=()=>{f({}),L(!1)},dt=()=>{W(F.pathname.replace(/style\/.+|style/g,"fs"),{replace:!0}),mt()},si=tt=>{W(`/form/builder/${n}/${i}/field-theme-customize/quick-tweaks/${tt}`,{replace:!0}),mt()},Yn=(tt,at)=>{tt.preventDefault(),tt.stopPropagation(),be(tt,at)},K=(tt,at)=>{tt.stopPropagation(),g(at),Ho(u)||f({}),nt(),!v&&W(`/form/builder/${n}/${i}/field-settings/${at}`)},nt=()=>{Ho(C)||(x.current!==null&&clearTimeout(x.current),x.current=setTimeout(()=>{w({}),x.current=null},700))},be=(tt,at)=>{var yf;const{button:te}=tt;let zt,Oe,Fs,Qn;const Jn=R.current.getBoundingClientRect().top+window.scrollY,hn=R.current.getBoundingClientRect().left+window.scrollX,_o=yt("#layout-wrapper"),wo=Number(_o.style.width.match(/\d+/gi)),Cf=Number(_o.style.height.match(/\d+/gi)),Of=170,yc=200;if(te===0){const Lf=(yf=yt(`[data-key="${at}"]`))==null?void 0:yf.querySelector(".blk-wrp-down-btn"),Au=30,Af=Lf.getBoundingClientRect().top+Au,Mf=Lf.getBoundingClientRect().left;if(zt=Mf-hn+5,Oe=Af-Jn+2,Fs=zt+Of>wo,Qn=Oe+yc>Cf,Fs&&(zt=Mf+Au-hn-148),Qn&&(Oe=Af-Jn-(yc+Au+7)),E!==at&&(zt+=3),O&&u.fldKey===at&&u.x===zt&&u.y===Oe){mt();return}}else te===2&&(zt=tt.clientX-hn+5,Oe=tt.clientY-Jn,Fs=zt+Of>wo,Qn=Oe+yc>Cf,Fs&&(zt=tt.clientX-hn-150),Qn&&(Oe=tt.clientY-Jn-yc));g(at),f({fldKey:at,x:zt,y:Oe}),L(!0)},Vt=tt=>{if(!Jm){b(_({show:!0},Km.fieldClone));return}const at=I[tt];if(!mh(at))return;const{newLayouts:te}=ng(tt,c);d(te),j.startTransition(()=>{h(zt=>Re(zt,Oe=>{Oe[t]=te})),Ot(t)})},Ce=tt=>{const at=rg(tt,c);d(at),j.startTransition(()=>{h(te=>Re(te,zt=>{zt[t]=at})),Ot(t)}),W(`/form/builder/${n}/${i}/fields-list`,{replace:!0})};return p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:a}),p.jsx(Ut,{formID:i,fieldKey:t,fieldData:e,noErrMsg:!0,children:p.jsx("div",A(_({"data-testid":`${t}-inp-fld-wrp`,"data-dev-inp-fld-wrp":t,className:`${t}-inp-fld-wrp ${S(t,"inp-fld-wrp")}`},M(t,"inp-fld-wrp")),{children:p.jsxs("div",A(_({"data-testid":`${t}-rpt-fld-wrp`,"data-dev-rpt-fld-wrp":t,className:`${t}-rpt-fld-wrp ${S(t,"rpt-fld-wrp")}`},M(t,"rpt-fld-wrp")),{children:[p.jsxs("div",A(_({"data-testid":`${t}-rpt-wrp`,"data-dev-rpt-wrp":t,className:`${t}-rpt-wrp ${S(t,"rpt-wrp")}`},M(t,"rpt-wrp")),{children:[p.jsx("div",A(_({"data-testid":`${t}-rpt-grid-wrp`,"data-dev-rpt-grid-wrp":t,className:`${t}-rpt-grid-wrp ${S(t,"rpt-grid-wrp")}`},M(t,"rpt-grid-wrp")),{children:p.jsxs("div",{style:{width:ct,display:"inline-block"},id:`${t}-layout-wrapper`,onDragOver:tt=>tt.preventDefault(),onDragEnter:tt=>tt.preventDefault(),onMouseMove:()=>j.startTransition(()=>{D(!1)}),onMouseLeave:()=>j.startTransition(()=>{D(!0)}),children:[v?p.jsx("div",{className:"_frm-g",children:(Xn=c[P])==null?void 0:Xn.map(tt=>p.jsx("div",{"data-key":tt.i,className:tt.i,onClick:at=>K(at,tt.i),onKeyDown:at=>K(at,tt.i),role:"button",tabIndex:0,onContextMenu:at=>Yn(at,tt.i),children:p.jsx(j.Suspense,{fallback:p.jsx(Eh,{layout:tt}),children:p.jsx(Ch,{layoutItem:tt,removeLayoutItem:Ce,cloneLayoutItem:Vt,fields:I,formID:i,navigateToFieldSettings:dt,navigateToStyle:si,handleContextMenu:Yn,resizingFld:C})})},tt.i))}):p.jsx(ag,{width:ct,measureBeforeMount:!0,compactType:"vertical",useCSSTransforms:!0,isDroppable:V!==null&&P==="lg",className:"layout",style:{minHeight:V?Qm()+40:null},onDrop:U,resizeHandles:["e"],droppingItem:V==null?void 0:V.fieldSize,onLayoutChange:G,cols:60,rowHeight:1,margin:[0,0],draggableCancel:".no-drg",draggableHandle:".drag",layout:c[P]||[],onDragStart:gh,onDragStop:()=>{j.startTransition(()=>{D(!0),Ot(t),nt()})},onResizeStart:gh,onResize:ju,onResizeStop:()=>{nt(),Ot(t)},children:(Oi=c[P])==null?void 0:Oi.map(tt=>p.jsx("div",{"data-key":tt.i,className:`blk ${tt.i===E&&"itm-focus"}`,onClick:at=>K(at,tt.i),onKeyDown:at=>K(at,tt.i),role:"button",tabIndex:0,onContextMenu:at=>Yn(at,tt.i),children:p.jsx(j.Suspense,{fallback:p.jsx(Eh,{layout:tt}),children:p.jsx(Ch,{layoutItem:tt,removeLayoutItem:Ce,cloneLayoutItem:Vt,fields:I,formID:i,navigateToFieldSettings:dt,navigateToStyle:si,handleContextMenu:Yn,resizingFld:C})})},tt.i))}),!((Zn=c[P])!=null&&Zn.length)&&!V&&p.jsx("div",{className:"empty-layout",children:p.jsx("div",{className:"empty-layout-msg",children:p.jsx("div",{className:"empty-layout-msg-txt",children:p.jsx("span",{children:"Drag and drop fields here"})})})})]})})),p.jsxs("div",A(_({"data-testid":`${t}-pair-btn-wrp`,"data-dev-pair-btn-wrp":t,className:`${t}-pair-btn-wrp ${S(t,"pair-btn-wrp")}`},M(t,"pair-btn-wrp")),{children:[e.addBtn.show&&p.jsxs("button",A(_({"data-testid":t,"data-dev-rpt-add-btn":t,className:`${t}-rpt-add-btn ${S(t,"rpt-add-btn")}`},M(t,"rpt-add-btn")),{type:"button",children:[e.addBtnPreIcn&&p.jsx("img",_({"data-testid":`${t}-rpt-add-btn-pre-i`,"data-dev-rpt-add-btn-pre-i":t,className:`${t}-rpt-add-btn-pre-i ${S(t,"rpt-add-btn-pre-i")}`,src:`${e.addBtnPreIcn}`,alt:""},M(t,"rpt-add-btn-pre-i"))),p.jsx(ms,{html:e.addBtn.txt||""}),e.addBtnSufIcn&&p.jsx("img",_({"data-testid":`${t}-rpt-add-btn-suf-i`,"data-dev-rpt-add-btn-suf-i":t,className:`${t}-rpt-add-btn-suf-i ${S(t,"rpt-add-btn-suf-i")}`,src:e.addBtnSufIcn,alt:""},M(t,"rpt-add-btn-suf-i")))]})),p.jsxs("button",A(_({"data-testid":t,"data-dev-rpt-rmv-btn":t,className:`${t}-rpt-rmv-btn ${S(t,"rpt-rmv-btn")}`},M(t,"rpt-rmv-btn")),{type:"button",children:[e.removeBtnPreIcn&&p.jsx("img",_({"data-testid":`${t}-rpt-rmv-btn-pre-i`,"data-dev-rpt-rmv-btn-pre-i":t,className:`${t}-rpt-rmv-btn-pre-i ${S(t,"rpt-rmv-btn-pre-i")}`,src:`${e.removeBtnPreIcn}`,alt:""},M(t,"rpt-rmv-btn-pre-i"))),p.jsx(ms,{html:e.removeBtn.txt||""}),e.removeBtnSufIcn&&p.jsx("img",_({"data-testid":`${t}-rpt-rmv-btn-suf-i`,"data-dev-rpt-rmv-btn-suf-i":t,className:`${t}-rpt-rmv-btn-suf-i ${S(t,"rpt-rmv-btn-suf-i")}`,src:e.removeBtnSufIcn,alt:""},M(t,"rpt-btn-btn-suf-i")))]}))]}))]})),e.addToEndBtn.show&&p.jsx("div",A(_({"data-testid":`${t}-add-to-end-btn-wrp`,"data-dev-add-to-end-btn-wrp":t,className:`${t}-add-to-end-btn-wrp ${S(t,"add-to-end-btn-wrp")}`},M(t,"add-to-end-btn-wrp")),{children:p.jsxs("button",A(_({"data-testid":t,"data-dev-add-to-end-btn":t,className:`${t}-add-to-end-btn ${S(t,"add-to-end-btn")}`},M(t,"add-to-end-btn")),{type:"button",children:[e.addToEndBtnPreIcn&&p.jsx("img",_({"data-testid":`${t}-add-to-end-btn-pre-i`,"data-dev-add-to-end-btn-pre-i":t,className:`${t}-add-to-end-btn-pre-i ${S(t,"add-to-end-btn-pre-i")}`,src:e.addToEndBtnPreIcn,alt:""},M(t,"add-to-end-btn-pre-i"))),p.jsx(ms,{html:e.addToEndBtn.txt||""}),e.addToEndBtnSufIcn&&p.jsx("img",_({"data-testid":`${t}-add-to-end-btn-suf-i`,"data-dev-add-to-end-btn-suf-i":t,className:`${t}-add-to-end-btn-suf-i ${S(t,"add-to-end-btn-suf-i")}`,src:e.addToEndBtnSufIcn,alt:""},M(t,"add-to-end-btn-suf-i")))]}))}))]}))}))})]})}var PS=j.memo(NS);function DS({fieldKey:t,attr:e,styleClasses:s,formID:i}){var si,Yn;const{formType:n}=_u(),a=kr(s),[o,h]=rn(jm),[c,d]=j.useState(kr(o[t])),[u,f]=rn(Um),[E,g]=rn(Vm),b=an(zm),I=et(oe),{styleMode:v}=et(cn),[C,w]=rn(mo),x=j.useRef(null),{ref:R,isComponentVisible:O,setIsComponentVisible:L}=et(Wm),P=et(fo),y=et(lf),D=an(Hm),V=et(qm),{recalculateNestedField:k}=y,{fieldKey:B,parentFieldKey:X,counter:N}=k,W=Ym(),F=Xm();j.useEffect(()=>{if(N>0&&t===X){const K=Zm(c,B);d(K),j.startTransition(()=>{h(nt=>Re(nt,be=>{be[t]=K})),Ot(t)})}},[N,X,B]);const $=K=>{K.findIndex(nt=>nt.i==="shadow_block")<0&&(d(nt=>A(_({},nt),{[P]:K})),j.startTransition(()=>{h(nt=>Re(nt,be=>{be[t][P]=K}))}))},G=(K,nt)=>{const be=mh(V.fieldData,"section");if(!be)return;const{newLayouts:Vt}=ig(c,be,V.fieldSize,nt);d(Vt),j.startTransition(()=>{D(!0),h(Ce=>Re(Ce,Oi=>{Oi[t]=Vt})),Ot(t)})},U=yt(`.${t}-inp-fld-wrp`),H=U&&Wc(U),Y=H?H.width-(H.paddingLeft+H.paddingRight+H.borderLeft+H.borderRight):0,ot=()=>{f({}),L(!1)},rt=()=>{W(F.pathname.replace(/style\/.+|style/g,"fs"),{replace:!0}),ot()},lt=K=>{W(`/form/builder/${n}/${i}/field-theme-customize/quick-tweaks/${K}`,{replace:!0}),ot()},bt=(K,nt)=>{K.preventDefault(),K.stopPropagation(),ct(K,nt)},J=(K,nt)=>{K.stopPropagation(),g(nt),Ho(u)||f({}),st(),!v&&W(`/form/builder/${n}/${i}/field-settings/${nt}`)},st=()=>{Ho(C)||(x.current!==null&&clearTimeout(x.current),x.current=setTimeout(()=>{w({}),x.current=null},700))},ct=(K,nt)=>{var Qn;const{button:be}=K;let Vt,Ce,Oi,Xn;const Zn=R.current.getBoundingClientRect().top+window.scrollY,tt=R.current.getBoundingClientRect().left+window.scrollX,at=yt("#layout-wrapper"),te=Number(at.style.width.match(/\d+/gi)),zt=Number(at.style.height.match(/\d+/gi)),Oe=170,Fs=200;if(be===0){const Jn=(Qn=yt(`[data-key="${nt}"]`))==null?void 0:Qn.querySelector(".blk-wrp-down-btn"),hn=30,_o=Jn.getBoundingClientRect().top+hn,wo=Jn.getBoundingClientRect().left;if(Vt=wo-tt+5,Ce=_o-Zn+2,Oi=Vt+Oe>te,Xn=Ce+Fs>zt,Oi&&(Vt=wo+hn-tt-148),Xn&&(Ce=_o-Zn-(Fs+hn+7)),E!==nt&&(Vt+=3),O&&u.fldKey===nt&&u.x===Vt&&u.y===Ce){ot();return}}else be===2&&(Vt=K.clientX-tt+5,Ce=K.clientY-Zn,Oi=Vt+Oe>te,Xn=Ce+Fs>zt,Oi&&(Vt=K.clientX-tt-150),Xn&&(Ce=K.clientY-Zn-Fs));g(nt),f({fldKey:nt,x:Vt,y:Ce}),L(!0)},mt=K=>{if(!Jm){b(_({show:!0},Km.fieldClone));return}const nt=I[K];if(!mh(nt))return;const{newLayouts:be}=ng(K,c);d(be),j.startTransition(()=>{h(Vt=>Re(Vt,Ce=>{Ce[t]=be})),Ot(t)})},dt=K=>{const nt=rg(K,c);d(nt),j.startTransition(()=>{h(be=>Re(be,Vt=>{Vt[t]=nt})),Ot()}),W(`/form/builder/${n}/${i}/fields-list`,{replace:!0})};return p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:a}),p.jsx(Ut,{formID:i,fieldKey:t,fieldData:e,noErrMsg:!0,children:p.jsx("div",A(_({"data-testid":`${t}-inp-fld-wrp`,"data-dev-inp-fld-wrp":t,className:`${t}-inp-fld-wrp ${S(t,"inp-fld-wrp")}`},M(t,"inp-fld-wrp")),{children:p.jsxs("div",{style:{width:Y,display:"inline-block"},id:`${t}-layout-wrapper`,onDragOver:K=>K.preventDefault(),onDragEnter:K=>K.preventDefault(),onMouseMove:()=>j.startTransition(()=>{D(!1)}),onMouseLeave:()=>j.startTransition(()=>{D(!0)}),children:[v?p.jsx("div",{className:"_frm-g",children:c[P].map(K=>p.jsx("div",{"data-key":K.i,className:K.i,onClick:nt=>J(nt,K.i),onKeyDown:nt=>J(nt,K.i),role:"button",tabIndex:0,onContextMenu:nt=>bt(nt,K.i),children:p.jsx(j.Suspense,{fallback:p.jsx(Eh,{layout:K}),children:p.jsx(Ch,{layoutItem:K,removeLayoutItem:dt,cloneLayoutItem:mt,navigateToFieldSettings:rt,navigateToStyle:lt,handleContextMenu:bt})})},K.i))}):p.jsx(ag,{width:Y,measureBeforeMount:!0,compactType:"vertical",useCSSTransforms:!0,isDroppable:V!==null&&P==="lg",className:"layout",style:{minHeight:V?Qm()+40:null},onDrop:G,resizeHandles:["e"],droppingItem:V==null?void 0:V.fieldSize,onLayoutChange:$,cols:Zb[P],rowHeight:1,margin:[0,0],draggableCancel:".no-drg",draggableHandle:".drag",layout:c[P],onDragStart:gh,onDrag:ju,onDragStop:()=>{j.startTransition(()=>{D(!0),Ot(t),st()})},onResizeStart:gh,onResize:ju,onResizeStop:()=>{st(),Ot(t)},children:(si=c[P])==null?void 0:si.map(K=>p.jsx("div",{"data-key":K.i,className:`blk ${K.i===E&&"itm-focus"}`,onClick:nt=>J(nt,K.i),onKeyDown:nt=>J(nt,K.i),role:"button",tabIndex:0,onContextMenu:nt=>bt(nt,K.i),children:p.jsx(j.Suspense,{fallback:p.jsx(Eh,{layout:K}),children:p.jsx(Ch,{layoutItem:K,removeLayoutItem:dt,cloneLayoutItem:mt,navigateToFieldSettings:rt,navigateToStyle:lt,handleContextMenu:bt})})},K.i))}),!((Yn=c[P])!=null&&Yn.length)&&!V&&p.jsx("div",{className:"empty-layout",children:p.jsx("div",{className:"empty-layout-msg",children:p.jsx("div",{className:"empty-layout-msg-txt",children:p.jsx("span",{children:"Drag and drop fields here"})})})})]})}))})]})}var FS=j.memo(DS);/*!
* Signature Pad v4.1.5 | https://github.com/szimek/signature_pad
* (c) 2023 Szymon Nowak | Released under the MIT license
*/class Sh{constructor(e,s,i,n){if(isNaN(e)||isNaN(s))throw new Error(`Point is invalid: (${e}, ${s})`);this.x=+e,this.y=+s,this.pressure=i||0,this.time=n||Date.now()}distanceTo(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}equals(e){return this.x===e.x&&this.y===e.y&&this.pressure===e.pressure&&this.time===e.time}velocityFrom(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0}}class Rf{constructor(e,s,i,n,a,o){this.startPoint=e,this.control2=s,this.control1=i,this.endPoint=n,this.startWidth=a,this.endWidth=o}static fromPoints(e,s){const i=this.calculateControlPoints(e[0],e[1],e[2]).c2,n=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new Rf(e[1],i,n,e[2],s.start,s.end)}static calculateControlPoints(e,s,i){const n=e.x-s.x,a=e.y-s.y,o=s.x-i.x,h=s.y-i.y,c={x:(e.x+s.x)/2,y:(e.y+s.y)/2},d={x:(s.x+i.x)/2,y:(s.y+i.y)/2},u=Math.sqrt(n*n+a*a),f=Math.sqrt(o*o+h*h),E=c.x-d.x,g=c.y-d.y,b=f/(u+f),I={x:d.x+E*b,y:d.y+g*b},v=s.x-I.x,C=s.y-I.y;return{c1:new Sh(c.x+v,c.y+C),c2:new Sh(d.x+v,d.y+C)}}length(){let s=0,i,n;for(let a=0;a<=10;a+=1){const o=a/10,h=this.point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),c=this.point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){const d=h-i,u=c-n;s+=Math.sqrt(d*d+u*u)}i=h,n=c}return s}point(e,s,i,n,a){return s*(1-e)*(1-e)*(1-e)+3*i*(1-e)*(1-e)*e+3*n*(1-e)*e*e+a*e*e*e}}class GS{constructor(){try{this._et=new EventTarget}catch(e){this._et=document}}addEventListener(e,s,i){this._et.addEventListener(e,s,i)}dispatchEvent(e){return this._et.dispatchEvent(e)}removeEventListener(e,s,i){this._et.removeEventListener(e,s,i)}}function BS(t,e=250){let s=0,i=null,n,a,o;const h=()=>{s=Date.now(),i=null,n=t.apply(a,o),i||(a=null,o=[])};return function(...d){const u=Date.now(),f=e-(u-s);return a=this,o=d,f<=0||f>e?(i&&(clearTimeout(i),i=null),s=u,n=t.apply(a,o),i||(a=null,o=[])):i||(i=window.setTimeout(h,f)),n}}class Rh extends GS{constructor(e,s={}){super(),this.canvas=e,this._drawningStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this._handleMouseDown=i=>{i.buttons===1&&(this._drawningStroke=!0,this._strokeBegin(i))},this._handleMouseMove=i=>{this._drawningStroke&&this._strokeMoveUpdate(i)},this._handleMouseUp=i=>{i.buttons===1&&this._drawningStroke&&(this._drawningStroke=!1,this._strokeEnd(i))},this._handleTouchStart=i=>{if(i.cancelable&&i.preventDefault(),i.targetTouches.length===1){const n=i.changedTouches[0];this._strokeBegin(n)}},this._handleTouchMove=i=>{i.cancelable&&i.preventDefault();const n=i.targetTouches[0];this._strokeMoveUpdate(n)},this._handleTouchEnd=i=>{if(i.target===this.canvas){i.cancelable&&i.preventDefault();const a=i.changedTouches[0];this._strokeEnd(a)}},this._handlePointerStart=i=>{this._drawningStroke=!0,i.preventDefault(),this._strokeBegin(i)},this._handlePointerMove=i=>{this._drawningStroke&&(i.preventDefault(),this._strokeMoveUpdate(i))},this._handlePointerEnd=i=>{this._drawningStroke&&(i.preventDefault(),this._drawningStroke=!1,this._strokeEnd(i))},this.velocityFilterWeight=s.velocityFilterWeight||.7,this.minWidth=s.minWidth||.5,this.maxWidth=s.maxWidth||2.5,this.throttle="throttle"in s?s.throttle:16,this.minDistance="minDistance"in s?s.minDistance:5,this.dotSize=s.dotSize||0,this.penColor=s.penColor||"black",this.backgroundColor=s.backgroundColor||"rgba(0,0,0,0)",this._strokeMoveUpdate=this.throttle?BS(Rh.prototype._strokeUpdate,this.throttle):Rh.prototype._strokeUpdate,this._ctx=e.getContext("2d"),this.clear(),this.on()}clear(){const{_ctx:e,canvas:s}=this;e.fillStyle=this.backgroundColor,e.clearRect(0,0,s.width,s.height),e.fillRect(0,0,s.width,s.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(e,s={}){return new Promise((i,n)=>{const a=new Image,o=s.ratio||window.devicePixelRatio||1,h=s.width||this.canvas.width/o,c=s.height||this.canvas.height/o,d=s.xOffset||0,u=s.yOffset||0;this._reset(this._getPointGroupOptions()),a.onload=()=>{this._ctx.drawImage(a,d,u,h,c),i()},a.onerror=f=>{n(f)},a.crossOrigin="anonymous",a.src=e,this._isEmpty=!1})}toDataURL(e="image/png",s){switch(e){case"image/svg+xml":return typeof s!="object"&&(s=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(s))}`;default:return typeof s!="number"&&(s=void 0),this.canvas.toDataURL(e,s)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const e=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!e?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(e,{clear:s=!0}={}){s&&this.clear(),this._fromData(e,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(e)}toData(){return this._data}_getPointGroupOptions(e){return{penColor:e&&"penColor"in e?e.penColor:this.penColor,dotSize:e&&"dotSize"in e?e.dotSize:this.dotSize,minWidth:e&&"minWidth"in e?e.minWidth:this.minWidth,maxWidth:e&&"maxWidth"in e?e.maxWidth:this.maxWidth,velocityFilterWeight:e&&"velocityFilterWeight"in e?e.velocityFilterWeight:this.velocityFilterWeight}}_strokeBegin(e){this.dispatchEvent(new CustomEvent("beginStroke",{detail:e}));const s=this._getPointGroupOptions(),i=Object.assign(Object.assign({},s),{points:[]});this._data.push(i),this._reset(s),this._strokeUpdate(e)}_strokeUpdate(e){if(this._data.length===0){this._strokeBegin(e);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:e}));const s=e.clientX,i=e.clientY,n=e.pressure!==void 0?e.pressure:e.force!==void 0?e.force:0,a=this._createPoint(s,i,n),o=this._data[this._data.length-1],h=o.points,c=h.length>0&&h[h.length-1],d=c?a.distanceTo(c)<=this.minDistance:!1,u=this._getPointGroupOptions(o);if(!c||!(c&&d)){const f=this._addPoint(a,u);c?f&&this._drawCurve(f,u):this._drawDot(a,u),h.push({time:a.time,x:a.x,y:a.y,pressure:a.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:e}))}_strokeEnd(e){this._strokeUpdate(e),this.dispatchEvent(new CustomEvent("endStroke",{detail:e}))}_handlePointerEvents(){this._drawningStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawningStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(e){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(e.minWidth+e.maxWidth)/2,this._ctx.fillStyle=e.penColor}_createPoint(e,s,i){const n=this.canvas.getBoundingClientRect();return new Sh(e-n.left,s-n.top,i,new Date().getTime())}_addPoint(e,s){const{_lastPoints:i}=this;if(i.push(e),i.length>2){i.length===3&&i.unshift(i[0]);const n=this._calculateCurveWidths(i[1],i[2],s),a=Rf.fromPoints(i,n);return i.shift(),a}return null}_calculateCurveWidths(e,s,i){const n=i.velocityFilterWeight*s.velocityFrom(e)+(1-i.velocityFilterWeight)*this._lastVelocity,a=this._strokeWidth(n,i),o={end:a,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=a,o}_strokeWidth(e,s){return Math.max(s.maxWidth/(e+1),s.minWidth)}_drawCurveSegment(e,s,i){const n=this._ctx;n.moveTo(e,s),n.arc(e,s,i,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(e,s){const i=this._ctx,n=e.endWidth-e.startWidth,a=Math.ceil(e.length())*2;i.beginPath(),i.fillStyle=s.penColor;for(let o=0;o<a;o+=1){const h=o/a,c=h*h,d=c*h,u=1-h,f=u*u,E=f*u;let g=E*e.startPoint.x;g+=3*f*h*e.control1.x,g+=3*u*c*e.control2.x,g+=d*e.endPoint.x;let b=E*e.startPoint.y;b+=3*f*h*e.control1.y,b+=3*u*c*e.control2.y,b+=d*e.endPoint.y;const I=Math.min(e.startWidth+d*n,s.maxWidth);this._drawCurveSegment(g,b,I)}i.closePath(),i.fill()}_drawDot(e,s){const i=this._ctx,n=s.dotSize>0?s.dotSize:(s.minWidth+s.maxWidth)/2;i.beginPath(),this._drawCurveSegment(e.x,e.y,n),i.closePath(),i.fillStyle=s.penColor,i.fill()}_fromData(e,s,i){for(const n of e){const{points:a}=n,o=this._getPointGroupOptions(n);if(a.length>1)for(let h=0;h<a.length;h+=1){const c=a[h],d=new Sh(c.x,c.y,c.pressure,c.time);h===0&&this._reset(o);const u=this._addPoint(d,o);u&&s(u,o)}else this._reset(o),i(a[0],o)}}toSVG({includeBackgroundColor:e=!1}={}){const s=this._data,i=Math.max(window.devicePixelRatio||1,1),n=0,a=0,o=this.canvas.width/i,h=this.canvas.height/i,c=document.createElementNS("http://www.w3.org/2000/svg","svg");if(c.setAttribute("xmlns","http://www.w3.org/2000/svg"),c.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),c.setAttribute("viewBox",`${n} ${a} ${o} ${h}`),c.setAttribute("width",o.toString()),c.setAttribute("height",h.toString()),e&&this.backgroundColor){const d=document.createElement("rect");d.setAttribute("width","100%"),d.setAttribute("height","100%"),d.setAttribute("fill",this.backgroundColor),c.appendChild(d)}return this._fromData(s,(d,{penColor:u})=>{const f=document.createElement("path");if(!isNaN(d.control1.x)&&!isNaN(d.control1.y)&&!isNaN(d.control2.x)&&!isNaN(d.control2.y)){const E=`M ${d.startPoint.x.toFixed(3)},${d.startPoint.y.toFixed(3)} C ${d.control1.x.toFixed(3)},${d.control1.y.toFixed(3)} ${d.control2.x.toFixed(3)},${d.control2.y.toFixed(3)} ${d.endPoint.x.toFixed(3)},${d.endPoint.y.toFixed(3)}`;f.setAttribute("d",E),f.setAttribute("stroke-width",(d.endWidth*2.25).toFixed(3)),f.setAttribute("stroke",u),f.setAttribute("fill","none"),f.setAttribute("stroke-linecap","round"),c.appendChild(f)}},(d,{penColor:u,dotSize:f,minWidth:E,maxWidth:g})=>{const b=document.createElement("circle"),I=f>0?f:(E+g)/2;b.setAttribute("r",I.toString()),b.setAttribute("cx",d.x.toString()),b.setAttribute("cy",d.y.toString()),b.setAttribute("fill",u),c.appendChild(b)}),c.outerHTML}}var $s,Tc,sn,Ns,Ps,ke,co,xc,ho,nn,Vn,gu,Sc,Rc,zn,Wn,ra,Eu,jb,bu,Ub,Iu,Vb,re,we;class kS{constructor(e,s){m(this,Wn);m(this,Eu);m(this,bu);m(this,Iu);m(this,re);m(this,$s,null);m(this,Tc,null);m(this,sn,null);m(this,Ns,null);m(this,Ps,null);m(this,ke,null);m(this,co,null);m(this,xc,{});m(this,ho,null);m(this,nn,null);m(this,Vn,null);m(this,gu,null);m(this,Sc,null);m(this,Rc,null);m(this,zn,[]);T(this,ho,s.document||document),typeof e=="string"?T(this,co,r(this,ho).querySelector(e)):T(this,co,e),T(this,xc,{maxWidth:s.maxWidth||2.5,penColor:s.penColor||"rgb(0, 0, 0)",backgroundColor:s.backgroundColor||"rgb(255, 255, 255)"}),T(this,nn,s.fieldKey),T(this,Tc,s.imgTyp||"image/png"),T(this,Rc,(s==null?void 0:s.isBuilder)||!1),T(this,gu,s==null?void 0:s.contentId),T(this,Sc,s==null?void 0:s.assetsURL),this.init()}init(){T(this,$s,l(this,Wn,ra).call(this,`.${r(this,nn)}-signature-pad`)),T(this,sn,l(this,Wn,ra).call(this,`.${r(this,nn)}-clr-btn`)),T(this,Ns,l(this,Wn,ra).call(this,`.${r(this,nn)}-undo-btn`)),T(this,Ps,l(this,Wn,ra).call(this,`.${r(this,nn)}-redo-btn`)),T(this,Vn,l(this,Wn,ra).call(this,`.${r(this,nn)}-signature-fld`)),r(this,$s).style.cursor=`url(${r(this,Sc)}pen.ico), crosshair`,T(this,ke,new Rh(r(this,$s),r(this,xc))),window.onresize=this.resizeCanvas,this.resizeCanvas(),l(this,Eu,jb).call(this),l(this,bu,Ub).call(this),l(this,Iu,Vb).call(this),l(this,re,we).call(this,r(this,Ns)),l(this,re,we).call(this,r(this,Ps)),l(this,re,we).call(this,r(this,sn)),r(this,ke).addEventListener("endStroke",()=>{T(this,zn,[]),this.putSignature(),l(this,re,we).call(this,r(this,sn),!1),l(this,re,we).call(this,r(this,Ns),!1),l(this,re,we).call(this,r(this,Ps))})}resizeCanvas(){const e=Math.max(window.devicePixelRatio||1,1);r(this,$s).width=r(this,$s).offsetWidth*e,r(this,$s).height=r(this,$s).offsetHeight*e,r(this,$s).getContext("2d").scale(e,e),r(this,ke).fromData(r(this,ke).toData())}putSignature(){if(r(this,Rc)||r(this,ke).isEmpty())return;const e=r(this,ke).toDataURL(r(this,Tc));r(this,Vn).value=e}destroy(){T(this,ho,null),T(this,$s,null)}reset(){r(this,ke).clear(),r(this,Vn).value=""}}$s=new WeakMap,Tc=new WeakMap,sn=new WeakMap,Ns=new WeakMap,Ps=new WeakMap,ke=new WeakMap,co=new WeakMap,xc=new WeakMap,ho=new WeakMap,nn=new WeakMap,Vn=new WeakMap,gu=new WeakMap,Sc=new WeakMap,Rc=new WeakMap,zn=new WeakMap,Wn=new WeakSet,ra=function(e,s=null){return(s||r(this,co)).querySelector(e)},Eu=new WeakSet,jb=function(){r(this,sn)&&r(this,sn).addEventListener("click",()=>{r(this,ke).clear(),r(this,Vn).value="",l(this,re,we).call(this,r(this,Ns)),l(this,re,we).call(this,r(this,Ps)),l(this,re,we).call(this,r(this,sn))})},bu=new WeakSet,Ub=function(){r(this,Ns)&&r(this,Ns).addEventListener("click",()=>{const e=r(this,ke).toData();if(e.length){const s=e.pop();r(this,zn).push(s),r(this,ke).fromData(e),this.putSignature(),e.length===0&&(r(this,Vn).value=""),l(this,re,we).call(this,r(this,Ps),!1),e.length||l(this,re,we).call(this,r(this,Ns))}else l(this,re,we).call(this,r(this,Ns))})},Iu=new WeakSet,Vb=function(){r(this,Ps)&&r(this,Ps).addEventListener("click",()=>{const e=r(this,ke).toData();r(this,zn).length?(e.push(r(this,zn).pop()),r(this,ke).fromData(e),this.putSignature(),l(this,re,we).call(this,r(this,Ns),!1),r(this,zn).length||l(this,re,we).call(this,r(this,Ps))):l(this,re,we).call(this,r(this,Ps))})},re=new WeakSet,we=function(e,s=!0){e&&(s?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled"))};function jS({fieldKey:t,attr:e,formID:s,styleClasses:i}){const n=j.useRef(null),a=j.useRef(null),o=et(Cc),h=et(mo),c=j.useRef({resize:!1}),d=an(wu),u=j.useRef(null),f=j.useRef(0),g=et(oe)[t];if(h.fieldKey===t){c.current.resize=!0;const b=yt(`[data-key="${t}"]`),I=tg(b);if(h.wrpHeight>=h.fldHeight){const v=`${h.fldHeight+(I-h.wrpHeight)}px`;a.current.style.height=v}}if(c.current.resize&&!h.fieldKey){c.current.resize=!1;const b=I=>`fields->${t}->classes->.${t}-fld->${I}`;d(I=>Re(I,v=>{aa(v,b("height"),a.current.style.height),f.current+=1}))}return j.useEffect(()=>{var R;a.current||(u.current=yt(`.${t}-inp-fld-wrp`));const b=n.current,I=u.current;b&&I&&"destroy"in b&&b.destroy();const{maxWidth:v,penColor:C,backgroundColor:w}=g.config,x={maxWidth:v,penColor:C,backgroundColor:w,document:(R=document.getElementById("bit-grid-layout"))==null?void 0:R.contentDocument,fieldKey:t,assetsURL:`${o.assetsURL}/../static/signature/`,isBuilder:!0};n.current=new kS(I,x)},[g,f.current]),p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:i}),p.jsx(Ut,{formID:s,fieldKey:t,fieldData:e,children:p.jsxs("div",A(_({"data-testid":`${t}-inp-fld-wrp`,"data-dev-inp-fld-wrp":t,className:`${t}-inp-fld-wrp ${S(t,"inp-fld-wrp")}`},M(t,"inp-fld-wrp")),{ref:u,children:[p.jsx("canvas",A(_({ref:a,className:`${t}-signature-pad ${S(t,"signature")}`,id:"canvas"},M(t,"signature-pad")),{"data-testid":`${t}-signature-pad`,"data-dev-fld":t})),p.jsxs("div",{className:`${t}-ctrl`,children:[!(g!=null&&g.clrBtnHide)&&p.jsxs("button",{id:"clear",className:`${t}-clr-btn`,type:"button","data-testid":`${t}-clr-btn`,"data-dev-clr-btn":t,children:[g.clrPreIcn&&p.jsx("img",_({"data-testid":`${t}-clr-btn-pre-i`,"data-dev-clr-btn-pre-i":t,className:`${t}-clr-btn-pre-i ${S(t,"clr-btn-pre-i")}`,src:g.clrPreIcn,alt:""},M(t,"clr-btn-pre-i"))),g.clrBtn,g.clrSufIcn&&p.jsx("img",_({"data-testid":`${t}-clr-btn-suf-i`,"data-dev-clr-btn-suf-i":t,className:`${t}-clr-btn-suf-i ${S(t,"clr-btn-suf-i")}`,src:g.clrSufIcn,alt:""},M(t,"clr-btn-suf-i")))]}),!(g!=null&&g.undoBtnHide)&&p.jsxs("button",{id:"undo",className:`${t}-undo-btn`,type:"button","data-testid":`${t}-undo-btn`,"data-dev-undo-btn":t,children:[(g==null?void 0:g.undoPreIcn)&&p.jsx("img",_({"data-testid":`${t}-undo-btn-pre-i`,"data-dev-undo-btn-pre-i":t,className:`${t}-undo-btn-pre-i ${S(t,"undo-btn-pre-i")}`,src:g.undoPreIcn,alt:""},M(t,"undo-btn-pre-i"))),g.undoBtn,(g==null?void 0:g.undoSufIcn)&&p.jsx("img",_({"data-testid":`${t}-undo-btn-suf-i`,"data-dev-btn-suf-i":t,className:`${t}-undo-btn-suf-i ${S(t,"undo-btn-suf-i")}`,src:g.undoSufIcn,alt:""},M(t,"undo-btn-suf-i")))]}),!(g!=null&&g.redoBtnHide)&&p.jsxs("button",{id:"redo",className:`${t}-redo-btn`,type:"button","data-testid":`${t}-redo-btn`,"data-dev-redo-btn":t,children:[(g==null?void 0:g.redoPreIcn)&&p.jsx("img",_({"data-testid":`${t}-redo-btn-pre-i`,"data-dev-redo-btn-pre-i":t,className:`${t}-redo-btn-pre-i ${S(t,"redo-btn-pre-i")}`,src:g.redoPreIcn,alt:""},M(t,"redo-btn-pre-i"))),g.redoBtn,(g==null?void 0:g.redoSufIcn)&&p.jsx("img",_({"data-testid":`${t}-redo-btn-suf-i`,"data-dev-btn-suf-i":t,className:`${t}-redo-btn-suf-i ${S(t,"redo-btn-suf-i")}`,src:g.redoSufIcn,alt:""},M(t,"redo-btn-suf-i")))]})]})]}))})]})}function US({fieldKey:t,formID:e,attr:s,isBuilder:i,styleClasses:n}){const a=et(nf),[o,h]=j.useState(""),d=et(oe)[t],u=j.useRef(null),f=j.useRef(null),[E,g]=j.useState(!1),[b,I]=j.useState(!1);d==null||d.payType;const{locale:v,currency:C}=d||{};return j.useEffect(()=>{if(!s.payIntegID){h("");return}const w=a==null?void 0:a.find(x=>x.id&&s.payIntegID&&Number(x.id)===Number(s.payIntegID));if(w){const x=w.publishableKey;console.log("key",x),h(x)}},[s.payIntegID]),j.useEffect(()=>{if(!o){rf({fieldKey:t,errorKey:"publishableKeyMissing",errorMsg:gn("Stripe publishable key is missing"),errorUrl:`field-settings/${t}`});return}I(!0),af(t,"publishableKeyMissing");const x={src:"https://js.stripe.com/v3/",integrity:"",id:`bf-stripe-script-${t}`,scriptInGrid:!1,callback:()=>{Ot(t),g(!0),I(!1)}};return vu(x),()=>{of(`bf-stripe-script-${t}`)}},[o,v,C]),j.useEffect(()=>{if(!E||b)return;u!=null&&u.current||(u.current=yt(`#${t}-stripe-wrp`));const w=f.current,x=u.current;if((!o||w&&x&&"destroy"in w)&&(w.destroy(),Ot(t)),!o)return g(!1);_({},d.config.options),_({},d.config.layout)},[E,b]),p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:n}),p.jsxs(Ut,{formID:e,fieldData:s,fieldKey:t,noLabel:!0,isBuilder:i,children:[E&&o&&!b&&p.jsxs("div",{className:`${t}-stripe-wrp`,children:[p.jsxs("button",{"data-dev-stripe-btn":t,type:"button",className:`${t}-stripe-btn`,children:[p.jsx("svg",{"data-dev-stripe-icn":t,xmlns:"http://www.w3.org/2000/svg",className:`${t}-stripe-icn`,viewBox:"0 0 24 24",children:p.jsxs("g",{fill:"none",fillRule:"evenodd",children:[p.jsx("path",{d:"M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z"}),p.jsx("path",{fill:"currentColor",d:"M6.936 3.715C8.326 2.567 10.24 2 12.404 2c1.746 0 3.49.275 5.259.981a1 1 0 0 1 .629.929v3.64c0 1.244-1.286 1.916-2.291 1.5c-1.198-.494-2.532-.759-3.597-.759c-.217 0-.386.016-.512.04c-.05.01-.089.02-.12.03c.089.072.25.17.528.29c.309.134.68.263 1.129.416l.061.02c.42.144.892.305 1.367.495c.99.396 2.094.954 2.95 1.882c.885.957 1.445 2.241 1.45 3.954v.003c0 2.065-.835 3.755-2.305 4.904C15.511 21.454 13.542 22 11.34 22a14.62 14.62 0 0 1-5.777-1.21a1 1 0 0 1-.604-.918V16.18c0-1.241 1.297-1.937 2.322-1.47c1.39.636 2.901 1.038 4.059 1.038c.497 0 .761-.073.87-.134a.255.255 0 0 0 .017-.01a.352.352 0 0 0 .005-.062v-.005a.34.34 0 0 0-.04-.05c-.084-.086-.25-.205-.56-.353a13.21 13.21 0 0 0-1.112-.444a146.78 146.78 0 0 0-.22-.08c-.373-.135-.782-.283-1.189-.448c-.973-.395-2.066-.935-2.916-1.81c-.882-.908-1.453-2.127-1.453-3.753c0-2.026.782-3.717 2.194-4.883ZM8.21 5.257c-.918.758-1.467 1.866-1.467 3.34c0 1.104.366 1.824.888 2.361c.555.571 1.334.985 2.233 1.349c.369.15.736.283 1.107.417l.234.085c.437.16.888.329 1.288.519c.713.34 1.74.97 1.74 2.213c0 .375-.083.744-.277 1.077a2.015 2.015 0 0 1-.766.74c-.561.314-1.243.39-1.85.39c-1.373 0-2.957-.408-4.38-.998v2.447c1.503.562 3.001.803 4.38.803c1.898 0 3.388-.473 4.381-1.249c.964-.754 1.537-1.852 1.538-3.327c-.005-1.234-.39-2.03-.92-2.602c-.556-.603-1.334-1.026-2.223-1.382c-.426-.17-.855-.316-1.285-.463l-.047-.017a17.654 17.654 0 0 1-1.278-.473c-.387-.168-.809-.387-1.142-.703c-.362-.344-.634-.819-.634-1.424c0-.72.328-1.323.936-1.683c.52-.308 1.157-.385 1.739-.385c1.203 0 2.597.259 3.888.728V4.608C15.002 4.177 13.717 4 12.404 4c-1.836 0-3.255.481-4.195 1.257Z"})]})}),d.txt]}),p.jsx("button",{type:"button","data-dev-stripe-pay-btn":t,className:"stripe-pay-btn",children:d.config.payBtnTxt})]}),!b&&(!E||!o)&&p.jsx("p",{children:"Select a config from field settings to render the Stripe."}),b&&p.jsx("p",{children:"Loading Stripe..."})]})]})}function VS({attr:t,buttonDisabled:e,handleReset:s,formID:i,fieldKey:n}){return p.jsx("div",A(_({className:`fld-wrp fld-wrp-${i} ${S(n,"fld-wrp")}`,"btcd-fld":"submit"},M(n,"fld-wrp")),{children:p.jsxs("div",A(_({className:`btcd-frm-sub ${t.align==="center"&&"j-c-c"} ${t.align==="right"&&"j-c-e"} ${S(n,"btcd-frm-sub")}`},M(n,"btcd-frm-sub")),{children:[p.jsxs("button",A(_({className:`btcd-sub-btn btcd-sub ${t.btnSiz==="md"&&"btcd-btn-md"} ${t.fulW&&"ful-w"} ${S(n,"btcd-sub-btn")}`,disabled:e,type:"submit"},M(n,"btcd-sub-btn")),{children:[t.subBtnTxt,e&&p.jsx(Qb,{clr:"currentColor",size:12,style:{display:"inline-block",marginLeft:5}})]})),"rstBtnTxt"in t&&p.jsx("button",A(_(_({className:`btcd-sub-btn btcd-rst ${t.btnSiz==="md"&&"btcd-btn-md"} ${t.fulW&&"ful-w"} ${S(n,"btcd-rst")}`,type:"button"},s&&{onClick:s}),M(n,"btcd-rst")),{children:t.rstBtnTxt}))]}))}))}function zS({fieldKey:t,attr:e,onBlurHandler:s,resetFieldValue:i,formID:n,styleClasses:a}){const[o,h]=j.useState(e.val),c=et(mo),d=j.useRef(null),u=j.useRef({resize:!1}),f=an(wu);if(c.fieldKey===t){u.current.resize=!0;const b=yt(`[data-key="${t}"]`),I=tg(b);if(c.wrpHeight>=c.fldHeight){const v=`${c.fldHeight+(I-c.wrpHeight)}px`;d.current.style.height=v}}if(u.current.resize&&!c.fieldKey){u.current.resize=!1;const b=I=>`fields->${t}->classes->.${t}-fld->${I}`;f(I=>Re(I,v=>{aa(v,b("height"),d.current.style.height)}))}j.useEffect(()=>{e.val!==void 0&&!e.userinput?h(e.val):!e.val&&!e.userinput?h(e.defaultValue||""):e.conditional&&h(e.val)},[e.val,e.defaultValue,e.userinput,e.conditional]),j.useEffect(()=>{i&&h("")},[i]),j.useEffect(()=>{if(e.hasWorkflow&&e.val===o&&s&&!e.userinput){const{current:b}=d;s(b)}},[o]);const E=b=>{h(b.target.value)};j.useEffect(()=>{const b=eg(`#${t}`);b&&sg(b,"value",(I,v)=>h(v))},[]);const g=b=>{xf({input:b.target})};return p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:a}),p.jsx(Ut,{formID:n,fieldKey:t,fieldData:e,children:p.jsxs("div",A(_({"data-testid":`${t}-inp-fld-wrp`,className:`${t}-inp-fld-wrp ${S(t,"inp-fld-wrp")}`},M(t,"inp-fld-wrp")),{children:[p.jsx("textarea",A(_(_(_(_(_(_(_(_(A(_({"data-testid":t,"data-dev-fld":t,id:t,className:`${t}-fld ${S(t,"fld")}`},M(t,"fld")),{ref:d}),"disabled"in e&&{disabled:e.disabled}),"readonly"in e&&{readOnly:e.readonly}),"ph"in e&&{placeholder:e.ph}),"ac"in e&&{autoComplete:e.ac}),"req"in e.valid&&{required:e.valid.req}),"disabled"in e.valid&&{readOnly:e.valid.disabled}),"name"in e&&{name:e.name}),s&&{onInput:s}),{onBlur:g,value:o,onChange:E})),e.prefixIcn&&p.jsx("img",_({"data-dev-pre-i":t,className:`${t}-pre-i ${S(t,"pre-i")}`,height:"90%",src:e.prefixIcn,alt:""},M(t,"pre-i"))),e.suffixIcn&&p.jsx("img",_({"data-dev-suf-i":t,className:`${t}-suf-i ${S(t,"suf-i")}`,height:"90%",src:e.suffixIcn,alt:""},M(t,"suf-i")))]}))})]})}function WS({fieldKey:t,attr:e,onBlurHandler:s,resetFieldValue:i,formID:n,styleClasses:a}){var E;const o=e.typ==="url"?"text":e.typ,h=j.useRef(null),[c,d]=j.useState(e.val!==void 0?e.val:"");j.useEffect(()=>{e.val!==void 0&&!e.userinput?d(e.val):!e.val&&!e.userinput?d(e.defaultValue||""):e.conditional&&d(e.val)},[e.val,e.defaultValue,e.userinput,e.conditional]),j.useEffect(()=>{i&&d("")},[i]),j.useEffect(()=>{if(e.hasWorkflow&&e.val===c&&s&&!e.userinput){const{current:g}=h;s(g)}},[c]);const u=g=>{const b=e.typ==="email"?g.target.value.toLowerCase():g.target.value;d(b)};j.useEffect(()=>{const g=eg(`#${t}`);g&&sg(g,"value",(b,I)=>d(e.typ==="email"?I.toLowerCase():I))},[]);const f=g=>xf({input:g.target});return p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:a}),p.jsxs(Ut,{formID:n,fieldKey:t,fieldData:e,children:[p.jsxs("div",A(_({"data-testid":`${t}-inp-fld-wrp`,className:`${t}-inp-fld-wrp ${S(t,"inp-fld-wrp")}`},M(t,"inp-fld-wrp")),{children:[p.jsx("input",_(A(_(_(_(_(_(_(_(_(_(_({"data-testid":t,"data-dev-fld":t,id:t,list:`${t}-datalist`,ref:h,className:`${t}-fld no-drg ${S(t,"fld")}`,type:o},"req"in e.valid&&{required:e.valid.req}),"disabled"in e.valid&&{disabled:e.valid.disabled}),"readonly"in e.valid&&{readOnly:e.valid.readonly}),"ph"in e&&{placeholder:e.ph}),"mn"in e&&{min:e.mn}),"mx"in e&&{max:e.mx}),"ac"in e&&{autoComplete:e.ac}),"name"in e&&{name:e.name}),"inputMode"in e&&{inputMode:e.inputMode}),s&&{onInput:s}),{onBlur:f,value:c,onChange:u}),M(t,"fld"))),e.prefixIcn&&p.jsx("img",_({"data-testid":`${t}-pre-i`,"data-dev-pre-i":t,className:`${t}-pre-i ${S(t,"pre-i")}`,height:"90%",src:e.prefixIcn,alt:""},M(t,"pre-i"))),e.suffixIcn&&p.jsx("img",_({"data-testid":`${t}-suf-i`,"data-dev-suf-i":t,className:`${t}-suf-i ${S(t,"suf-i")}`,height:"90%",src:e.suffixIcn,alt:""},M(t,"suf-i")))]})),((E=e.suggestions)==null?void 0:E.length)&&p.jsx("datalist",{id:`${t}-datalist`,children:e.suggestions.map(g=>p.jsx("option",{value:g.val||g.lbl,children:g.lbl},g.val||g.lbl))})]})]})}var HS=j.memo(WS);function qS({fieldKey:t,attr:e,styleClasses:s}){var x;const{logo:i,title:n,subtitle:a,titleHide:o,subtitleHide:h,titleTag:c,subTitleTag:d}=e,u=et(fo),{styleMode:f}=et(cn),E=((x=e.valid.hidden)==null?void 0:x.includes(u))||!1,g=(R,O,L,P,y)=>p.jsx(ms,{html:`<${R} data-dev-${L}=${t} className="${t}-${L} ${S(t,L)}">
  ${P}${O}${y}
</${R}>`}),b=R=>{const O=e.customAttributes[R];if(O==="")return;let L="";if(O){const P=O.length;let y=0;for(;y<P;)O[y].key&&O[y].value&&(L+=`${O[y].key}=${O[y].value} `),y+=1}return L},I=e.titlePreIcn?`<img data-dev-title-pre-i="${t}" ${b("title-pre-i")} classname="${t}-title-pre-i ${S(t,"title-pre-i")}"  src="${e.titlePreIcn}" alt="Title Leading Icon" />`:"",v=e.titleSufIcn?`<img data-dev-title-suf-i="${t}" ${b("title-suf-i")} classname="${t}-title-suf-i ${S(t,"title-suf-i")}" src="${e.titleSufIcn}" alt="Title Trailing Icon" />`:"",C=e.subTitlPreIcn?`<img data-dev-sub-titl-pre-i="${t}" ${b("sub-titl-pre-i")} classname="${t}-sub-titl-pre-i ${S(t,"sub-titl-pre-i")}" src="${e.subTitlPreIcn}" alt="Subtitle Leading Icon" />`:"",w=e.subTitlSufIcn?`<img data-dev-sub-titl-suf-i="${t}" ${b("sub-titl-suf-i")} classname="${t}-sub-titl-suf-i ${S(t,"sub-titl-suf-i")}" src="${e.subTitlSufIcn}" alt="Subtitle Trailing Icon" />`:"";return p.jsxs(p.Fragment,{children:[p.jsx(_t,{styleClasses:s}),p.jsxs("div",A(_({"data-dev-fld-wrp":t},M(t,"fld-wrp")),{className:`${t}-fld-wrp ${f?"":"drag"} ${E?"fld-hide":""} ${S(t,"fld-wrp")}`,children:[i&&p.jsx("img",_({"data-dev-logo":t,className:`${t}-logo ${S(t,"logo")}`,src:i,alt:"img"},M(t,"logo"))),p.jsxs("div",A(_({"data-dev-titl-wrp":t,className:`${t}-titl-wrp ${S(t,"titl-wrp")}`},M(t,"titl-wrp")),{children:[!o&&g(c,n,"title",I,v),!h&&g(d,a,"sub-titl",C,w)]}))]}))]})}function YS({atts:t,fieldKey:e,formID:s,onBlurHandler:i,resetFieldValue:n,handleReset:a,fieldData:o,buttonDisabled:h,contentID:c,isBuilder:d,entryID:u,handleFormValidationErrorMessages:f}){var g,b,I,v,C,w,x,R,O,L,P,y,D,V,k,B,X,N,W,F,$,G,U,H,Y,ot,rt;const E=et(wu);if(!(Ho(E)||!(t!=null&&t.typ))){switch(t==null?void 0:t.typ){case"text":case"number":case"password":case"username":case"email":case"url":case"date":case"datetime-local":case"time":case"month":case"week":case"color":return p.jsx(HS,{fieldKey:e,styleClasses:(g=E.fields[e])==null?void 0:g.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"textarea":return p.jsx(zS,{fieldKey:e,styleClasses:(b=E.fields[e])==null?void 0:b.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"check":return p.jsx(C0,{fieldKey:e,styleClasses:(I=E.fields[e])==null?void 0:I.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"radio":return p.jsx(OS,{fieldKey:e,styleClasses:(v=E.fields[e])==null?void 0:v.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"html-select":return p.jsx(hS,{fieldKey:e,styleClasses:(C=E.fields[e])==null?void 0:C.classes,isBuilder:d,formID:s,attr:t});case"select":return p.jsx(rS,{fieldKey:e,styleClasses:(w=E.fields[e])==null?void 0:w.classes,isBuilder:d,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"file-up":return p.jsx(oS,{fieldKey:e,styleClasses:(x=E.fields[e])==null?void 0:x.classes,formID:s,attr:t,entryID:u,resetFieldValue:n});case"advanced-file-up":return p.jsx(S0,{fieldKey:e,styleClasses:(R=E.fields[e])==null?void 0:R.classes,formID:s,attr:t,entryID:u,resetFieldValue:n});case"submit":return p.jsx(VS,{fieldKey:e,styleClasses:(O=E.fields[e])==null?void 0:O.classes,formID:s,attr:t,buttonDisabled:h,handleReset:a});case"hidden":return p.jsx(lS,{fieldKey:e,styleClasses:(L=E.fields[e])==null?void 0:L.classes,formID:s,attr:t});case"recaptcha":return p.jsx($S,{fieldKey:e,styleClasses:(P=E.fields[e])==null?void 0:P.classes,formID:s,attr:t});case"decision-box":return p.jsx(eS,{fieldKey:e,styleClasses:(y=E.fields[e])==null?void 0:y.classes,formID:s,attr:t,fieldData:o,onBlurHandler:i,resetFieldValue:n});case"html":return p.jsx(cS,{fieldKey:e,styleClasses:(D=E.fields[e])==null?void 0:D.classes,formID:s,attr:t,fieldData:o,resetFieldValue:n});case"button":return p.jsx(R0,{fieldKey:e,styleClasses:(V=E.fields[e])==null?void 0:V.classes,formID:s,attr:t,fieldData:o,buttonDisabled:h,handleReset:a});case"paypal":return p.jsx(pS,{isBuilder:d,styleClasses:(k=E.fields[e])==null?void 0:k.classes,fieldKey:e,formID:s,attr:t,contentID:c,fieldData:o,resetFieldValue:n,handleFormValidationErrorMessages:f});case"stripe":return p.jsx(US,{isBuilder:d,styleClasses:(B=E.fields[e])==null?void 0:B.classes,fieldKey:e,formID:s,attr:t,contentID:c,fieldData:o,resetFieldValue:n,handleFormValidationErrorMessages:f});case"razorpay":return p.jsx(MS,{fieldKey:e,styleClasses:(X=E.fields[e])==null?void 0:X.classes,contentID:c,formID:s,attr:t,buttonDisabled:h,resetFieldValue:n,handleFormValidationErrorMessages:f});case"title":return p.jsx(qS,{fieldKey:e,styleClasses:(N=E.fields[e])==null?void 0:N.classes,formID:s,attr:t});case"image":return p.jsx(dS,{fieldKey:e,styleClasses:(W=E.fields[e])==null?void 0:W.classes,formID:s,attr:t});case"divider":return p.jsx(sS,{fieldKey:e,styleClasses:(F=E.fields[e])==null?void 0:F.classes,formID:s,attr:t});case"currency":return p.jsx(tS,{fieldKey:e,styleClasses:($=E.fields[e])==null?void 0:$.classes,formID:s,attr:t,contentID:c});case"country":return p.jsx(Q0,{fieldKey:e,styleClasses:(G=E.fields[e])==null?void 0:G.classes,formID:s,attr:t,contentID:c});case"phone-number":return p.jsx(gS,{fieldKey:e,styleClasses:(U=E.fields[e])==null?void 0:U.classes,formID:s,attr:t,contentID:c});case"section":return p.jsx(FS,{fieldKey:e,styleClasses:(H=E.fields[e])==null?void 0:H.classes,formID:s,attr:t});case"repeater":return p.jsx(PS,{fieldKey:e,styleClasses:(Y=E.fields[e])==null?void 0:Y.classes,formID:s,attr:t});case"rating":return p.jsx(LS,{fieldKey:e,styleClasses:(ot=E.fields[e])==null?void 0:ot.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"signature":return p.jsx(jS,{fieldKey:e,styleClasses:(rt=E.fields[e])==null?void 0:rt.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"blank":return p.jsx("div",{className:"blnk-blk drag"})}return p.jsx("div",{children:"Loading..."})}}var XS=j.memo(YS);function Ch({layoutItem:t,removeLayoutItem:e,cloneLayoutItem:s,navigateToFieldSettings:i,navigateToStyle:n,handleContextMenu:a}){const o=et(oe),h=et(tI),c=et(mo),d=f=>{f.stopPropagation(),n(t.i)},u=an(lf);return j.useEffect(()=>{u(f=>A(_({},f),{reCalculateFieldHeights:f.reCalculateFieldHeights+1}))},[]),p.jsxs(p.Fragment,{children:[c.fieldKey===t.i&&p.jsx("span",{className:"resize-txt",children:`w: ${c.w||t.w}, x: ${c.x||t.x}`}),p.jsxs("div",{className:"blk-icn-wrp pos-abs flx",children:[p.jsx("button",{type:"button",className:"drag g-c us-n blk-wrp-btn",style:{cursor:"move"},title:gn("Move"),"data-testid":`${t.i}-move-btn`,children:p.jsx(iI,{size:"15",stroke:"3"})}),p.jsx("button",{type:"button",className:"g-c drag curp us-n no-drg blk-wrp-btn",title:gn("Style"),onClick:d,"data-testid":`${t.i}-style-btn`,children:p.jsx(eI,{stroke:2.3,height:"15",width:"13"})}),p.jsx("button",{type:"button",className:"g-c drag curp us-n no-drg blk-wrp-btn",title:gn("Settings"),onClick:i,"data-testid":`${t.i}-settings-btn`,children:p.jsx(Jb,{size:"18",stroke:2})}),p.jsx("button",{type:"button",className:"g-c drag curp us-n no-drg blk-wrp-btn",title:gn("Clone"),onClick:()=>s(t.i),"data-testid":`${t.i}-copy-btn`,children:p.jsx(Kb,{size:"17",stroke:2})}),p.jsx(nI,{className:"g-c drag us-n no-drg blk-wrp-btn",removeLayoutItem:e,fieldId:t.i}),p.jsx("button",{"data-close":!0,type:"button",className:"g-c us-n no-drg blk-wrp-btn blk-wrp-down-btn",draggable:"false",style:{cursor:"pointer"},title:gn("More Options"),onClick:f=>a(f,t.i),"data-testid":`${t.i}-more-options`,children:p.jsx(sI,{size:"21",stroke:2.2})})]}),p.jsx(ZS,{fields:o,layoutItem:t,formID:h})]})}const ZS=({layoutItem:t,formID:e,fields:s})=>{const i=s[t.i];return p.jsx(XS,{formID:e,atts:i,fieldKey:t.i})};export{Ch as default};
