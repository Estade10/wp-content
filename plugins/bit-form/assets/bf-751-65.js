var ts=Object.defineProperty,ss=Object.defineProperties;var os=Object.getOwnPropertyDescriptors;var $t=Object.getOwnPropertySymbols;var rs=Object.prototype.hasOwnProperty,ns=Object.prototype.propertyIsEnumerable;var kt=(s,o,a)=>o in s?ts(s,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[o]=a,i=(s,o)=>{for(var a in o||(o={}))rs.call(o,a)&&kt(s,a,o[a]);if($t)for(var a of $t(o))ns.call(o,a)&&kt(s,a,o[a]);return s},P=(s,o)=>ss(s,os(o));import{z as as,A as ht,D as Ue,F as yt,G as se,j as r,H as ls,J as is,K as cs,a as ke,r as S,O as ds,d as $e,_ as J,o as Me,p as Ft,e as $,u as U,P as p,Q as It,l as ft,U as jt,V as Ct,W as ms,X as us,Y as xe,c as Bt,Z as fs,a0 as bs,L as ps,a1 as Nt,a2 as At,a3 as Vt,a4 as Et,a5 as hs,a6 as ys,a7 as Rt,a8 as Pe,a9 as Pt,aa as gs,ab as Ut,ac as Mt,ad as Ot,ae as zt,af as Ht,ag as Kt,ah as Wt,ai as vs,aj as qt,ak as Gt,al as Jt,am as Ss,an as Yt,ao as Qt,ap as Xt,aq as Zt,ar as Ts,as as ws,at as Lt,au as xs,av as _s,aw as $s,ax as ks,ay as gt,az as vt,aA as js,k as es,aB as Cs,i as Ls,N as Dt,aC as Ds,aD as Fs,aE as Is,aF as Bs,aG as Ns,aH as As,aI as Vs,t as Es,aJ as Rs,aK as Ps,aL as Us,aM as _e,aN as g}from"./main-281.js";import{T as Ms,a as Os,R as zs}from"./bf-646-73.js";const Oe=as({allThemeVars:{},allThemeColors:{},allStyles:{}}),io=ht(s=>{const o=s(Ue),{lightThemeColors:a,darkThemeColors:t}=s(Oe).allThemeColors;return o==="dark"?i(i({},a),t):a}),co=ht(s=>{const o=s(Ue)==="dark",a=s(yt),{lgLightThemeVars:t,lgDarkThemeVars:b,mdLightThemeVars:d,mdDarkThemeVars:h,smLightThemeVars:x,smDarkThemeVars:_}=s(Oe).allThemeVars;if(a==="lg")return o?i(i({},t),b):t;if(a==="md")return i(i(i(i({},t),o&&b),d),o&&h);if(a==="sm")return i(i(i(i(i(i({},t),o&&b),d),o&&h),x),o&&_)}),mo=ht(s=>{const o=s(Ue)==="dark",a=s(yt),{lgLightStyles:t,lgDarkStyles:b,mdLightStyles:d,mdDarkStyles:h,smLightStyles:x,smDarkStyles:_}=s(Oe).allStyles;if(a==="lg")return o?se(t,b):t;if(a==="md")return o?se(t,b,d,h):se(t,d);if(a==="sm")return o?se(t,b,d,h,x,_):se(t,d,x)});function Hs({size:s=14,stroke:o=3,className:a}){return r.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 30 30",children:r.jsx("polyline",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:o,points:"26 15.2 4 15.2 12.38 23.69 4 15.2 12.77 6.31"})})}var Ks={name:"Contact Form",theme:"bitformDefault",fields:{"fld_key-1":{typ:"button",btnSiz:"md",btnTyp:"submit",txt:"Submit",icn:{pos:"",url:""},valid:{},customClasses:{},customAttributes:{},fulW:!0},"fld_key-2":{typ:"text",lbl:"Name",phHide:!0,valid:{req:!0,reqPos:"after",reqShow:!0},err:{req:{dflt:'<p style="margin:0">This field is required</p>',show:!0}},customClasses:{},customAttributes:{},fieldName:"name",acHide:!0,ac:"name",ph:"John Doe"},"fld_key-3":{typ:"textarea",lbl:"Message",phHide:!0,valid:{req:!0,reqPos:"after",reqShow:!0},err:{req:{dflt:'<p style="margin:0">This field is required</p>',show:!0,custom:!0,msg:'<p style="margin:0">Message can not be empty.</p>'}},customClasses:{},customAttributes:{},fieldName:"textarea-44-3",ph:"Write your message..."},"fld_key-5":{typ:"email",lbl:"Email",ph:"example@mail.com",phHide:!0,pattern:"^[^$_bf_$s@]+@[^$_bf_$s@]+$_bf_$.[^$_bf_$s@]+$",valid:{req:!0,reqPos:"after",reqShow:!0},err:{invalid:{dflt:'<p style="margin:0">Please, Enter a valid email address.</p>',show:!0},req:{dflt:'<p style="margin:0">This field is required</p>',show:!0,custom:!0,msg:'<p style="margin:0">Please enter your email.</p>'}},customClasses:{},customAttributes:{},fieldName:"email",acHide:!0,ac:"email"}},layouts:{lg:[{w:60,h:77,x:0,y:0,i:"fld_key-2"},{w:60,h:77,x:0,y:77,i:"fld_key-5"},{w:60,h:98,x:0,y:154,i:"fld_key-3",minW:9},{w:60,h:50,x:0,y:252,i:"fld_key-1"}],md:[],sm:[]}};function Ws(s,o){let a={};s==="contact_form"?a=Ks:a=cs;const{name:t,fields:b,layouts:d,conditions:h,confirmations:x,theme:_,additionalSettings:F}=a;d.md=se(d.lg,d.md),d.sm=se(d.lg,d.md,d.sm);const Y=Object.keys(b),y={},v={lg:[],md:[],sm:[]},C=se(ls(),x||{}),w=[...Gs(),...h||[]];Y.forEach((B,oe)=>{const M=`b${o}-${oe+1}`,c=i({},b[B]);c.fieldName=`${c.typ}-${M}`,y[M]=c;const T=d.lg.find(A=>A.i===B),N=d.md.find(A=>A.i===B),G=d.sm.find(A=>A.i===B);v.lg.push(P(i({},T),{i:M})),v.md.push(P(i({},N),{i:M})),v.sm.push(P(i({},G),{i:M}))});const q=Object.entries(y),{themeColors:L,themeVars:I,styles:k}=is(_,q,o);return{name:t,fields:y,layouts:v,confirmations:C,conditions:w,allThemeColors:L,allThemeVars:I,allStyles:k,additionalSettings:F}}const qs={cond_type:"if",logics:[{field:"",logic:"",val:""},"or",{field:"",logic:"",val:""}],actions:{fields:[{field:"",action:"value"}],success:[{type:"successMsg",details:{id:'{"index":0}'}}]}};function Gs(){return[{title:"Show Success Message",action_type:"onsubmit",action_run:"create_edit",action_behaviour:"always",conditions:[qs]}]}function Js({id:s,className:o,cls:a,value:t,readOnly:b=!0}){const{css:d}=ke(),h=S.useRef(null),x=()=>navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(t):(h.current.focus(),h.current.select(),new Promise((F,Y)=>{document.execCommand("copy")?F():Y()})),_=()=>{x().then(()=>$e.success(J("Copied on clipboard."))).catch(()=>$e.error(J("Failed to Copy, Try Again.")))};return r.jsxs("div",{className:`${d(bt.wrapper)} ${o}`,children:[r.jsx("input",{"aria-label":"Copy field key",ref:h,className:`${d(bt.input)} ${a}`,id:"text-copy",type:"text",value:t,readOnly:b}),r.jsx(Ms,{msg:"Copy",children:r.jsx("button",{"data-testid":`${s}-col-cpy-btn`,onClick:_,className:`${d(bt.btn)}`,type:"button","aria-label":"Copy field key",children:r.jsx(ds,{w:"20"})})})]})}const bt={wrapper:{pn:"relative"},input:{bd:"var(--white-0-95)",oe:"none",b:"none !important",brs:"10px !important",p:"2px 40px 2px 10px !important",w:100,lh:"1 !important",fw:"500 !important",bs:"none !important",":focus-visible":{bs:"0 0 0 2px var(--b-50) !important"}},btn:{pn:"absolute !important",b:"none",oe:"none",bd:"none",tp:"50%",tm:"translateY(-50%)",rt:2,cur:"pointer",tn:"color 0.2s",cr:"var(--white-0-61)",flx:"center-between","&:hover":{cr:"var(--b-50)"}}};function Ys({children:s,instance:o=null,width:a="auto",place:t="bottom",onShow:b,onHide:d,arrow:h=!0,trigger:x="click",offset:_=[0,10]}){return r.jsx(Os,P(i(i({ref:o,inertia:!0,trigger:x,placement:t,duration:350,interactiveBorder:20},b&&{onShow:b}),d&&{onHide:d}),{theme:"light-border",animation:"shift-away-extreme",interactive:!0,maxWidth:a,offset:_,arrow:h&&zs,content:s[1],children:r.jsx("span",{children:s[0]})}))}function Qs(){const{css:s}=ke(),{formID:o}=Me();return r.jsxs(Ys,{children:[r.jsx("button",{type:"button",className:s(Re.shareIcn),children:"Publish"}),r.jsxs("div",{className:s(Re.downmenu),children:[r.jsx("div",{className:s(Re.title),children:"Short Code"}),r.jsx(Js,{cls:s(Re.downmenuinput),value:`[bitform id='${o}']`})]})]})}const Re={title:{fs:14,mb:5,fw:600},shareIcn:{bd:"none",px:15,py:7,oe:"none",b:"none",cr:"var(--white-100)",flx:"align-center",fs:12,fw:400,tn:"background 0.2s",mx:10,my:5,brs:8,curp:1,":hover":{bd:"var(--b-35-33)"}},downmenu:{w:200,px:5,py:8},downmenuinput:{w:"100% !important",fs:12}};function pt(s){const o=Me(),a=Object.keys(s);let t=!0;return a.forEach(b=>{s[b]!=="?"&&b!=="render"&&o[b]!==s[b]&&(s[b]===!0&&o[b]===void 0||s[b]!==!0)&&(t=!1)}),t&&s.render}const W={btct_bld_nav:{flx:"center-between",bd:"var(--dp-blue-bg)",pn:"fixed",h:40,w:"100%",zx:999,inset:0},builder_routes:{mt:40,pn:"relative"},btcd_bld_title:{flx:"align-center",w:320},nav_back_icn:{w:38,ow:"hidden",py:4,cr:"var(--white-100)",pr:15,pl:25,mx:5,brs:100,":hover":{cr:"var(--white-100)",bd:"var(--b-50-22)"}},bit_icn:{flx:"center",w:40,h:"70%",p:"5px 7px",bl:"0.5px solid var(--b-38-62-40)",br:"0.5px solid var(--b-38-62-40)",my:5},btcd_bld_title_inp:{bd:"var(--dp-blue-bg)",cr:"var(--white)",py:6,px:10,fs:14,b:"none",tn:"background 0.3s !important",oe:"none",ml:8,brs:8,"&:hover":{bd:"var(--b-16-35)"},"&:focus":{bd:"var(--b-44-87)",cr:"var(--b-54-12)"}},btcd_bld_lnk:{w:320},btcd_bld_btn:{flx:"align-center",w:320,jc:"end"},cls_btn:{cr:"var(--white)",se:30,mr:15,flx:"center",p:0,ta:"center",tn:"color 0.5s !important","&:hover":{cr:"var(--red-100-61) !important"}},btn:{fw:500,bd:"var(--g-45)",oe:"none",cr:"var(--b-63-18-67)",brs:"10px !important",b:"1px solid var(--g-89-7)",h:28,td:"none",my:5,mx:10,py:7,px:15,pn:"relative",fs:14,curp:1,flx:"align-center",w:"auto","&:disabled":{bd:"var(--b-100-50-5) !important"}},visDisable:{bd:"var(--b-50-22) !important",cr:"var(--b-37-69) !important",b:"none !important",fw:600}};function Xs({componentMounted:s,modal:o,setModal:a}){const t=Ft(),{page:b,formType:d,formID:h,"*":x}=Me(),{css:_}=ke(),[F,Y]=S.useState(d==="edit"?"Update":"Save"),[y,v]=S.useState(d==="edit"?h:0),[C,w]=S.useState(!1),[q,L]=$(Nt),I=U(At),k=U(Vt),{formName:B,multiStepSettings:oe}=k,M=U(Et),c=p(hs),T=p(ys),N=p(Rt),G=It(Pe),A=p(Pt),ze=U(gs),[X,je]=$(Ut),[Z,me]=$(Mt),[ee,ue]=$(Ot),[V,He]=$(Pe),[Ke,H]=$(zt),[Q,Ce]=$(Ht),[We,qe]=$(Kt),[Ge,Je]=$(Wt),fe=U(vs),Ye=p(qt),Qe=p(Gt),Xe=p(Jt),Ze=p(Ss),et=U(Yt),tt=U(Qt),st=U(Xt),Le=U(Zt),ot=U(Ts),De=U(ws);S.useEffect(()=>{var l,f;if((l=Q[Q.length-1])!=null&&l.newItegration||(f=Q[Q.length-1])!=null&&f.editItegration){const D=ft(Q,n=>{n.pop()});Ce(D),re("integrations",D)}},[Q]),S.useEffect(()=>{var l;if((l=Z[Z.length-1])!=null&&l.updateTem){const f=ft(Z,D=>{D.pop()});me(f),re("email-template",f)}},[Z]),S.useEffect(()=>{var l;if((l=ee[ee.length-1])!=null&&l.updateTem){const f=ft(ee,D=>{D.pop()});ue(f),re("pdf-template",f)}},[ee]);const le=l=>{if((l.key==="s"||l.key==="S")&&l.ctrlKey)return l.preventDefault(),!V.disabled&&!C&&Ie(),!1},Fe=l=>{if(V.unsaved){const f=l;return f.preventDefault(),f.returnValue="Are you sure you want to exit?",f.returnValue}};S.useEffect(()=>{var f;document.addEventListener("keydown",le);const l=(f=document.getElementById("bit-grid-layout"))==null?void 0:f.contentDocument;return l==null||l.addEventListener("keydown",le),window.addEventListener("beforeunload",Fe),()=>{document.removeEventListener("keydown",le),l==null||l.removeEventListener("keydown",le),window.removeEventListener("beforeunload",Fe)}});const rt=()=>{if(V.errors){const l=V.errors[V.errors.length-1];if(l.errorMsg?$e.error(l.errorMsg):$e.error(J("Please fix the errors")),l.errorUrl){const f=$s();t(`${f}/${l.errorUrl}`)}return l.fieldKey&&(Ze(l.fieldKey),setTimeout(()=>{var f;(f=ks(`[data-key="${l.fieldKey}"]`))==null||f.focus()},500)),!0}return!1},Ie=l=>{const f=Lt("#secondary-update-btn");if(ot.styleMode&&xs(),f)f.click();else if(l==="update-btn"){if(rt())return;re()}else Lt("#update-btn").click()};S.useEffect(()=>{V.unsaved&&C&&w(!1)},[V]);const nt=()=>{const l=Object.values(I).filter(D=>D.typ==="button"&&D.btnTyp==="submit");return(I?Object.values(I).filter(D=>_s.includes(D.typ)):[]).length>0||l.length>0},re=(l,f)=>{y&&w(!0);let D=Z,n=ee,j=We,K=Q;if(l==="email-template"?D=f:l==="pdf-template"?n=f:l==="additional"?j=f:l==="integrations"&&(K=f),!nt()){const u=i({},o);u.show=!0,u.title=J("Sorry"),u.btnTxt=J("Close"),u.msg=J("Please add a submit button"),u.cancelBtn=!1,a(u),w(!1);return}const E=jt(fe)||fe===void 0,{layouts:m,nestedLayouts:O,lightThemeColors:R,darkThemeColors:z,lgLightThemeVars:ie,lgDarkThemeVars:at,mdLightThemeVars:lt,mdDarkThemeVars:it,smLightThemeVars:ct,smDarkThemeVars:dt,lgLightStyles:mt,lgDarkStyles:ut,mdLightStyles:Be,mdDarkStyles:Ne,smLightStyles:Ae,smDarkStyles:Ve}=Ct(y),be={lightThemeColors:R,darkThemeColors:z},pe={lgLightThemeVars:ie,lgDarkThemeVars:at,mdLightThemeVars:lt,mdDarkThemeVars:it,smLightThemeVars:ct,smDarkThemeVars:dt};let ce={lgLightStyles:mt,lgDarkStyles:ut,mdLightStyles:Be,mdDarkStyles:Ne,smLightStyles:Ae,smDarkStyles:Ve};ce=ms(ce);let ne=sessionStorage.getItem("btcd-fs");ne=ne&&us(ne);const he=P(i(P(i(i(i(i(P(i(i(i({},y&&{id:y}),!y&&{form_id:M}),y&&{currentReport:ze}),{layout:m,nestedLayouts:O,formInfo:k,fields:I,form_name:B,report_id:X.id,additional:j,workFlows:Ke,formStyle:ne}),!E&&{style:xe.stringify(ce)}),!E&&{staticStyles:xe.stringify(tt)}),!E&&{themeColors:xe.stringify(be)}),!E&&{themeVars:xe.stringify(pe)}),{breakpointSize:st}),Le.isFetched&&{customCodes:Le}),{layoutChanged:sessionStorage.getItem("btcd-lc"),rowHeight:sessionStorage.getItem("btcd-rh"),formSettings:i({formName:B,confirmation:Ge,mailTem:D,pdfTem:n,integrations:K},!jt(De)&&{formAbandonment:De}),builderSettings:et});y&&q.length!==0&&(he.deletedFldKey=q);const de=y?"bitforms_update_form":"bitforms_create_new_form",Ee=Bt(he,de).then(u=>{var te,ye,ge,ve,Se,Te,we;if(u!=null&&u.success&&s){let{data:e}=u;typeof e!="object"&&(e=JSON.parse(e)),T(ae=>P(i({},ae),{reRenderGridLayoutByRootLay:ae.reRenderGridLayoutByRootLay+1})),(te=e==null?void 0:e.formSettings)!=null&&te.confirmation&&Je(e.formSettings.confirmation),e!=null&&e.workFlows&&H(e.workFlows),(ye=e==null?void 0:e.formSettings)!=null&&ye.integrations&&Ce(e.formSettings.integrations),(ge=e==null?void 0:e.formSettings)!=null&&ge.mailTem&&me(e.formSettings.mailTem),(ve=e==null?void 0:e.formSettings)!=null&&ve.pdfTem&&ue(e.formSettings.pdfTem),e!=null&&e.additional&&qe(e.additional),e!=null&&e.Labels&&N(e.Labels),e!=null&&e.reports&&A((e==null?void 0:e.reports)||[]),!(X!=null&&X.id)&&((Se=e==null?void 0:e.form_content)!=null&&Se.report_id)&&je({id:(Te=e==null?void 0:e.form_content)==null?void 0:Te.report_id,isDefault:((we=e==null?void 0:e.form_content)==null?void 0:we.is_default)||0}),E||(Ye(be),Qe(pe),Xe(xe.parse(e==null?void 0:e.style)),fs()),c(ae=>bs(ae,{type:de==="bitforms_create_new_form"?"add":"update",data:{formID:e.id,status:e.status!=="0",formName:e.form_name,shortcode:`bitform id='${e.id}'`,entries:e.entries,views:e.views,conversion:e.entries===0?0:(e.entries/(e.views==="0"?1:e.views)*100).toPrecision(3),created_at:e.created_at}})),G(),L([]),de==="bitforms_create_new_form"&&y===0&&F==="Save"&&(v(e.id),Y("Update"),t(`/form/${b}/edit/${e.id}/${x}`,{replace:!0})),setTimeout(()=>Ct(e.id),100),sessionStorage.removeItem("btcd-lc"),sessionStorage.removeItem("btcd-fs"),sessionStorage.removeItem("btcd-rh")}else!(u!=null&&u.success)&&(u==null?void 0:u.data)==="Token expired"?window.location.reload():u!=null&&u.success||setTimeout(()=>{window.location.reload()},2e3);return u}).catch(u=>{console.error("form save error=",u)});y&&$e.promise(Ee,{loading:J("Updating..."),success:u=>{var te;return w(!1),((te=u==null?void 0:u.data)==null?void 0:te.message)||(u==null?void 0:u.data)},error:()=>(w(!1),J("Error occurred, Please try again."))})};return r.jsxs("button",{id:"update-btn",className:`${_(W.btn)} tooltip ${V.unsaved?"":_(W.visDisable)}`,type:"button",onClick:()=>Ie("update-btn"),disabled:V.disabled||C,style:{"--tooltip-txt":`'${J("ctrl + s")}'`},children:[F,V.loading&&r.jsx(ps,{size:20,clr:"white",className:"ml-1"})]})}function Zs({defaultActive:s,options:o,size:a=100,component:t="a",onChange:b,variant:d="white",show:h,activeShow:x,square:_}){const{css:F}=ke(),Y=Number(a),y=c=>Math.floor(Y/c),v={};d==="white"&&(v.tabBg="var(--white-0-95)",v.selectorBg="var(--white-100)",v.active="var(--b-50) !important"),d==="blue"&&(v.selectorBg="var(--b-50)",v.tabBg="#454A65",v.tabClr="var(--b-44-87)",v.active="var(--white-100) !important"),d==="lightgray"&&(v.selectorBg="var(--white-100)",v.tabBg="var(--white-0-95)",v.tabClr="var(--b-44-87)",v.active="var(--b-50) !important");const C={wrapper:{ta:"center"},tabs:{fs:y(6.67),py:y(33.34),px:y(20),bd:v.tabBg,ls:"none",dy:"inline-block",brs:y(7.15),pn:"relative","& .active":{cr:v.active},"& button":{bd:"none",oe:"none",b:"none"}},selector:{w:0,h:"80%",dy:"inline-block",pn:"absolute",lt:y(20),tp:"50%",tm:"translatey(-50%)",zx:1,brs:y(9.09),tdn:"0.3s",ttf:"cubic-bezier(0.42, 0.44, 0.57, 1.35)",bd:v.selectorBg,willChange:"transform",bs:d==="blue"&&"0 2px 7px -2px rgb(0 11 49 / 79%)"},tab_link:P(i({curp:1,td:"none",fw:500,flxi:"align-center",pn:"relative",py:_?0:y(10),px:_?0:y(5),textShadow:d==="blue"&&"0 1px 1px #6e6e6e70",zx:1},_&&{aspectRatio:"1/1",w:30,h:30,flxi:"center"}),{tdy:"0.3s",tdn:"0.6s",cr:v.tabClr,"transition-property":"color",":hover:not(.active)":{cr:"var(--white-0-100-90)",tdy:"0s",tdn:"300ms"},":focus-visible":{oe:"2px solid var(--b-50)"},"& .icn":{mr:h!=null&&h.includes("label")?y(20):0,lh:"75%",dy:"block"}})},w=S.useRef(null),q=S.useRef(null),L=S.useRef(null),[I,k]=S.useState(s||o[0].label),B=t;S.useEffect(()=>{I!==s&&k(s)},[s]),S.useLayoutEffect(()=>{var T;const c=(T=L==null?void 0:L.current)==null?void 0:T.querySelector(`[data-label="${I}"]`);if(c){const{width:N}=c.getBoundingClientRect()||{width:0};if(!w.current)return;w.current.style.width===""?(q.transition=w.current.style.transition,w.current.style.transition="all 0s"):w.current.style.transition=q.transition,w.current.style.width=`${N}px`,w.current.style.transform=`translate(${c.offsetLeft-5}px, -50%)`}});const oe=(c,T)=>{var A;if(c.preventDefault(),c.type==="keypress"&&c.code!=="Space"||c.type==="keypress"&&c.code!=="Enter")return;const N=c.currentTarget;if(!c.type==="keypress"||!c.type==="click")return;const G=(A=L==null?void 0:L.current)==null?void 0:A.querySelector(`.tabs ${t}.active`);N!==G&&(G==null||G.classList.remove("active"),k(o[T].label),b(o[T].label))},M=(c,T)=>!!(c[T]&&(x&&I===c.label&&x.includes(T)||h&&h.includes(T)||!h&&!x));return r.jsx("div",{className:F(C.wrapper),children:r.jsxs("div",{ref:L,className:`${F(C.tabs)} tabs`,children:[r.jsx("div",{ref:w,className:`selector ${F(C.selector)}`}),o==null?void 0:o.map((c,T)=>r.jsxs(B,P(i(i({className:`${F(C.tab_link)} ${I===c.label?" active":""}`,onClick:N=>oe(N,T),onKeyDown:N=>oe(N,T),"data-label":c.label,"data-testid":`${c.label}-tab`},t==="button"&&{type:"button"}),t==="a"&&{href:`#${c.label}`}),{href:`#${c.label}`,type:"button",children:[M(c,"icn")&&r.jsx("span",{className:`icn ${I===c.label?F(C.segment_img):""}`,children:c.icn}),M(c,"label")&&J(c.label)]}),`segment-option-${T*10}`))]})})}const eo=gt(()=>vt(()=>import("./bf-869-79.js").then(s=>s.y),["./bf-869-79.js","./main-281.js","./main-281.css","./bf-646-73.js","./bf-885-388.css","./bf-23-74.js","./bf-811-102.js","./bf-675-103.js","./bf-900-104.js","./bf-231-105.js","./bf-406-106.js","./bf-112-111.js","./bf-724-110.js","./bf-521-107.js","./bf-890-67.js","./bf-930-389.css"],import.meta.url),{fallback:r.jsx(js,{})}),to=gt(()=>vt(()=>import("./bf-651-80.js"),["./bf-651-80.js","./main-281.js","./main-281.css","./bf-23-74.js","./bf-329-68.js","./bf-226-108.js","./bf-977-119.js","./bf-210-392.css","./bf-646-73.js","./bf-885-388.css","./bf-326-109.js","./bf-724-110.js","./bf-114-391.css","./bf-112-111.js","./bf-310-72.js","./bf-687-112.js","./bf-607-113.js","./bf-603-115.js","./bf-495-393.css","./bf-44-116.js","./bf-119-117.js","./bf-811-102.js","./bf-370-118.js"],import.meta.url),{fallback:r.jsx(es,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"90vh"}})}),so=gt(()=>vt(()=>import("./bf-433-81.js").then(s=>s.a),["./bf-433-81.js","./main-281.js","./main-281.css","./bf-850-76.js","./bf-560-129.js","./bf-521-107.js"],import.meta.url),{fallback:r.jsx(es,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"90vh"}})});function oo(){let s=!0;const o=Ft(),{formType:a,formID:t}=Me(),b=p(Pt),d=p(Is),h=p(At),x=p(Rt),[_,F]=S.useState(!0),[Y,y]=S.useState([]),[v,C]=S.useState(!0),w=U(Pe),[q,L]=$(Vt),{formName:I}=q,[k,B]=S.useState({show:!1,title:"",msg:"",action:()=>re(),btnTxt:""}),oe=p(Mt),M=p(Ot),c=p(zt),T=p(Kt),[N,G]=$(Ht),A=p(Wt),ze=p(Ut),X=p(Bs),je=p(Ns),Z=p(qt),me=p(Gt),ee=p(Jt),ue=p(Oe),V=p(As),He=p(Pe),Ke=U(Et),{css:H}=ke(),[Q,Ce]=$(Qt),We=p(yt),[qe,Ge]=$(Vs),[Je,fe]=$(Yt),[Ye,Qe]=$(Ue),[Xe,Ze]=$(Zt),[et,tt]=$(Nt),[st,Le]=$(Xt),ot=Cs().map(n=>It(n)),De=()=>{const j=Es().pathname.split("/");return j[2].charAt(0).toUpperCase()+j[2].slice(1)},le=()=>{const{name:n,fields:j,layouts:K,confirmations:E,conditions:m,allThemeColors:O,allThemeVars:R,allStyles:z,additionalSettings:ie}=Ws(a,Ke);L({formName:n}),h(j),X(K),A(E),c(m),Z(O),me(R),ee(z),ue({allThemeColors:O,allThemeVars:R,allStyles:z}),V(!0),_e({state:{fields:j,layouts:K,allThemeColors:O,allThemeVars:R,allStyles:z}},!1,0),C(!1),ie&&T(ie)},Fe=()=>{if(window.scrollTo(0,0),Rs(),d(t),a!=="edit"){le();return}nt()},rt=()=>{Ps(),F(!1),Us(),ot.forEach(n=>n())};S.useEffect(()=>(Fe(),()=>{s=!1,rt()}),[]);const Ie=()=>{var Be,Ne,Ae,Ve,be,pe,ce,ne,he,de,Ee,u,te,ye,ge,ve,Se,Te,we,e,ae,St,Tt,wt,xt,_t;let n=0;const j=(Be=g(`btcd-breakpoint-bf-${t}`))!=null?Be:n+=1,K={lgLightThemeVars:(Ne=g(`btcd-themeVarsLgLight-bf-${t}`,{strType:"json"}))!=null?Ne:n+=1,mdLightThemeVars:(Ae=g(`btcd-themeVarsMdLight-bf-${t}`,{strType:"json"}))!=null?Ae:n+=1,smLightThemeVars:(Ve=g(`btcd-themeVarsSmLight-bf-${t}`,{strType:"json"}))!=null?Ve:n+=1,lgDarkThemeVars:(be=g(`btcd-themeVarsLgDark-bf-${t}`,{strType:"json"}))!=null?be:n+=1,mdDarkThemeVars:(pe=g(`btcd-themeVarsMdDark-bf-${t}`,{strType:"json"}))!=null?pe:n+=1,smDarkThemeVars:(ce=g(`btcd-themeVarsSmDark-bf-${t}`,{strType:"json"}))!=null?ce:n+=1},E={lightThemeColors:(ne=g(`btcd-lightThemeColors-bf-${t}`,{strType:"json"}))!=null?ne:n+=1,darkThemeColors:(he=g(`btcd-darkThemeColors-bf-${t}`,{strType:"json"}))!=null?he:n+=1},m={lgLightStyles:(de=g(`btcd-stylesLgLight-bf-${t}`,{strType:"json"}))!=null?de:n+=1,mdLightStyles:(Ee=g(`btcd-stylesMdLight-bf-${t}`,{strType:"json"}))!=null?Ee:n+=1,smLightStyles:(u=g(`btcd-stylesSmLight-bf-${t}`,{strType:"json"}))!=null?u:n+=1,lgDarkStyles:(te=g(`btcd-stylesLgDark-bf-${t}`,{strType:"json"}))!=null?te:n+=1,mdDarkStyles:(ye=g(`btcd-stylesMdDark-bf-${t}`,{strType:"json"}))!=null?ye:n+=1,smDarkStyles:(ge=g(`btcd-stylesSmDark-bf-${t}`,{strType:"json"}))!=null?ge:n+=1},O=(ve=g(`btcd-layouts-bf-${t}`,{strType:"json"}))!=null?ve:n+=1,R=(Se=g(`btcd-nested-layouts-bf-${t}`,{strType:"json"}))!=null?Se:n+=1,z=(Te=g(`btcd-fields-bf-${t}`,{strType:"json"}))!=null?Te:n+=1,ie=(we=g(`btcd-breakpointSize-bf-${t}`,{strType:"json"}))!=null?we:st,at=(e=g(`btcd-staticStyles-bf-${t}`,{strType:"json"}))!=null?e:Q,lt=(ae=g(`btcd-builderHelperStates-bf-${t}`,{strType:"json"}))!=null?ae:qe,it=(St=g(`btcd-builderSettings-bf-${t}`,{strType:"json"}))!=null?St:Je,ct=(Tt=g(`btcd-colorScheme-bf-${t}`))!=null?Tt:Ye,dt=(wt=g(`btcd-customCodes-bf-${t}`,{strType:"json"}))!=null?wt:Xe,mt=(xt=g(`btcd-deletedFldKey-bf-${t}`,{strType:"json"}))!=null?xt:et,ut=(_t=g(`btcd-formInfo-bf-${t}`,{strType:"json"}))!=null?_t:q;return n===0?(X(O),je(R),h(z),_e({state:{layouts:O,fields:z}},!1,0),We(j),me(K),Z(E),ee(m),Ce(at),ue({allThemeVars:K,allThemeColors:E,allStyles:m}),Ge(lt),fe(it),Qe(ct),Ze(dt),tt(mt),L(ut),He({unsaved:!0}),Le(ie),V(!0),!0):!1},nt=()=>{a==="edit"&&Bt({id:t},"bitforms_get_a_form").then(n=>{var j,K,E;if(n!=null&&n.success&&s){const m=n.data,O=(j=m==null?void 0:m.reports)==null?void 0:j.find(z=>z.isDefault.toString()==="1"),R=Ie();R||(X(m.form_content.layout),_e({state:{layouts:m.form_content.layout}},!1,0)),R||(je(m.form_content.nestedLayout||{}),_e({state:{nestedLayouts:m.form_content.nestedLayout||{}}},!1,0)),R||(h(m.form_content.fields),_e({state:{fields:m.form_content.fields}},!1,0)),R||L(z=>i(i({},z),m.form_content.formInfo)),c(m.workFlows),T(m.additional),G(m.formSettings.integrations),A(m.formSettings.confirmation),oe(m.formSettings.mailTem),M(m.formSettings.pdfTem),!R&&m.builderSettings&&fe(m.builderSettings),ze({id:((K=m==null?void 0:m.form_content)==null?void 0:K.report_id)||(O==null?void 0:O.id),isDefault:((E=m==null?void 0:m.form_content)==null?void 0:E.report_id)===null}),x(m.Labels),b(m.reports||[]),C(!1)}else!n.success&&n.data==="Token expired"&&window.location.reload(),C(!1)}).catch(()=>{C(!1)})},re=()=>{k.show=!1,B(i({},k))},l=n=>{n.preventDefault(),B({show:!0,title:"Warning",msg:"Are you sure you want to leave the form? Unsaved data will be lost.",btnTxt:"Okay",action:()=>o("/",{replace:!0})})},f=[{label:"Builder"},{label:"Responses"},{label:"Settings"}],D=n=>{n==="Builder"&&o(`/form/builder/${a}/${t}/fields-list`),n==="Responses"&&o(`/form/responses/${a}/${t}/`),n==="Settings"&&o(`/form/settings/${a}/${t}/form-settings`)};return r.jsxs("div",{className:`btcd-builder-wrp ${_&&"btcd-ful-scn"}`,children:[r.jsx(Ls,{title:k.title,action:k.action,show:k.show,body:k.msg,btnTxt:k.btnTxt,cancelBtn:k.cancelBtn,close:re}),r.jsxs("nav",{className:H(W.btct_bld_nav),children:[r.jsxs("div",{className:H(W.btcd_bld_title),children:[r.jsx(Dt,{className:H(W.nav_back_icn),to:"/",onClick:w.unsaved?l:null,children:r.jsx("span",{className:"g-c",children:r.jsx(Hs,{size:"22",className:"mr-2",stroke:"3"})})}),r.jsx("div",{className:H(W.bit_icn),children:r.jsx("img",{width:"16",src:Ds,alt:"BitForm logo"})}),r.jsx("input",{className:H(W.btcd_bld_title_inp),onChange:({target:{value:n}})=>{L(j=>P(i({},j),{formName:n})),He(j=>P(i({},j),{unsaved:!0}))},value:I,"data-testid":"form-name"})]}),r.jsx("div",{className:H(W.btcd_bld_lnk),children:r.jsx(Zs,{defaultActive:De(),options:f,size:"90",component:"button",onChange:D,variant:"blue"})}),r.jsxs("div",{className:H(W.btcd_bld_btn),children:[a==="edit"&&r.jsx(Qs,{}),r.jsx(Xs,{componentMounted:s,modal:k,setModal:B}),r.jsx(Dt,{to:"/",className:H(W.cls_btn),onClick:w.unsaved?l:null,children:r.jsx(Fs,{size:"14"})})]})]}),r.jsxs("div",{className:H(W.builder_routes),children:[r.jsx(pt,{page:"responses",formType:!0,formID:!0,render:r.jsx(to,{isLoading:v,allResp:Y,setAllResp:y,integrations:N})}),r.jsx(pt,{page:"builder",formType:!0,formID:!0,render:r.jsx(eo,{isLoading:v})}),r.jsx(pt,{page:"settings",formType:!0,formID:!0,render:r.jsx(so,{})})]})]})}var ro=S.memo(oo),uo=Object.freeze({__proto__:null,default:ro});export{io as $,Hs as B,Js as C,Ys as D,uo as F,co as a,mo as b,Oe as c,qs as d};
